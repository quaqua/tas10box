- unless flash.empty?
  - if flash[:error]
    .login-error-container
      %span= flash[:error]
  - else
    .login-error-container.notice
      %span= flash[:notice]

.login-logo

.login-container

  = form_for( @user, :html => {:onsubmit => "checkPassword();"} ) do |f|
    = f.hidden_field :confirmation_key
    = f.hidden_field :email
    %p.desc
      = raw t('user.welcome_activate')

    %p
      %label= t('login.password')
    %p
      = f.password_field( :password, :class => "js-get-focus new-password", :style => "width: 200px" )

    %p
      %label= t('login.password_confirm')
    %p
      = f.password_field( :password_confirm, :class => "js-get-focus new-password", :style => "width: 200px" )

      =f.submit( t('user.activate') )

.login-footer-container
  &copy; TASTENWERK (2o12)

:javascript

  $('.new-password').bind('keydown', function(e){
    if( e.keyCode == 13 && !checkPassword() )
      return false;
  })

  function checkPassword(){
    $('.login-container .error').removeClass('error');
    var password = $('.new-password').val()
    if( password.length > 5 ){
      if( password.match(/^\w*(?=\w*\d)(?=\w*[a-z])(?=\w*[A-Z])\w*$/) )
        return true;
      else
        $('.digit-error').addClass('error');
    } else
      $('.length-error').addClass('error');
    return false;
  }