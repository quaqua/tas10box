  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6552ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f2f497bfe2cba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f2f497bfe2cba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"71c3", "confirmation_key"=>"63492e2dd16c68ef3ef6"}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f2f497bfe2cba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3359ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f2f497bfe2cba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3d52", "confirmation_key"=>"ca18c34bdeaa574ff32d"}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f2f497bfe2cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f2f497bfe2cba000003", "version"=>1, "pos"=>99, "acl"=>{"503b1f2f497bfe2cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f2f497bfe2cba000001", "at"=>2012-08-27 09:18:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b1f2f497bfe2cba000004", "at"=>2012-08-27 07:18:07 UTC, "changes"=>{}, "user_id"=>"503b1f2f497bfe2cba000001"}]}] flags=[] (0.1709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f2f497bfe2cba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f2f497bfe2cba000005", "version"=>1, "pos"=>99, "acl"=>{"503b1f2f497bfe2cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f2f497bfe2cba000001", "at"=>2012-08-27 09:18:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b1f2f497bfe2cba000006", "at"=>2012-08-27 07:18:07 UTC, "changes"=>{}, "user_id"=>"503b1f2f497bfe2cba000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1931ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f77497bfe2fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f77497bfe2fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b9b6", "confirmation_key"=>"0e796de23306f35a4914"}] flags=[] (0.1059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f77497bfe2fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f77497bfe2fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7315", "confirmation_key"=>"62308c61e57c76a5215f"}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f77497bfe2fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f77497bfe2fba000003", "version"=>1, "pos"=>99, "acl"=>{"503b1f77497bfe2fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f77497bfe2fba000001", "at"=>2012-08-27 09:19:19 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b1f77497bfe2fba000004", "at"=>2012-08-27 07:19:19 UTC, "changes"=>{}, "user_id"=>"503b1f77497bfe2fba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f77497bfe2fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3338ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f77497bfe2fba000005", "version"=>1, "pos"=>99, "acl"=>{"503b1f77497bfe2fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f77497bfe2fba000001", "at"=>2012-08-27 09:19:19 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b1f77497bfe2fba000006", "at"=>2012-08-27 07:19:19 UTC, "changes"=>{}, "user_id"=>"503b1f77497bfe2fba000001"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b1f77497bfe2fba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1588ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f9c497bfe31ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f9c497bfe31ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0056", "confirmation_key"=>"dce0f4b81fa8cb3c5561"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1f9c497bfe31ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1f9c497bfe31ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c37f", "confirmation_key"=>"c8fc9f64d2779443e905"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f9c497bfe31ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f9c497bfe31ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b1f9c497bfe31ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f9c497bfe31ba000001", "at"=>2012-08-27 09:19:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b1f9c497bfe31ba000004", "at"=>2012-08-27 07:19:56 UTC, "changes"=>{}, "user_id"=>"503b1f9c497bfe31ba000001"}]}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1f9c497bfe31ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1f9c497bfe31ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b1f9c497bfe31ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1f9c497bfe31ba000001", "at"=>2012-08-27 09:19:56 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b1f9c497bfe31ba000006", "at"=>2012-08-27 07:19:56 UTC, "changes"=>{}, "user_id"=>"503b1f9c497bfe31ba000001"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b1f9c497bfe31ba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b1f9c497bfe31ba000001.privileges"=>/r\w*/} flags=[] limit=0 skip=0 fields=nil (0.3748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b1f9c497bfe31ba000001.privileges"=>/r\w*/} flags=[] limit=0 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7141ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1900ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1fbb497bfe34ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1fbb497bfe34ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c33c", "confirmation_key"=>"0b4b3005f0965a39fefe"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b1fbb497bfe34ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b1fbb497bfe34ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"fdc1", "confirmation_key"=>"4efa330963dd63cac458"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1fbb497bfe34ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1fbb497bfe34ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b1fbb497bfe34ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1fbb497bfe34ba000001", "at"=>2012-08-27 09:20:27 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b1fbb497bfe34ba000004", "at"=>2012-08-27 07:20:27 UTC, "changes"=>{}, "user_id"=>"503b1fbb497bfe34ba000001"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b1fbb497bfe34ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b1fbb497bfe34ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b1fbb497bfe34ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b1fbb497bfe34ba000001", "at"=>2012-08-27 09:20:27 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b1fbb497bfe34ba000006", "at"=>2012-08-27 07:20:27 UTC, "changes"=>{}, "user_id"=>"503b1fbb497bfe34ba000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b1fbb497bfe34ba000001.privileges"=>/r\w*/} flags=[] limit=0 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7141ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2588497bfe51ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2588497bfe51ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6993", "confirmation_key"=>"b359907d3b18f6bbd32f"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2588497bfe51ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2588497bfe51ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9b06", "confirmation_key"=>"fbca2096eb8d89add345"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2588497bfe51ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2588497bfe51ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2588497bfe51ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2588497bfe51ba000001", "at"=>2012-08-27 09:45:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2588497bfe51ba000004", "at"=>2012-08-27 07:45:12 UTC, "changes"=>{}, "user_id"=>"503b2588497bfe51ba000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2588497bfe51ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2588497bfe51ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2588497bfe51ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2588497bfe51ba000001", "at"=>2012-08-27 09:45:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2588497bfe51ba000006", "at"=>2012-08-27 07:45:12 UTC, "changes"=>{}, "user_id"=>"503b2588497bfe51ba000001"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2588497bfe51ba000001.privileges"=>/r\w*/} flags=[] limit=0 skip=0 fields=nil (0.5748ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1478ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2595497bfe57ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2595497bfe57ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3457", "confirmation_key"=>"89f74b74bec935062742"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2595497bfe57ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2595497bfe57ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7d37", "confirmation_key"=>"7bd79a5c6a43d7fe52cd"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2595497bfe57ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2595497bfe57ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2595497bfe57ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2595497bfe57ba000001", "at"=>2012-08-27 09:45:25 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2595497bfe57ba000004", "at"=>2012-08-27 07:45:25 UTC, "changes"=>{}, "user_id"=>"503b2595497bfe57ba000001"}]}] flags=[] (0.1569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2595497bfe57ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2595497bfe57ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2595497bfe57ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2595497bfe57ba000001", "at"=>2012-08-27 09:45:25 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2595497bfe57ba000006", "at"=>2012-08-27 07:45:25 UTC, "changes"=>{}, "user_id"=>"503b2595497bfe57ba000001"}]}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7291ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1812ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1502ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b25bd497bfe58ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4213ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b25bd497bfe58ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e593", "confirmation_key"=>"1ffd72b2f921a8a12633"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b25bd497bfe58ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b25bd497bfe58ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5cb3", "confirmation_key"=>"855f26eeac21a90b3665"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b25bd497bfe58ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b25bd497bfe58ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b25bd497bfe58ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b25bd497bfe58ba000001", "at"=>2012-08-27 09:46:05 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b25bd497bfe58ba000004", "at"=>2012-08-27 07:46:05 UTC, "changes"=>{}, "user_id"=>"503b25bd497bfe58ba000001"}]}] flags=[] (0.1612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b25bd497bfe58ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b25bd497bfe58ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b25bd497bfe58ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b25bd497bfe58ba000001", "at"=>2012-08-27 09:46:05 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b25bd497bfe58ba000006", "at"=>2012-08-27 07:46:05 UTC, "changes"=>{}, "user_id"=>"503b25bd497bfe58ba000001"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6599ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b25d3497bfe59ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b25d3497bfe59ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"127f", "confirmation_key"=>"6ec347091b70dee7bed2"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b25d3497bfe59ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b25d3497bfe59ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c64d", "confirmation_key"=>"184b7f36509ca21bbaad"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b25d3497bfe59ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b25d3497bfe59ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b25d3497bfe59ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b25d3497bfe59ba000001", "at"=>2012-08-27 09:46:27 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b25d3497bfe59ba000004", "at"=>2012-08-27 07:46:27 UTC, "changes"=>{}, "user_id"=>"503b25d3497bfe59ba000001"}]}] flags=[] (0.1822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b25d3497bfe59ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b25d3497bfe59ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b25d3497bfe59ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b25d3497bfe59ba000001", "at"=>2012-08-27 09:46:27 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b25d3497bfe59ba000006", "at"=>2012-08-27 07:46:27 UTC, "changes"=>{}, "user_id"=>"503b25d3497bfe59ba000001"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6711ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2618497bfe5aba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2618497bfe5aba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e570", "confirmation_key"=>"551ec09abd3064d09453"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2618497bfe5aba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2618497bfe5aba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a80e", "confirmation_key"=>"f9b46a4ac74bd385c194"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2618497bfe5aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2618497bfe5aba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2618497bfe5aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2618497bfe5aba000001", "at"=>2012-08-27 09:47:36 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2618497bfe5aba000004", "at"=>2012-08-27 07:47:36 UTC, "changes"=>{}, "user_id"=>"503b2618497bfe5aba000001"}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2618497bfe5aba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2618497bfe5aba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2618497bfe5aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2618497bfe5aba000001", "at"=>2012-08-27 09:47:36 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2618497bfe5aba000006", "at"=>2012-08-27 07:47:36 UTC, "changes"=>{}, "user_id"=>"503b2618497bfe5aba000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7210ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1652ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b26f7497bfe5bba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4542ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b26f7497bfe5bba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c57a", "confirmation_key"=>"782360daa71a78d52bbe"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b26f7497bfe5bba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b26f7497bfe5bba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"10d8", "confirmation_key"=>"d1e11a38d3c288b97bcc"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b26f7497bfe5bba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b26f7497bfe5bba000003", "version"=>1, "pos"=>99, "acl"=>{"503b26f7497bfe5bba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b26f7497bfe5bba000001", "at"=>2012-08-27 09:51:19 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b26f7497bfe5bba000004", "at"=>2012-08-27 07:51:19 UTC, "changes"=>{}, "user_id"=>"503b26f7497bfe5bba000001"}]}] flags=[] (0.3190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b26f7497bfe5bba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5229ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b26f7497bfe5bba000005", "version"=>1, "pos"=>99, "acl"=>{"503b26f7497bfe5bba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b26f7497bfe5bba000001", "at"=>2012-08-27 09:51:19 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b26f7497bfe5bba000006", "at"=>2012-08-27 07:51:19 UTC, "changes"=>{}, "user_id"=>"503b26f7497bfe5bba000001"}]}] flags=[] (0.2339ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7422ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1583ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b27a9497bfe5cba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b27a9497bfe5cba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1b02", "confirmation_key"=>"6ab2572d646c0bb243aa"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b27a9497bfe5cba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b27a9497bfe5cba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cad6", "confirmation_key"=>"ac8308ae101909f7d096"}] flags=[] (0.0744ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b27a9497bfe5cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b27a9497bfe5cba000003", "version"=>1, "pos"=>99, "acl"=>{"503b27a9497bfe5cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b27a9497bfe5cba000001", "at"=>2012-08-27 09:54:17 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b27a9497bfe5cba000004", "at"=>2012-08-27 07:54:17 UTC, "changes"=>{}, "user_id"=>"503b27a9497bfe5cba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b27a9497bfe5cba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b27a9497bfe5cba000005", "version"=>1, "pos"=>99, "acl"=>{"503b27a9497bfe5cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b27a9497bfe5cba000001", "at"=>2012-08-27 09:54:17 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b27a9497bfe5cba000006", "at"=>2012-08-27 07:54:17 UTC, "changes"=>{}, "user_id"=>"503b27a9497bfe5cba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b27a9497bfe5cba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.5839ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6602ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1748ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2854497bfe5dba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4141ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2854497bfe5dba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c2e7", "confirmation_key"=>"7faafee9d1d9a2adb5c7"}] flags=[] (0.1063ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2854497bfe5dba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3359ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2854497bfe5dba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"40ff", "confirmation_key"=>"e5a55f22941f65808147"}] flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2854497bfe5dba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3233ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2854497bfe5dba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2854497bfe5dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2854497bfe5dba000001", "at"=>2012-08-27 09:57:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2854497bfe5dba000004", "at"=>2012-08-27 07:57:08 UTC, "changes"=>{}, "user_id"=>"503b2854497bfe5dba000001"}]}] flags=[] (0.1788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2854497bfe5dba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2854497bfe5dba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2854497bfe5dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2854497bfe5dba000001", "at"=>2012-08-27 09:57:08 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2854497bfe5dba000006", "at"=>2012-08-27 07:57:08 UTC, "changes"=>{}, "user_id"=>"503b2854497bfe5dba000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2854497bfe5dba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.5062ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4300ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3691ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2608ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b288d497bfe5fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b288d497bfe5fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3cca", "confirmation_key"=>"91dc39412d0624de6b38"}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b288d497bfe5fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b288d497bfe5fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1e78", "confirmation_key"=>"d9f3b9aa1c30637b0e57"}] flags=[] (0.0823ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b288d497bfe5fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b288d497bfe5fba000003", "version"=>1, "pos"=>99, "acl"=>{"503b288d497bfe5fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b288d497bfe5fba000001", "at"=>2012-08-27 09:58:05 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b288d497bfe5fba000004", "at"=>2012-08-27 07:58:05 UTC, "changes"=>{}, "user_id"=>"503b288d497bfe5fba000001"}]}] flags=[] (0.1721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b288d497bfe5fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b288d497bfe5fba000005", "version"=>1, "pos"=>99, "acl"=>{"503b288d497bfe5fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b288d497bfe5fba000001", "at"=>2012-08-27 09:58:05 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b288d497bfe5fba000006", "at"=>2012-08-27 07:58:05 UTC, "changes"=>{}, "user_id"=>"503b288d497bfe5fba000001"}]}] flags=[] (0.1168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b288d497bfe5fba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.5891ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7200ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b28f8497bfe60ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b28f8497bfe60ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a405", "confirmation_key"=>"6b7304d482748d08a3f9"}] flags=[] (0.1111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b28f8497bfe60ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b28f8497bfe60ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e6cb", "confirmation_key"=>"ccf9d85db0cd594e0e8c"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b28f8497bfe60ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b28f8497bfe60ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b28f8497bfe60ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b28f8497bfe60ba000001", "at"=>2012-08-27 09:59:52 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b28f8497bfe60ba000004", "at"=>2012-08-27 07:59:52 UTC, "changes"=>{}, "user_id"=>"503b28f8497bfe60ba000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b28f8497bfe60ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b28f8497bfe60ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b28f8497bfe60ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b28f8497bfe60ba000001", "at"=>2012-08-27 09:59:52 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b28f8497bfe60ba000006", "at"=>2012-08-27 07:59:52 UTC, "changes"=>{}, "user_id"=>"503b28f8497bfe60ba000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b28f8497bfe60ba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.6559ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7260ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0536ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2928497bfe61ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2928497bfe61ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"51e2", "confirmation_key"=>"576e07c3a3302d704b5b"}] flags=[] (0.1023ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2928497bfe61ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2928497bfe61ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"77b7", "confirmation_key"=>"3a992c5fa7305e222474"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2928497bfe61ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4289ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2928497bfe61ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2928497bfe61ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2928497bfe61ba000001", "at"=>2012-08-27 10:00:40 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2928497bfe61ba000004", "at"=>2012-08-27 08:00:40 UTC, "changes"=>{}, "user_id"=>"503b2928497bfe61ba000001"}]}] flags=[] (0.1779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2928497bfe61ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2928497bfe61ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2928497bfe61ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2928497bfe61ba000001", "at"=>2012-08-27 10:00:40 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2928497bfe61ba000006", "at"=>2012-08-27 08:00:40 UTC, "changes"=>{}, "user_id"=>"503b2928497bfe61ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2928497bfe61ba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8571ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2148ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29ab497bfe63ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29ab497bfe63ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4a03", "confirmation_key"=>"60b07f53bfc4c09373dc"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29ab497bfe63ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29ab497bfe63ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f69e", "confirmation_key"=>"7245c350ad640c85d15a"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29ab497bfe63ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4158ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29ab497bfe63ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b29ab497bfe63ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29ab497bfe63ba000001", "at"=>2012-08-27 10:02:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b29ab497bfe63ba000004", "at"=>2012-08-27 08:02:51 UTC, "changes"=>{}, "user_id"=>"503b29ab497bfe63ba000001"}]}] flags=[] (0.1643ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29ab497bfe63ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29ab497bfe63ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b29ab497bfe63ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29ab497bfe63ba000001", "at"=>2012-08-27 10:02:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b29ab497bfe63ba000006", "at"=>2012-08-27 08:02:51 UTC, "changes"=>{}, "user_id"=>"503b29ab497bfe63ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0868ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29b5497bfe64ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29b5497bfe64ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d23c", "confirmation_key"=>"8bde2accca1e6a2fa0d0"}] flags=[] (0.0942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29b5497bfe64ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29b5497bfe64ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2197", "confirmation_key"=>"66bcb9fe662d98d515f2"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29b5497bfe64ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29b5497bfe64ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b29b5497bfe64ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29b5497bfe64ba000001", "at"=>2012-08-27 10:03:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b29b5497bfe64ba000004", "at"=>2012-08-27 08:03:01 UTC, "changes"=>{}, "user_id"=>"503b29b5497bfe64ba000001"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29b5497bfe64ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29b5497bfe64ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b29b5497bfe64ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29b5497bfe64ba000001", "at"=>2012-08-27 10:03:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b29b5497bfe64ba000006", "at"=>2012-08-27 08:03:01 UTC, "changes"=>{}, "user_id"=>"503b29b5497bfe64ba000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6640ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29c0497bfe65ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29c0497bfe65ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7657", "confirmation_key"=>"201384692f581ee89a99"}] flags=[] (0.0997ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29c0497bfe65ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29c0497bfe65ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"70fd", "confirmation_key"=>"dd499cc99a085d1d8137"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29c0497bfe65ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29c0497bfe65ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b29c0497bfe65ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29c0497bfe65ba000001", "at"=>2012-08-27 10:03:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b29c0497bfe65ba000004", "at"=>2012-08-27 08:03:12 UTC, "changes"=>{}, "user_id"=>"503b29c0497bfe65ba000001"}]}] flags=[] (0.1860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29c0497bfe65ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29c0497bfe65ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b29c0497bfe65ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29c0497bfe65ba000001", "at"=>2012-08-27 10:03:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b29c0497bfe65ba000006", "at"=>2012-08-27 08:03:12 UTC, "changes"=>{}, "user_id"=>"503b29c0497bfe65ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b29c0497bfe65ba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.5753ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6769ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1771ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29dc497bfe66ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29dc497bfe66ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6799", "confirmation_key"=>"dec855929635f7b9acae"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29dc497bfe66ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3871ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29dc497bfe66ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"96cb", "confirmation_key"=>"bfdc40f47449d6dcfed1"}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29dc497bfe66ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29dc497bfe66ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b29dc497bfe66ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29dc497bfe66ba000001", "at"=>2012-08-27 10:03:40 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b29dc497bfe66ba000004", "at"=>2012-08-27 08:03:40 UTC, "changes"=>{}, "user_id"=>"503b29dc497bfe66ba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29dc497bfe66ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29dc497bfe66ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b29dc497bfe66ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29dc497bfe66ba000001", "at"=>2012-08-27 10:03:40 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b29dc497bfe66ba000006", "at"=>2012-08-27 08:03:40 UTC, "changes"=>{}, "user_id"=>"503b29dc497bfe66ba000001"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b29dc497bfe66ba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.6378ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7179ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1938ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29fe497bfe67ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29fe497bfe67ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1e59", "confirmation_key"=>"605bc8516b1a37f19a74"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b29fe497bfe67ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b29fe497bfe67ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"bbbd", "confirmation_key"=>"8015c314e671a6306db4"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29fe497bfe67ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29fe497bfe67ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b29fe497bfe67ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29fe497bfe67ba000001", "at"=>2012-08-27 10:04:14 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b29fe497bfe67ba000004", "at"=>2012-08-27 08:04:14 UTC, "changes"=>{}, "user_id"=>"503b29fe497bfe67ba000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b29fe497bfe67ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3319ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b29fe497bfe67ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b29fe497bfe67ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b29fe497bfe67ba000001", "at"=>2012-08-27 10:04:14 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b29fe497bfe67ba000006", "at"=>2012-08-27 08:04:14 UTC, "changes"=>{}, "user_id"=>"503b29fe497bfe67ba000001"}]}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b29fe497bfe67ba000001.privileges"=>/r\w*/, "label_ids"=>nil} flags=[] limit=0 skip=0 fields=nil (0.7288ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6928ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a34497bfe68ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4113ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a34497bfe68ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"589f", "confirmation_key"=>"5e0ac128dc891c1f299e"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a34497bfe68ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a34497bfe68ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4482", "confirmation_key"=>"938ed28dab1f1cfe06f0"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a34497bfe68ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a34497bfe68ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2a34497bfe68ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a34497bfe68ba000001", "at"=>2012-08-27 10:05:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2a34497bfe68ba000004", "at"=>2012-08-27 08:05:08 UTC, "changes"=>{}, "user_id"=>"503b2a34497bfe68ba000001"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a34497bfe68ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (67.6160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a34497bfe68ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2a34497bfe68ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a34497bfe68ba000001", "at"=>2012-08-27 10:05:08 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2a34497bfe68ba000006", "at"=>2012-08-27 08:05:08 UTC, "changes"=>{}, "user_id"=>"503b2a34497bfe68ba000001"}]}] flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2a34497bfe68ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2a34497bfe68ba000003"} flags=[] limit=0 skip=0 fields=nil (0.9892ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7398ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1962ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a4f497bfe69ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a4f497bfe69ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4290", "confirmation_key"=>"7aff5046465773b95661"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a4f497bfe69ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a4f497bfe69ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d843", "confirmation_key"=>"47b613cedec43e69ac6d"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a4f497bfe69ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a4f497bfe69ba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2a4f497bfe69ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a4f497bfe69ba000001", "at"=>2012-08-27 10:05:35 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2a4f497bfe69ba000004", "at"=>2012-08-27 08:05:35 UTC, "changes"=>{}, "user_id"=>"503b2a4f497bfe69ba000001"}]}] flags=[] (0.1588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a4f497bfe69ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a4f497bfe69ba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2a4f497bfe69ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a4f497bfe69ba000001", "at"=>2012-08-27 10:05:35 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2a4f497bfe69ba000006", "at"=>2012-08-27 08:05:35 UTC, "changes"=>{}, "user_id"=>"503b2a4f497bfe69ba000001"}]}] flags=[] (0.1190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2a4f497bfe69ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2a4f497bfe69ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7792ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1647ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a72497bfe6aba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a72497bfe6aba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4d50", "confirmation_key"=>"1dcd443aa53d1f27b8e2"}] flags=[] (0.1101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a72497bfe6aba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a72497bfe6aba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ebeb", "confirmation_key"=>"bea2a95b37c1cba04a8d"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a72497bfe6aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4833ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a72497bfe6aba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2a72497bfe6aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a72497bfe6aba000001", "at"=>2012-08-27 10:06:10 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2a72497bfe6aba000004", "at"=>2012-08-27 08:06:10 UTC, "changes"=>{}, "user_id"=>"503b2a72497bfe6aba000001"}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a72497bfe6aba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a72497bfe6aba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2a72497bfe6aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a72497bfe6aba000001", "at"=>2012-08-27 10:06:10 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2a72497bfe6aba000006", "at"=>2012-08-27 08:06:10 UTC, "changes"=>{}, "user_id"=>"503b2a72497bfe6aba000001"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7138ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1898ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a7e497bfe6bba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a7e497bfe6bba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1836", "confirmation_key"=>"ab4ad24c670616d00734"}] flags=[] (0.1132ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2a7e497bfe6bba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2a7e497bfe6bba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ee4e", "confirmation_key"=>"051c45f8e6c54fbd6ff5"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a7e497bfe6bba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5071ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a7e497bfe6bba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2a7e497bfe6bba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a7e497bfe6bba000001", "at"=>2012-08-27 10:06:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2a7e497bfe6bba000004", "at"=>2012-08-27 08:06:22 UTC, "changes"=>{}, "user_id"=>"503b2a7e497bfe6bba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2a7e497bfe6bba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2a7e497bfe6bba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2a7e497bfe6bba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2a7e497bfe6bba000001", "at"=>2012-08-27 10:06:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2a7e497bfe6bba000006", "at"=>2012-08-27 08:06:22 UTC, "changes"=>{}, "user_id"=>"503b2a7e497bfe6bba000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2a7e497bfe6bba000001.privileges"=>/r\w*/, "label_ids"=>"503b2a7e497bfe6bba000003"} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7250ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2aac497bfe6dba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4652ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2aac497bfe6dba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9489", "confirmation_key"=>"40f4656b19368f54022d"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2aac497bfe6dba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2aac497bfe6dba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ff46", "confirmation_key"=>"640256b73f4c06841051"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2aac497bfe6dba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2aac497bfe6dba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2aac497bfe6dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2aac497bfe6dba000001", "at"=>2012-08-27 10:07:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2aac497bfe6dba000004", "at"=>2012-08-27 08:07:08 UTC, "changes"=>{}, "user_id"=>"503b2aac497bfe6dba000001"}]}] flags=[] (0.1578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2aac497bfe6dba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2aac497bfe6dba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2aac497bfe6dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2aac497bfe6dba000001", "at"=>2012-08-27 10:07:08 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2aac497bfe6dba000006", "at"=>2012-08-27 08:07:08 UTC, "changes"=>{}, "user_id"=>"503b2aac497bfe6dba000001"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2aac497bfe6dba000001.privileges"=>/r\w*/, "label_ids"=>"503b2aac497bfe6dba000003"} flags=[] limit=0 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7188ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1881ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ad1497bfe6eba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ad1497bfe6eba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"fd3b", "confirmation_key"=>"7b1a0aaa46daacaa43fa"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ad1497bfe6eba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ad1497bfe6eba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d51c", "confirmation_key"=>"12d3e1a7c68f6ab980f4"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ad1497bfe6eba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ad1497bfe6eba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2ad1497bfe6eba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ad1497bfe6eba000001", "at"=>2012-08-27 10:07:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2ad1497bfe6eba000004", "at"=>2012-08-27 08:07:45 UTC, "changes"=>{}, "user_id"=>"503b2ad1497bfe6eba000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ad1497bfe6eba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ad1497bfe6eba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2ad1497bfe6eba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ad1497bfe6eba000001", "at"=>2012-08-27 10:07:45 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2ad1497bfe6eba000006", "at"=>2012-08-27 08:07:45 UTC, "changes"=>{}, "user_id"=>"503b2ad1497bfe6eba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2ad1497bfe6eba000001.privileges"=>/r\w*/, "label_ids"=>"503b2ad1497bfe6eba000003"} flags=[] limit=0 skip=0 fields=nil (0.3707ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9069ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2120ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4961ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ae1497bfe6fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ae1497bfe6fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"429b", "confirmation_key"=>"524925c1387aa47d1d93"}] flags=[] (0.1092ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ae1497bfe6fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ae1497bfe6fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"bb5b", "confirmation_key"=>"094e56acdc2e56ba7471"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ae1497bfe6fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5102ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ae1497bfe6fba000003", "version"=>1, "pos"=>99, "acl"=>{"503b2ae1497bfe6fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ae1497bfe6fba000001", "at"=>2012-08-27 10:08:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2ae1497bfe6fba000004", "at"=>2012-08-27 08:08:01 UTC, "changes"=>{}, "user_id"=>"503b2ae1497bfe6fba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ae1497bfe6fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ae1497bfe6fba000005", "version"=>1, "pos"=>99, "acl"=>{"503b2ae1497bfe6fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ae1497bfe6fba000001", "at"=>2012-08-27 10:08:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2ae1497bfe6fba000006", "at"=>2012-08-27 08:08:01 UTC, "changes"=>{}, "user_id"=>"503b2ae1497bfe6fba000001"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2ae1497bfe6fba000001.privileges"=>/r\w*/, "label_ids"=>"503b2ae1497bfe6fba000003"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6719ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1731ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2b04497bfe70ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2b04497bfe70ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b350", "confirmation_key"=>"0fb112dca6609df4477e"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2b04497bfe70ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3977ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2b04497bfe70ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"79f0", "confirmation_key"=>"47110f76c724d1e365af"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2b04497bfe70ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2b04497bfe70ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2b04497bfe70ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2b04497bfe70ba000001", "at"=>2012-08-27 10:08:36 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2b04497bfe70ba000004", "at"=>2012-08-27 08:08:36 UTC, "changes"=>{}, "user_id"=>"503b2b04497bfe70ba000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2b04497bfe70ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2b04497bfe70ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2b04497bfe70ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2b04497bfe70ba000001", "at"=>2012-08-27 10:08:36 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2b04497bfe70ba000006", "at"=>2012-08-27 08:08:36 UTC, "changes"=>{}, "user_id"=>"503b2b04497bfe70ba000001"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2b04497bfe70ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2b04497bfe70ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1709ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2b26497bfe71ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2b26497bfe71ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"69b5", "confirmation_key"=>"756d5f8566a4d6f436c9"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2b26497bfe71ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2b26497bfe71ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2736", "confirmation_key"=>"2096ad50539478f7b80b"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2b26497bfe71ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2b26497bfe71ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2b26497bfe71ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2b26497bfe71ba000001", "at"=>2012-08-27 10:09:10 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2b26497bfe71ba000004", "at"=>2012-08-27 08:09:10 UTC, "changes"=>{}, "user_id"=>"503b2b26497bfe71ba000001"}]}] flags=[] (0.1800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2b26497bfe71ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2b26497bfe71ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2b26497bfe71ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2b26497bfe71ba000001", "at"=>2012-08-27 10:09:10 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2b26497bfe71ba000006", "at"=>2012-08-27 08:09:10 UTC, "changes"=>{}, "user_id"=>"503b2b26497bfe71ba000001"}]}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2b26497bfe71ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2b26497bfe71ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2b26497bfe71ba000005"} update={"$push"=>{:label_ids=>"503b2b26497bfe71ba000003"}} flags=[:multi] (0.0892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2b26497bfe71ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2b26497bfe71ba000003"} flags=[] limit=0 skip=0 fields=nil (52.5041ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6878ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4179ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ba8497bfe78ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4609ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ba8497bfe78ba000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7182", "confirmation_key"=>"95c47e1796e9c862ec7d"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2ba8497bfe78ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2ba8497bfe78ba000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"1e9c", "confirmation_key"=>"03335b1c761f050433f6"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ba9497bfe78ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ba9497bfe78ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5279ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ba9497bfe78ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2ba8497bfe78ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ba8497bfe78ba000001", "at"=>2012-08-27 10:11:21 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2ba9497bfe78ba000006", "at"=>2012-08-27 08:11:21 UTC, "changes"=>{}, "user_id"=>"503b2ba8497bfe78ba000001"}]}] flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2ba9497bfe78ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2ba9497bfe78ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2ba8497bfe78ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2ba8497bfe78ba000001", "at"=>2012-08-27 10:11:21 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2ba9497bfe78ba000008", "at"=>2012-08-27 08:11:21 UTC, "changes"=>{}, "user_id"=>"503b2ba8497bfe78ba000001"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2ba8497bfe78ba000001.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2ba8497bfe78ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6671ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1729ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2098ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2bf0497bfe79ba000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"b068", "confirmation_key"=>"d04ea70f828f9c315d9d"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3958ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2bf0497bfe79ba000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"7d82", "confirmation_key"=>"256332d22666af593409"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5271ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2bf0497bfe79ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2bf0497bfe79ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2bf0497bfe79ba000001", "at"=>2012-08-27 10:12:32 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2bf0497bfe79ba000004", "at"=>2012-08-27 08:12:32 UTC, "changes"=>{}, "user_id"=>"503b2bf0497bfe79ba000001"}]}] flags=[] (0.2811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2bf0497bfe79ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2bf0497bfe79ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2bf0497bfe79ba000001", "at"=>2012-08-27 10:12:32 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2bf0497bfe79ba000008", "at"=>2012-08-27 08:12:32 UTC, "changes"=>{}, "user_id"=>"503b2bf0497bfe79ba000001"}]}] flags=[] (0.3161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2bf0497bfe79ba000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (57.4820ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2bf0497bfe79ba000009", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2bf0497bfe79ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2bf0497bfe79ba000001", "at"=>2012-08-27 10:12:32 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2bf0497bfe79ba00000a", "at"=>2012-08-27 08:12:32 UTC, "changes"=>{}, "user_id"=>"503b2bf0497bfe79ba000001"}]}] flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2bf0497bfe79ba000001.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2bf0497bfe79ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2bf0497bfe79ba000003"} flags=[] limit=-1 skip=0 fields=nil (0.3271ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6599ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1762ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2c69497bfe7aba000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2833", "confirmation_key"=>"44531ccf9ce6c6ca480e"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2c69497bfe7aba000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"8cd3", "confirmation_key"=>"eeb2773efc9fca48b57d"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2c69497bfe7aba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2c69497bfe7aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2c69497bfe7aba000001", "at"=>2012-08-27 10:14:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2c69497bfe7aba000004", "at"=>2012-08-27 08:14:33 UTC, "changes"=>{}, "user_id"=>"503b2c69497bfe7aba000001"}]}] flags=[] (0.1819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2c69497bfe7aba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2c69497bfe7aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2c69497bfe7aba000001", "at"=>2012-08-27 10:14:33 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2c69497bfe7aba000008", "at"=>2012-08-27 08:14:33 UTC, "changes"=>{}, "user_id"=>"503b2c69497bfe7aba000001"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2c69497bfe7aba000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2c69497bfe7aba000009", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2c69497bfe7aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2c69497bfe7aba000001", "at"=>2012-08-27 10:14:33 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2c69497bfe7aba00000a", "at"=>2012-08-27 08:14:33 UTC, "changes"=>{}, "user_id"=>"503b2c69497bfe7aba000001"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2c69497bfe7aba000001.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2c69497bfe7aba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2c69497bfe7aba000003"} flags=[] limit=-1 skip=0 fields=nil (0.4718ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2c69497bfe7aba000001.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1962ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1507ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cc0497bfe7cba000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"ace1", "confirmation_key"=>"4f7fc8d7b07883ac7a62"}] flags=[] (0.1037ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cc0497bfe7cba000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"13bf", "confirmation_key"=>"1b3efc588cdc13e18998"}] flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cc0497bfe7cba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cc0497bfe7cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cc0497bfe7cba000001", "at"=>2012-08-27 10:16:00 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cc0497bfe7cba000004", "at"=>2012-08-27 08:16:00 UTC, "changes"=>{}, "user_id"=>"503b2cc0497bfe7cba000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3498ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cc0497bfe7cba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cc0497bfe7cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cc0497bfe7cba000001", "at"=>2012-08-27 10:16:00 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2cc0497bfe7cba000008", "at"=>2012-08-27 08:16:00 UTC, "changes"=>{}, "user_id"=>"503b2cc0497bfe7cba000001"}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cc0497bfe7cba000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cc0497bfe7cba000009", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cc0497bfe7cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cc0497bfe7cba000001", "at"=>2012-08-27 10:16:00 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2cc0497bfe7cba00000a", "at"=>2012-08-27 08:16:00 UTC, "changes"=>{}, "user_id"=>"503b2cc0497bfe7cba000001"}]}] flags=[] (0.1378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cc0497bfe7cba000001.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cc0497bfe7cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7329ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cc0497bfe7cba000001.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2cc0497bfe7cba000003"} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7102ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0436ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cca497bfe7dba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cca497bfe7dba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2cdb", "confirmation_key"=>"fff2401901ae19984c71"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cca497bfe7dba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cca497bfe7dba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"09e0", "confirmation_key"=>"e93d713cbeeb4ffe6033"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cca497bfe7dba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cca497bfe7dba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cca497bfe7dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cca497bfe7dba000001", "at"=>2012-08-27 10:16:10 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cca497bfe7dba000004", "at"=>2012-08-27 08:16:10 UTC, "changes"=>{}, "user_id"=>"503b2cca497bfe7dba000001"}]}] flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cca497bfe7dba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cca497bfe7dba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cca497bfe7dba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cca497bfe7dba000001", "at"=>2012-08-27 10:16:10 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2cca497bfe7dba000006", "at"=>2012-08-27 08:16:10 UTC, "changes"=>{}, "user_id"=>"503b2cca497bfe7dba000001"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cca497bfe7dba000001.privileges"=>/r\w*/, "label_ids"=>"503b2cca497bfe7dba000003"} flags=[] limit=0 skip=0 fields=nil (0.4737ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2cca497bfe7dba000005"} update={"$push"=>{:label_ids=>"503b2cca497bfe7dba000003"}} flags=[:multi] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cca497bfe7dba000001.privileges"=>/r\w*/, "label_ids"=>"503b2cca497bfe7dba000003"} flags=[] limit=0 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.8282ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1972ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1538ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a39c", "confirmation_key"=>"18f52f3af0a2ba502fb3"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3321ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cdb4", "confirmation_key"=>"8ad2aa2a1af8256d9c7a"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3822ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000001", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba000004", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba000001"}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5579ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b2cd2497bfe7eba000003"} update={"$set"=>{"acl"=>{"503b2cd2497bfe7eba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000001", "at"=>2012-08-27 10:16:18 +0200}, "503b2cd2497bfe7eba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000001", "at"=>2012-08-27 10:16:18 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000001", "at"=>2012-08-27 08:16:18 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba000007", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba000001"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2cd2497bfe7eba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2cd2497bfe7eba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6471ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3698ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1762ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3371ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"60fc", "confirmation_key"=>"4effdb6a3aaec5843a86"}] flags=[] (0.1628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba00000b", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3b29", "confirmation_key"=>"19b0d3e21ae793b6a96f"}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba00000a", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba00000d", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba00000a"}]}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba00000a", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba00000f", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba00000a"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cd2497bfe7eba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2cd2497bfe7eba00000c"} flags=[] limit=0 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2cd2497bfe7eba00000e"} update={"$push"=>{:label_ids=>"503b2cd2497bfe7eba00000c"}} flags=[:multi] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cd2497bfe7eba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2cd2497bfe7eba00000c"} flags=[] limit=0 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2308ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1578ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba000010", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"fb91", "confirmation_key"=>"d38f72b1d82cba8f729b"}] flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2937ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba000011", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"ccbf", "confirmation_key"=>"d5c087cf8b96fb577d0a"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba000012", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000010", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba000013", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba000010"}]}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4733ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000010", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba000017", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba000010"}]}] flags=[] (0.1643ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5038ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cd2497bfe7eba000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cd2497bfe7eba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cd2497bfe7eba000010", "at"=>2012-08-27 10:16:18 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2cd2497bfe7eba000019", "at"=>2012-08-27 08:16:18 UTC, "changes"=>{}, "user_id"=>"503b2cd2497bfe7eba000010"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000010.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000011.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4802ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cd2497bfe7eba000010.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2cd2497bfe7eba000012"} flags=[] limit=-1 skip=0 fields=nil (0.3753ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba00001a", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"601f", "confirmation_key"=>"e5a9a84570420d00dbd8"}] flags=[] (0.0789ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4418ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba00001b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"acf3", "confirmation_key"=>"e080e9b4a38108a7ceb1"}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cd2497bfe7eba00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cd2497bfe7eba00001d", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"cda4", "confirmation_key"=>"8a33e342f53f7a96dc6c"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3321ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b2cd2497bfe7eba00001e", "user_ids"=>["503b2cd2497bfe7eba00001d"], "name"=>"g1"}] flags=[] (0.1109ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b2cd2497bfe7eba00001d"]}}]} update={"$addToSet"=>{"group_ids"=>"503b2cd2497bfe7eba00001e"}} flags=[:multi] (0.0851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b2cd2497bfe7eba00001e"]}}]}} (0.3541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.2819ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2010ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2dfe", "confirmation_key"=>"1a4c1d9a80c6ef5c38b4"}] flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1fd0", "confirmation_key"=>"0694cfc2f31ce3922ccd"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3941ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000001", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba000004", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba000001"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5848ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b2cfa497bfe7fba000003"} update={"$set"=>{"acl"=>{"503b2cfa497bfe7fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000001", "at"=>2012-08-27 10:16:58 +0200}, "503b2cfa497bfe7fba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000001", "at"=>2012-08-27 10:16:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000001", "at"=>2012-08-27 08:16:58 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba000007", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba000001"}]}]}} flags=[] (0.2439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2cfa497bfe7fba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5298ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2cfa497bfe7fba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2549ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"71b4", "confirmation_key"=>"89c1ec527621133abc23"}] flags=[] (0.1438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3541ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba00000b", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"df35", "confirmation_key"=>"f2afe2844acbd49a07ce"}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba00000a", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba00000d", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba00000a"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2892ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba00000a", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba00000f", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba00000a"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cfa497bfe7fba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2cfa497bfe7fba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2cfa497bfe7fba00000e"} update={"$push"=>{:label_ids=>"503b2cfa497bfe7fba00000c"}} flags=[:multi] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cfa497bfe7fba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2cfa497bfe7fba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2cfa497bfe7fba00000e"} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[nil]}}} (0.5980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4301ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4909ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba000010", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"433f", "confirmation_key"=>"0401a3bd44dfd47ae922"}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba000011", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"6205", "confirmation_key"=>"1eb4a6da40f9c1a8dae9"}] flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba000012", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000010", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba000013", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba000010"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000010", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba000017", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba000010"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2cfa497bfe7fba000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2cfa497bfe7fba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2cfa497bfe7fba000010", "at"=>2012-08-27 10:16:58 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2cfa497bfe7fba000019", "at"=>2012-08-27 08:16:58 UTC, "changes"=>{}, "user_id"=>"503b2cfa497bfe7fba000010"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000010.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000011.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2cfa497bfe7fba000010.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2cfa497bfe7fba000012"} flags=[] limit=-1 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba00001a", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6edc", "confirmation_key"=>"e9adb9f35ef31445b7d2"}] flags=[] (0.0839ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba00001b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"bb78", "confirmation_key"=>"3da99204da64452464b7"}] flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2cfa497bfe7fba00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2cfa497bfe7fba00001d", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"3a76", "confirmation_key"=>"1e0c04fd9f0323d4c3bf"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b2cfa497bfe7fba00001e", "user_ids"=>["503b2cfa497bfe7fba00001d"], "name"=>"g1"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b2cfa497bfe7fba00001d"]}}]} update={"$addToSet"=>{"group_ids"=>"503b2cfa497bfe7fba00001e"}} flags=[:multi] (0.0861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b2cfa497bfe7fba00001e"]}}]}} (0.3471ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6711ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3641ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2d4a497bfe80ba000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"cb18", "confirmation_key"=>"532d0912e8375a311fec"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3319ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2d4a497bfe80ba000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"2b77", "confirmation_key"=>"196109de22eb87a0a0fb"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3569ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2d4a497bfe80ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2d4a497bfe80ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2d4a497bfe80ba000001", "at"=>2012-08-27 10:18:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2d4a497bfe80ba000004", "at"=>2012-08-27 08:18:18 UTC, "changes"=>{}, "user_id"=>"503b2d4a497bfe80ba000001"}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2d4a497bfe80ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2d4a497bfe80ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2d4a497bfe80ba000001", "at"=>2012-08-27 10:18:18 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2d4a497bfe80ba000008", "at"=>2012-08-27 08:18:18 UTC, "changes"=>{}, "user_id"=>"503b2d4a497bfe80ba000001"}]}] flags=[] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2d4a497bfe80ba000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3347ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2d4a497bfe80ba000009", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2d4a497bfe80ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2d4a497bfe80ba000001", "at"=>2012-08-27 10:18:18 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2d4a497bfe80ba00000a", "at"=>2012-08-27 08:18:18 UTC, "changes"=>{}, "user_id"=>"503b2d4a497bfe80ba000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2d4a497bfe80ba000001.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2d4a497bfe80ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6924ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2d4a497bfe80ba000001.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1941ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2d4a497bfe80ba000003"} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.2552ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2110ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1681ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9b01", "confirmation_key"=>"79df56b642fe87eeeb9f"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a80b", "confirmation_key"=>"99a45168ab483f1bd514"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4351ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000001", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba000004", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba000001"}]}] flags=[] (0.1657ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5457ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b2da4497bfe81ba000003"} update={"$set"=>{"acl"=>{"503b2da4497bfe81ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000001", "at"=>2012-08-27 10:19:48 +0200}, "503b2da4497bfe81ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000001", "at"=>2012-08-27 10:19:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000001", "at"=>2012-08-27 08:19:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba000007", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba000001"}]}]}} flags=[] (0.2532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (69.1760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0738ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2da4497bfe81ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7250ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2da4497bfe81ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7982ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3221ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1831ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"220b", "confirmation_key"=>"11976d51496e12f34b73"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3777ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba00000b", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2ca1", "confirmation_key"=>"f15fc4ba223acdaf9ed7"}] flags=[] (0.0677ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3636ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba00000a", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba00000d", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba00000a"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba00000a", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba00000f", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba00000a"}]}] flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2da4497bfe81ba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2da4497bfe81ba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2da4497bfe81ba00000e"} update={"$push"=>{:label_ids=>"503b2da4497bfe81ba00000c"}} flags=[:multi] (0.0789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2da4497bfe81ba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2da4497bfe81ba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2da4497bfe81ba00000e"} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2da4497bfe81ba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[nil]}} flags=[] limit=0 skip=0 fields=nil (0.4861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2151ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1640ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba000010", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6899", "confirmation_key"=>"b09af6461694129eabb2"}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba000011", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"e80e", "confirmation_key"=>"0ed9b18ec49d594d1c5b"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4072ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba000012", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000010", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba000013", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba000010"}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000010", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba000017", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba000010"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2da4497bfe81ba000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2da4497bfe81ba000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2da4497bfe81ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2da4497bfe81ba000010", "at"=>2012-08-27 10:19:48 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2da4497bfe81ba000019", "at"=>2012-08-27 08:19:48 UTC, "changes"=>{}, "user_id"=>"503b2da4497bfe81ba000010"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000010.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2da4497bfe81ba000011.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2da4497bfe81ba000010.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2da4497bfe81ba000012"} flags=[] limit=-1 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba00001a", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3f1d", "confirmation_key"=>"0da9874be843d6b6746c"}] flags=[] (0.0861ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba00001b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8e4c", "confirmation_key"=>"c0c85049765fe8143517"}] flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2da4497bfe81ba00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3932ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2da4497bfe81ba00001d", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"bfaf", "confirmation_key"=>"6d6f6f4af1010d4b1519"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3381ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b2da4497bfe81ba00001e", "user_ids"=>["503b2da4497bfe81ba00001d"], "name"=>"g1"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b2da4497bfe81ba00001d"]}}]} update={"$addToSet"=>{"group_ids"=>"503b2da4497bfe81ba00001e"}} flags=[:multi] (0.0842ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b2da4497bfe81ba00001e"]}}]}} (0.3462ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2dbb497bfe82ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4747ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2dbb497bfe82ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ca59", "confirmation_key"=>"1d01ba80cf198c0a6d78"}] flags=[] (0.1020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2dbb497bfe82ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2dbb497bfe82ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"30a5", "confirmation_key"=>"d1a9685b2fe78962659f"}] flags=[] (0.0703ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2dbb497bfe82ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2dbb497bfe82ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2dbb497bfe82ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2dbb497bfe82ba000001", "at"=>2012-08-27 10:20:11 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2dbb497bfe82ba000004", "at"=>2012-08-27 08:20:11 UTC, "changes"=>{}, "user_id"=>"503b2dbb497bfe82ba000001"}]}] flags=[] (0.1643ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2dbb497bfe82ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3958ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2dbb497bfe82ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2dbb497bfe82ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2dbb497bfe82ba000001", "at"=>2012-08-27 10:20:11 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2dbb497bfe82ba000006", "at"=>2012-08-27 08:20:11 UTC, "changes"=>{}, "user_id"=>"503b2dbb497bfe82ba000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2dbb497bfe82ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2dbb497bfe82ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2dbb497bfe82ba000005"} update={"$push"=>{:label_ids=>"503b2dbb497bfe82ba000003"}} flags=[:multi] (0.0772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2dbb497bfe82ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2dbb497bfe82ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2dbb497bfe82ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2dbb497bfe82ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[nil]}} flags=[] limit=0 skip=0 fields=nil (0.5348ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1831ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e02497bfe84ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e02497bfe84ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b2cf", "confirmation_key"=>"5b6a2feb7b3fa1ac252b"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e02497bfe84ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e02497bfe84ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"0b03", "confirmation_key"=>"f0d0eac1dea1037c8ed0"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e02497bfe84ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e02497bfe84ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e02497bfe84ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e02497bfe84ba000001", "at"=>2012-08-27 10:21:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e02497bfe84ba000004", "at"=>2012-08-27 08:21:22 UTC, "changes"=>{}, "user_id"=>"503b2e02497bfe84ba000001"}]}] flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e02497bfe84ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e02497bfe84ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e02497bfe84ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e02497bfe84ba000001", "at"=>2012-08-27 10:21:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2e02497bfe84ba000006", "at"=>2012-08-27 08:21:22 UTC, "changes"=>{}, "user_id"=>"503b2e02497bfe84ba000001"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e02497bfe84ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e02497bfe84ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2e02497bfe84ba000005"} update={"$push"=>{:label_ids=>"503b2e02497bfe84ba000003"}} flags=[:multi] (0.0787ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e02497bfe84ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e02497bfe84ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2e02497bfe84ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e02497bfe84ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e02497bfe84ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e02497bfe84ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e02497bfe84ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7372ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1981ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1562ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f45e", "confirmation_key"=>"bbafc620e77c31244a86"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"04d2", "confirmation_key"=>"ea32ccfecb0f8afd5478"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000001", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba000004", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b2e27497bfe85ba000003"} update={"$set"=>{"acl"=>{"503b2e27497bfe85ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000001", "at"=>2012-08-27 10:21:59 +0200}, "503b2e27497bfe85ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000001", "at"=>2012-08-27 10:21:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000001", "at"=>2012-08-27 08:21:59 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba000007", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba000001"}]}]}} flags=[] (0.2482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2e27497bfe85ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5710ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b2e27497bfe85ba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8259ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3190ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2670ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"aebd", "confirmation_key"=>"a4d8c3b81fe43205035b"}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4501ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba00000b", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4d8d", "confirmation_key"=>"c8021a08687064e69689"}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba00000a", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba00000d", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba00000a"}]}] flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba00000a", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba00000f", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba00000a"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e27497bfe85ba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2e27497bfe85ba00000c"} flags=[] limit=0 skip=0 fields=nil (0.5021ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2e27497bfe85ba00000e"} update={"$push"=>{:label_ids=>"503b2e27497bfe85ba00000c"}} flags=[:multi] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e27497bfe85ba00000a.privileges"=>/r\w*/, "label_ids"=>"503b2e27497bfe85ba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2e27497bfe85ba00000e"} flags=[] limit=-1 skip=0 fields=nil (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e27497bfe85ba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e27497bfe85ba00000c"]}} flags=[] limit=0 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e27497bfe85ba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e27497bfe85ba00000c"]}} flags=[] limit=0 skip=0 fields=nil (0.3958ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1829ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3412ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba000010", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"fc79", "confirmation_key"=>"97aafc50fc0f42440f25"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2811ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba000011", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"1da4", "confirmation_key"=>"e4be8a573261070c628c"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2818ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba000012", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000010", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba000013", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba000010"}]}] flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3672ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000010", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba000017", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba000010"}]}] flags=[] (0.1462ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e27497bfe85ba000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e27497bfe85ba000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e27497bfe85ba000010"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e27497bfe85ba000010", "at"=>2012-08-27 10:21:59 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b2e27497bfe85ba000019", "at"=>2012-08-27 08:21:59 UTC, "changes"=>{}, "user_id"=>"503b2e27497bfe85ba000010"}]}] flags=[] (0.1891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000010.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b2e27497bfe85ba000011.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e27497bfe85ba000010.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2e27497bfe85ba000012"} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5043ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba00001a", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"aab2", "confirmation_key"=>"07c2f7f8f934e98fc29e"}] flags=[] (0.0813ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba00001b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"84a3", "confirmation_key"=>"0afe1ca07b1ba58a08f8"}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e27497bfe85ba00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e27497bfe85ba00001d", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"c928", "confirmation_key"=>"8ef194d8b2dff38a8906"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b2e27497bfe85ba00001e", "user_ids"=>["503b2e27497bfe85ba00001d"], "name"=>"g1"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b2e27497bfe85ba00001d"]}}]} update={"$addToSet"=>{"group_ids"=>"503b2e27497bfe85ba00001e"}} flags=[:multi] (0.0892ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b2e27497bfe85ba00001e"]}}]}} (0.4170ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e85497bfe86ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e85497bfe86ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"249e", "confirmation_key"=>"6783acefcf43ae0426c2"}] flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2e85497bfe86ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2e85497bfe86ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"835c", "confirmation_key"=>"a04e603bd352691e00a4"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e85497bfe86ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e85497bfe86ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e85497bfe86ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e85497bfe86ba000001", "at"=>2012-08-27 10:23:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2e85497bfe86ba000004", "at"=>2012-08-27 08:23:33 UTC, "changes"=>{}, "user_id"=>"503b2e85497bfe86ba000001"}]}] flags=[] (0.1628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e85497bfe86ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e85497bfe86ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e85497bfe86ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e85497bfe86ba000001", "at"=>2012-08-27 10:23:33 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2e85497bfe86ba000006", "at"=>2012-08-27 08:23:33 UTC, "changes"=>{}, "user_id"=>"503b2e85497bfe86ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2e85497bfe86ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3259ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2e85497bfe86ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2e85497bfe86ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2e85497bfe86ba000001", "at"=>2012-08-27 10:23:33 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b2e85497bfe86ba000008", "at"=>2012-08-27 08:23:33 UTC, "changes"=>{}, "user_id"=>"503b2e85497bfe86ba000001"}]}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e85497bfe86ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4218ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2e85497bfe86ba000005"} update={"$push"=>{:label_ids=>"503b2e85497bfe86ba000003"}} flags=[:multi] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e85497bfe86ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2e85497bfe86ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e85497bfe86ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.6099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2e85497bfe86ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e85497bfe86ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2e85497bfe86ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2e85497bfe86ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1884ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2fa6497bfe87ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4673ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2fa6497bfe87ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5047", "confirmation_key"=>"054e852ee8744f7c7898"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2fa6497bfe87ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2fa6497bfe87ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"35ad", "confirmation_key"=>"ae4b54413e2adefe4099"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fa6497bfe87ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fa6497bfe87ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fa6497bfe87ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fa6497bfe87ba000001", "at"=>2012-08-27 10:28:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2fa6497bfe87ba000004", "at"=>2012-08-27 08:28:22 UTC, "changes"=>{}, "user_id"=>"503b2fa6497bfe87ba000001"}]}] flags=[] (0.1822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fa6497bfe87ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fa6497bfe87ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fa6497bfe87ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fa6497bfe87ba000001", "at"=>2012-08-27 10:28:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2fa6497bfe87ba000006", "at"=>2012-08-27 08:28:22 UTC, "changes"=>{}, "user_id"=>"503b2fa6497bfe87ba000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fa6497bfe87ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fa6497bfe87ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fa6497bfe87ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fa6497bfe87ba000001", "at"=>2012-08-27 10:28:22 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b2fa6497bfe87ba000008", "at"=>2012-08-27 08:28:22 UTC, "changes"=>{}, "user_id"=>"503b2fa6497bfe87ba000001"}]}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fa6497bfe87ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2fa6497bfe87ba000005"} update={"$push"=>{:label_ids=>"503b2fa6497bfe87ba000003"}} flags=[:multi] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fa6497bfe87ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2fa6497bfe87ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2fa6497bfe87ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2fa6497bfe87ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fa6497bfe87ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fa6497bfe87ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fa6497bfe87ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6640ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1771ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2fbb497bfe88ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2fbb497bfe88ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b988", "confirmation_key"=>"c1ff2d25b43edeee7115"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b2fbb497bfe88ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3011ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b2fbb497bfe88ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4f5f", "confirmation_key"=>"1019ea55df87d082295f"}] flags=[] (0.0658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fbb497bfe88ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fbb497bfe88ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fbb497bfe88ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fbb497bfe88ba000001", "at"=>2012-08-27 10:28:43 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b2fbb497bfe88ba000004", "at"=>2012-08-27 08:28:43 UTC, "changes"=>{}, "user_id"=>"503b2fbb497bfe88ba000001"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fbb497bfe88ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fbb497bfe88ba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fbb497bfe88ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fbb497bfe88ba000001", "at"=>2012-08-27 10:28:43 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b2fbb497bfe88ba000006", "at"=>2012-08-27 08:28:43 UTC, "changes"=>{}, "user_id"=>"503b2fbb497bfe88ba000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b2fbb497bfe88ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b2fbb497bfe88ba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b2fbb497bfe88ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b2fbb497bfe88ba000001", "at"=>2012-08-27 10:28:43 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b2fbb497bfe88ba000008", "at"=>2012-08-27 08:28:43 UTC, "changes"=>{}, "user_id"=>"503b2fbb497bfe88ba000001"}]}] flags=[] (0.1168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fbb497bfe88ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2fbb497bfe88ba000005"} update={"$push"=>{:label_ids=>"503b2fbb497bfe88ba000003"}} flags=[:multi] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fbb497bfe88ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b2fbb497bfe88ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.2630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2fbb497bfe88ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b2fbb497bfe88ba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.3912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fbb497bfe88ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "label_ids"=>"503b2fbb497bfe88ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3676ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b2fbb497bfe88ba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2530ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b2fbb497bfe88ba000007"} update={"$push"=>{:label_ids=>"503b2fbb497bfe88ba000005"}} flags=[:multi] (0.0882ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7122ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3249ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3001497bfe8aba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3001497bfe8aba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1e0f", "confirmation_key"=>"e91e95df6345b30d77d3"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3001497bfe8aba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3001497bfe8aba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"affa", "confirmation_key"=>"794abd92b2e74d8af6bd"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3001497bfe8aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3001497bfe8aba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3001497bfe8aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3001497bfe8aba000001", "at"=>2012-08-27 10:29:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3001497bfe8aba000004", "at"=>2012-08-27 08:29:53 UTC, "changes"=>{}, "user_id"=>"503b3001497bfe8aba000001"}]}] flags=[] (0.1657ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3001497bfe8aba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3068ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3001497bfe8aba000005", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3001497bfe8aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3001497bfe8aba000001", "at"=>2012-08-27 10:29:53 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3001497bfe8aba000006", "at"=>2012-08-27 08:29:53 UTC, "changes"=>{}, "user_id"=>"503b3001497bfe8aba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3001497bfe8aba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3169ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3001497bfe8aba000007", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3001497bfe8aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3001497bfe8aba000001", "at"=>2012-08-27 10:29:53 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3001497bfe8aba000008", "at"=>2012-08-27 08:29:53 UTC, "changes"=>{}, "user_id"=>"503b3001497bfe8aba000001"}]}] flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "label_ids"=>"503b3001497bfe8aba000003"} flags=[] limit=0 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3001497bfe8aba000005"} update={"$push"=>{:label_ids=>"503b3001497bfe8aba000003"}} flags=[:multi] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "label_ids"=>"503b3001497bfe8aba000003"} flags=[] limit=0 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3001497bfe8aba000005"} flags=[] limit=-1 skip=0 fields=nil (0.2887ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3001497bfe8aba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3001497bfe8aba000003"]}} flags=[] limit=0 skip=0 fields=nil (0.4108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "label_ids"=>"503b3001497bfe8aba000003"} flags=[] limit=0 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "label_ids"=>"503b3001497bfe8aba000003"} flags=[] limit=0 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2620ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3001497bfe8aba000007"} update={"$push"=>{:label_ids=>"503b3001497bfe8aba000005"}} flags=[:multi] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3001497bfe8aba000007"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3001497bfe8aba000005"]}} flags=[] limit=0 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3001497bfe8aba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3001497bfe8aba000005"]}} flags=[] limit=0 skip=0 fields=nil (0.3941ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7710ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5d61", "confirmation_key"=>"37f45b90314b6d6c1891"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7a38", "confirmation_key"=>"2469c74932610ae4dad1"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000001", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3033497bfe8cba000004", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4926ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3033497bfe8cba000003"} update={"$set"=>{"acl"=>{"503b3033497bfe8cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000001", "at"=>2012-08-27 10:30:43 +0200}, "503b3033497bfe8cba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000001", "at"=>2012-08-27 10:30:43 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000001", "at"=>2012-08-27 08:30:43 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3033497bfe8cba000007", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b3033497bfe8cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b3033497bfe8cba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8030ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3920ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1972ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8ab1", "confirmation_key"=>"65327a2d6085de128c10"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (2.1350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba00000b", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d3f0", "confirmation_key"=>"ae16d2ae4db9662b214f"}] flags=[] (0.1721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5543ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba00000a", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3033497bfe8cba00000d", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba00000a"}]}] flags=[] (0.2003ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4957ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba00000a", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3033497bfe8cba00000f", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba00000a"}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba000010", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba00000a"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba00000a", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3033497bfe8cba000011", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba00000a"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3033497bfe8cba00000c"} flags=[] limit=0 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3033497bfe8cba00000e"} update={"$push"=>{:label_ids=>"503b3033497bfe8cba00000c"}} flags=[:multi] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3033497bfe8cba00000c"} flags=[] limit=0 skip=0 fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3033497bfe8cba00000e"} flags=[] limit=-1 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3033497bfe8cba00000c"]}} flags=[] limit=0 skip=0 fields=nil (0.6630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3033497bfe8cba00000c"]}} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3033497bfe8cba00000c"} flags=[] limit=0 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3033497bfe8cba00000c"} flags=[] limit=0 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3033497bfe8cba000010"} update={"$push"=>{:label_ids=>"503b3033497bfe8cba00000e"}} flags=[:multi] (0.0901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3033497bfe8cba000010"} flags=[] limit=-1 skip=0 fields=nil (0.2878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3033497bfe8cba00000e"]}} flags=[] limit=0 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3033497bfe8cba00000e"]}} flags=[] limit=0 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1798ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba000012", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"866f", "confirmation_key"=>"ceff35b8f8738bb6d5a3"}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba000013", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"de59", "confirmation_key"=>"4a53ca3baa67d03032fc"}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3011ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba000012"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000012", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3033497bfe8cba000015", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba000012"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba000012"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000012", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b3033497bfe8cba000019", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba000012"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3033497bfe8cba00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3033497bfe8cba00001a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3033497bfe8cba000012"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3033497bfe8cba000012", "at"=>2012-08-27 10:30:43 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b3033497bfe8cba00001b", "at"=>2012-08-27 08:30:43 UTC, "changes"=>{}, "user_id"=>"503b3033497bfe8cba000012"}]}] flags=[] (0.1900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000012.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3033497bfe8cba000013.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4532ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3033497bfe8cba000012.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3033497bfe8cba000014"} flags=[] limit=-1 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4737ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba00001c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8e56", "confirmation_key"=>"ecd84074fb9b30cec50a"}] flags=[] (0.0799ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4420ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba00001d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dea5", "confirmation_key"=>"2f3d8681e0036ccd08f9"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00001e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3033497bfe8cba00001f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3033497bfe8cba00001f", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"a828", "confirmation_key"=>"830c01db367e618a62de"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b3033497bfe8cba000020", "user_ids"=>["503b3033497bfe8cba00001f"], "name"=>"g1"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b3033497bfe8cba00001f"]}}]} update={"$addToSet"=>{"group_ids"=>"503b3033497bfe8cba000020"}} flags=[:multi] (0.0839ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b3033497bfe8cba000020"]}}]}} (0.3417ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6630ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1478ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b30a9497bfe8fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b30a9497bfe8fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1555", "confirmation_key"=>"d8b2b6bdaeaf1fa1bd97"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b30a9497bfe8fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3908ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b30a9497bfe8fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6e62", "confirmation_key"=>"dd120b347c4b64a673dd"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b30a9497bfe8fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4232ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b30a9497bfe8fba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b30a9497bfe8fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b30a9497bfe8fba000001", "at"=>2012-08-27 10:32:41 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b30a9497bfe8fba000004", "at"=>2012-08-27 08:32:41 UTC, "changes"=>{}, "user_id"=>"503b30a9497bfe8fba000001"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b30a9497bfe8fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b30a9497bfe8fba000005", "version"=>1, "label_ids"=>["503b30a9497bfe8fba000003"], "pos"=>99, "acl"=>{"503b30a9497bfe8fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b30a9497bfe8fba000001", "at"=>2012-08-27 10:32:41 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b30a9497bfe8fba000006", "at"=>2012-08-27 08:32:41 UTC, "changes"=>{}, "user_id"=>"503b30a9497bfe8fba000001"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b30a9497bfe8fba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b30a9497bfe8fba000007", "version"=>1, "label_ids"=>["503b30a9497bfe8fba000005"], "pos"=>99, "acl"=>{"503b30a9497bfe8fba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b30a9497bfe8fba000001", "at"=>2012-08-27 10:32:41 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b30a9497bfe8fba000008", "at"=>2012-08-27 08:32:41 UTC, "changes"=>{}, "user_id"=>"503b30a9497bfe8fba000001"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b30a9497bfe8fba000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7000ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1771ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3571ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b311a497bfe92ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b311a497bfe92ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9079", "confirmation_key"=>"aae077160728202a8ad5"}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b311a497bfe92ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b311a497bfe92ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"80de", "confirmation_key"=>"4b4932b3f0867d5b99fb"}] flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b311a497bfe92ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b311a497bfe92ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b311a497bfe92ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b311a497bfe92ba000001", "at"=>2012-08-27 10:34:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b311a497bfe92ba000004", "at"=>2012-08-27 08:34:34 UTC, "changes"=>{}, "user_id"=>"503b311a497bfe92ba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b311a497bfe92ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b311a497bfe92ba000005", "version"=>1, "label_ids"=>["503b311a497bfe92ba000003"], "pos"=>99, "acl"=>{"503b311a497bfe92ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b311a497bfe92ba000001", "at"=>2012-08-27 10:34:34 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b311a497bfe92ba000006", "at"=>2012-08-27 08:34:34 UTC, "changes"=>{}, "user_id"=>"503b311a497bfe92ba000001"}]}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b311a497bfe92ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b311a497bfe92ba000007", "version"=>1, "label_ids"=>["503b311a497bfe92ba000005"], "pos"=>99, "acl"=>{"503b311a497bfe92ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b311a497bfe92ba000001", "at"=>2012-08-27 10:34:34 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b311a497bfe92ba000008", "at"=>2012-08-27 08:34:34 UTC, "changes"=>{}, "user_id"=>"503b311a497bfe92ba000001"}]}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b311a497bfe92ba000001.privileges"=>/r\w*/, "label_ids"=>"503b311a497bfe92ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b311a497bfe92ba000001.privileges"=>/r\w*/, "label_ids"=>"503b311a497bfe92ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1752ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3153497bfe93ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3153497bfe93ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b149", "confirmation_key"=>"bea9ec76fdfbb4edc472"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3153497bfe93ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3153497bfe93ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b060", "confirmation_key"=>"60acf53a1c8d4287435c"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3153497bfe93ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4733ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3153497bfe93ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3153497bfe93ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 10:35:31 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3153497bfe93ba000004", "at"=>2012-08-27 08:35:31 UTC, "changes"=>{}, "user_id"=>"503b3153497bfe93ba000001"}]}] flags=[] (0.1931ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3153497bfe93ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4218ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3153497bfe93ba000005", "version"=>1, "label_ids"=>["503b3153497bfe93ba000003"], "pos"=>99, "acl"=>{"503b3153497bfe93ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 10:35:31 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3153497bfe93ba000006", "at"=>2012-08-27 08:35:31 UTC, "changes"=>{}, "user_id"=>"503b3153497bfe93ba000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3153497bfe93ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3153497bfe93ba000007", "version"=>1, "label_ids"=>["503b3153497bfe93ba000005"], "pos"=>99, "acl"=>{"503b3153497bfe93ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 10:35:31 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3153497bfe93ba000008", "at"=>2012-08-27 08:35:31 UTC, "changes"=>{}, "user_id"=>"503b3153497bfe93ba000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3153497bfe93ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3153497bfe93ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3153497bfe93ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3153497bfe93ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3153497bfe93ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5512ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3153497bfe93ba000003"} update={"$set"=>{"acl"=>{"503b3153497bfe93ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 10:35:31 +0200}, "503b3153497bfe93ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 10:35:31 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3153497bfe93ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b3153497bfe93ba000001", "at"=>2012-08-27 08:35:31 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3153497bfe93ba00000b", "at"=>2012-08-27 08:35:31 UTC, "changes"=>{}, "user_id"=>"503b3153497bfe93ba000001"}]}]}} flags=[] (0.2971ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6599ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1528ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3600ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b31ac497bfe94ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5943", "confirmation_key"=>"47c065eb2ba022acb2ca"}] flags=[] (0.1032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b31ac497bfe94ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"df07", "confirmation_key"=>"ebd15bc96bf34731b3cf"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b31ac497bfe94ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b31ac497bfe94ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 10:37:00 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b31ac497bfe94ba000004", "at"=>2012-08-27 08:37:00 UTC, "changes"=>{}, "user_id"=>"503b31ac497bfe94ba000001"}]}] flags=[] (0.1760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b31ac497bfe94ba000005", "version"=>1, "label_ids"=>["503b31ac497bfe94ba000003"], "pos"=>99, "acl"=>{"503b31ac497bfe94ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 10:37:00 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b31ac497bfe94ba000006", "at"=>2012-08-27 08:37:00 UTC, "changes"=>{}, "user_id"=>"503b31ac497bfe94ba000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b31ac497bfe94ba000007", "version"=>1, "label_ids"=>["503b31ac497bfe94ba000005"], "pos"=>99, "acl"=>{"503b31ac497bfe94ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 10:37:00 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b31ac497bfe94ba000008", "at"=>2012-08-27 08:37:00 UTC, "changes"=>{}, "user_id"=>"503b31ac497bfe94ba000001"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b31ac497bfe94ba000001.privileges"=>/r\w*/, "label_ids"=>"503b31ac497bfe94ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b31ac497bfe94ba000001.privileges"=>/r\w*/, "label_ids"=>"503b31ac497bfe94ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b31ac497bfe94ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6089ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b31ac497bfe94ba000003"} update={"$set"=>{"acl"=>{"503b31ac497bfe94ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 10:37:00 +0200}, "503b31ac497bfe94ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 10:37:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b31ac497bfe94ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b31ac497bfe94ba000001", "at"=>2012-08-27 08:37:00 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b31ac497bfe94ba00000b", "at"=>2012-08-27 08:37:00 UTC, "changes"=>{}, "user_id"=>"503b31ac497bfe94ba000001"}]}]}} flags=[] (0.2642ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7250ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b326b497bfe95ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b326b497bfe95ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6a6b", "confirmation_key"=>"e6b8494e38605e7111bf"}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b326b497bfe95ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b326b497bfe95ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2dd6", "confirmation_key"=>"3ed469825734edfb379b"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b326b497bfe95ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4351ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b326b497bfe95ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b326b497bfe95ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 10:40:11 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b326b497bfe95ba000004", "at"=>2012-08-27 08:40:11 UTC, "changes"=>{}, "user_id"=>"503b326b497bfe95ba000001"}]}] flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b326b497bfe95ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b326b497bfe95ba000005", "version"=>1, "label_ids"=>["503b326b497bfe95ba000003"], "pos"=>99, "acl"=>{"503b326b497bfe95ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 10:40:11 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b326b497bfe95ba000006", "at"=>2012-08-27 08:40:11 UTC, "changes"=>{}, "user_id"=>"503b326b497bfe95ba000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b326b497bfe95ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b326b497bfe95ba000007", "version"=>1, "label_ids"=>["503b326b497bfe95ba000005"], "pos"=>99, "acl"=>{"503b326b497bfe95ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 10:40:11 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b326b497bfe95ba000008", "at"=>2012-08-27 08:40:11 UTC, "changes"=>{}, "user_id"=>"503b326b497bfe95ba000001"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b326b497bfe95ba000001.privileges"=>/r\w*/, "label_ids"=>"503b326b497bfe95ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b326b497bfe95ba000001.privileges"=>/r\w*/, "label_ids"=>"503b326b497bfe95ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b326b497bfe95ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6342ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b326b497bfe95ba000003"} update={"$set"=>{"acl"=>{"503b326b497bfe95ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 10:40:11 +0200}, "503b326b497bfe95ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 10:40:11 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b326b497bfe95ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b326b497bfe95ba000001", "at"=>2012-08-27 08:40:11 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b326b497bfe95ba00000b", "at"=>2012-08-27 08:40:11 UTC, "changes"=>{}, "user_id"=>"503b326b497bfe95ba000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7122ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1853ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b327f497bfe96ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b327f497bfe96ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ae96", "confirmation_key"=>"414ff01b9019a3564a92"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b327f497bfe96ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3459ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b327f497bfe96ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1b6f", "confirmation_key"=>"f79539a6c072cce7ee50"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b327f497bfe96ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b327f497bfe96ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b327f497bfe96ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 10:40:31 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b327f497bfe96ba000004", "at"=>2012-08-27 08:40:31 UTC, "changes"=>{}, "user_id"=>"503b327f497bfe96ba000001"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b327f497bfe96ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b327f497bfe96ba000005", "version"=>1, "label_ids"=>["503b327f497bfe96ba000003"], "pos"=>99, "acl"=>{"503b327f497bfe96ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 10:40:31 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b327f497bfe96ba000006", "at"=>2012-08-27 08:40:31 UTC, "changes"=>{}, "user_id"=>"503b327f497bfe96ba000001"}]}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b327f497bfe96ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3943ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b327f497bfe96ba000007", "version"=>1, "label_ids"=>["503b327f497bfe96ba000005"], "pos"=>99, "acl"=>{"503b327f497bfe96ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 10:40:31 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b327f497bfe96ba000008", "at"=>2012-08-27 08:40:31 UTC, "changes"=>{}, "user_id"=>"503b327f497bfe96ba000001"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b327f497bfe96ba000001.privileges"=>/r\w*/, "label_ids"=>"503b327f497bfe96ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b327f497bfe96ba000001.privileges"=>/r\w*/, "label_ids"=>"503b327f497bfe96ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b327f497bfe96ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5910ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b327f497bfe96ba000003"} update={"$set"=>{"acl"=>{"503b327f497bfe96ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 10:40:31 +0200}, "503b327f497bfe96ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 10:40:31 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b327f497bfe96ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>"503b327f497bfe96ba000001", "at"=>2012-08-27 08:40:31 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b327f497bfe96ba00000b", "at"=>2012-08-27 08:40:31 UTC, "changes"=>{}, "user_id"=>"503b327f497bfe96ba000001"}]}]}} flags=[] (0.2661ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1884ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b32c7497bfe98ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4728ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b32c7497bfe98ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"da97", "confirmation_key"=>"56e89f251e735f6a2948"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b32c7497bfe98ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4017ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b32c7497bfe98ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5566", "confirmation_key"=>"2667cb0214eb2dcdd9df"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b32c7497bfe98ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b32c7497bfe98ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b32c7497bfe98ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:41:44 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b32c8497bfe98ba000004", "at"=>2012-08-27 08:41:43 UTC, "changes"=>{}, "user_id"=>"503b32c7497bfe98ba000001"}]}] flags=[] (0.1779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b32c8497bfe98ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b32c8497bfe98ba000005", "version"=>1, "label_ids"=>["503b32c7497bfe98ba000003"], "pos"=>99, "acl"=>{"503b32c7497bfe98ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:41:44 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b32c8497bfe98ba000006", "at"=>2012-08-27 08:41:44 UTC, "changes"=>{}, "user_id"=>"503b32c7497bfe98ba000001"}]}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b32c8497bfe98ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2851ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b32c8497bfe98ba000007", "version"=>1, "label_ids"=>["503b32c8497bfe98ba000005"], "pos"=>99, "acl"=>{"503b32c7497bfe98ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:41:44 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b32c8497bfe98ba000008", "at"=>2012-08-27 08:41:44 UTC, "changes"=>{}, "user_id"=>"503b32c7497bfe98ba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b32c7497bfe98ba000001.privileges"=>/r\w*/, "label_ids"=>"503b32c7497bfe98ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b32c7497bfe98ba000001.privileges"=>/r\w*/, "label_ids"=>"503b32c8497bfe98ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b32c7497bfe98ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b32c7497bfe98ba000003"} update={"$set"=>{"acl"=>{"503b32c7497bfe98ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:41:44 +0200}, "503b32c7497bfe98ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b32c7497bfe98ba000001", "at"=>2012-08-27 10:41:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b32c7497bfe98ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 08:41:44 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b32c8497bfe98ba00000b", "at"=>2012-08-27 08:41:43 UTC, "changes"=>{}, "user_id"=>"503b32c7497bfe98ba000001"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b33cc497bfe99ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2edc", "confirmation_key"=>"9d92255dbf8fdd517337"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b33cc497bfe99ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"23e9", "confirmation_key"=>"95f136bc40b72688e3c7"}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33cc497bfe99ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b33cc497bfe99ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:04 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b33cc497bfe99ba000004", "at"=>2012-08-27 08:46:04 UTC, "changes"=>{}, "user_id"=>"503b33cc497bfe99ba000001"}]}] flags=[] (0.1619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33cc497bfe99ba000005", "version"=>1, "label_ids"=>["503b33cc497bfe99ba000003"], "pos"=>99, "acl"=>{"503b33cc497bfe99ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:04 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b33cc497bfe99ba000006", "at"=>2012-08-27 08:46:04 UTC, "changes"=>{}, "user_id"=>"503b33cc497bfe99ba000001"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33cc497bfe99ba000007", "version"=>1, "label_ids"=>["503b33cc497bfe99ba000005"], "pos"=>99, "acl"=>{"503b33cc497bfe99ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:04 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b33cc497bfe99ba000008", "at"=>2012-08-27 08:46:04 UTC, "changes"=>{}, "user_id"=>"503b33cc497bfe99ba000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b33cc497bfe99ba000001.privileges"=>/r\w*/, "label_ids"=>"503b33cc497bfe99ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b33cc497bfe99ba000001.privileges"=>/r\w*/, "label_ids"=>"503b33cc497bfe99ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33cc497bfe99ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5381ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b33cc497bfe99ba000003"} update={"$set"=>{"acl"=>{"503b33cc497bfe99ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:04 +0200}, "503b33cc497bfe99ba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b33cc497bfe99ba000001", "at"=>2012-08-27 10:46:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b33cc497bfe99ba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 08:46:04 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b33cc497bfe99ba00000b", "at"=>2012-08-27 08:46:04 UTC, "changes"=>{}, "user_id"=>"503b33cc497bfe99ba000001"}]}]}} flags=[] (0.2542ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6919ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0618ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b33ea497bfe9aba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"40df", "confirmation_key"=>"812f7a7a75c32e2f8233"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b33ea497bfe9aba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"35a9", "confirmation_key"=>"d102879afcfb07809703"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33ea497bfe9aba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b33ea497bfe9aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b33ea497bfe9aba000004", "at"=>2012-08-27 08:46:34 UTC, "changes"=>{}, "user_id"=>"503b33ea497bfe9aba000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33ea497bfe9aba000005", "version"=>1, "label_ids"=>["503b33ea497bfe9aba000003"], "pos"=>99, "acl"=>{"503b33ea497bfe9aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:34 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b33ea497bfe9aba000006", "at"=>2012-08-27 08:46:34 UTC, "changes"=>{}, "user_id"=>"503b33ea497bfe9aba000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b33ea497bfe9aba000007", "version"=>1, "label_ids"=>["503b33ea497bfe9aba000005"], "pos"=>99, "acl"=>{"503b33ea497bfe9aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:34 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b33ea497bfe9aba000008", "at"=>2012-08-27 08:46:34 UTC, "changes"=>{}, "user_id"=>"503b33ea497bfe9aba000001"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b33ea497bfe9aba000001.privileges"=>/r\w*/, "label_ids"=>"503b33ea497bfe9aba000003"} flags=[] limit=0 skip=0 fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b33ea497bfe9aba000001.privileges"=>/r\w*/, "label_ids"=>"503b33ea497bfe9aba000005"} flags=[] limit=0 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b33ea497bfe9aba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b33ea497bfe9aba000003"} update={"$set"=>{"acl"=>{"503b33ea497bfe9aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 10:46:34 +0200}, "503b33ea497bfe9aba000002"=>{"privileges"=>"r", "inherited"=>nil, "invited"=>"503b33ea497bfe9aba000001", "at"=>2012-08-27 10:46:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b33ea497bfe9aba000001"=>{"privileges"=>"rwsd", "inherited"=>nil, "invited"=>nil, "at"=>2012-08-27 08:46:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b33ea497bfe9aba00000b", "at"=>2012-08-27 08:46:34 UTC, "changes"=>{}, "user_id"=>"503b33ea497bfe9aba000001"}]}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6638ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1793ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3652ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b354d497bfe9bba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4768ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b354d497bfe9bba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3cca", "confirmation_key"=>"dee6f3a13a45e6b4dbdd"}] flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b354d497bfe9bba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b354d497bfe9bba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8df2", "confirmation_key"=>"c449be33538701ec5dda"}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b354d497bfe9bba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b354d497bfe9bba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b354d497bfe9bba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b354d497bfe9bba000004", "at"=>2012-08-27 08:52:29 UTC, "changes"=>{}, "user_id"=>"503b354d497bfe9bba000001"}]}] flags=[] (0.1791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b354d497bfe9bba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b354d497bfe9bba000005", "version"=>1, "label_ids"=>["503b354d497bfe9bba000003"], "pos"=>99, "acl"=>{"503b354d497bfe9bba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b354d497bfe9bba000006", "at"=>2012-08-27 08:52:29 UTC, "changes"=>{}, "user_id"=>"503b354d497bfe9bba000001"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b354d497bfe9bba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b354d497bfe9bba000007", "version"=>1, "label_ids"=>["503b354d497bfe9bba000005"], "pos"=>99, "acl"=>{"503b354d497bfe9bba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b354d497bfe9bba000008", "at"=>2012-08-27 08:52:29 UTC, "changes"=>{}, "user_id"=>"503b354d497bfe9bba000001"}]}] flags=[] (0.1192ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b354d497bfe9bba000001.privileges"=>/r\w*/, "label_ids"=>"503b354d497bfe9bba000003"} flags=[] limit=0 skip=0 fields=nil (0.5372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b354d497bfe9bba000001.privileges"=>/r\w*/, "label_ids"=>"503b354d497bfe9bba000005"} flags=[] limit=0 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b354d497bfe9bba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6092ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b354d497bfe9bba000003"} update={"$set"=>{"acl"=>{"503b354d497bfe9bba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:29 +0200}, "503b354d497bfe9bba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b354d497bfe9bba000001", "at"=>2012-08-27 10:52:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b354d497bfe9bba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:52:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b354d497bfe9bba00000b", "at"=>2012-08-27 08:52:29 UTC, "changes"=>{}, "user_id"=>"503b354d497bfe9bba000001"}]}]}} flags=[] (0.2627ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b354d497bfe9bba000001.privileges"=>/r\w*/, "label_ids"=>"503b354d497bfe9bba000003"} flags=[] limit=0 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6847ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1848ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1712ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b355c497bfe9cba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4752ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b355c497bfe9cba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"dbe2", "confirmation_key"=>"89d9c6f8dca0e7a13d00"}] flags=[] (0.1040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b355c497bfe9cba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b355c497bfe9cba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6cfc", "confirmation_key"=>"64473113a68b91ea785c"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b355c497bfe9cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b355c497bfe9cba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b355c497bfe9cba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:44 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b355c497bfe9cba000004", "at"=>2012-08-27 08:52:44 UTC, "changes"=>{}, "user_id"=>"503b355c497bfe9cba000001"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b355c497bfe9cba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b355c497bfe9cba000005", "version"=>1, "label_ids"=>["503b355c497bfe9cba000003"], "pos"=>99, "acl"=>{"503b355c497bfe9cba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:44 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b355c497bfe9cba000006", "at"=>2012-08-27 08:52:44 UTC, "changes"=>{}, "user_id"=>"503b355c497bfe9cba000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b355c497bfe9cba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3312ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b355c497bfe9cba000007", "version"=>1, "label_ids"=>["503b355c497bfe9cba000005"], "pos"=>99, "acl"=>{"503b355c497bfe9cba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:44 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b355c497bfe9cba000008", "at"=>2012-08-27 08:52:44 UTC, "changes"=>{}, "user_id"=>"503b355c497bfe9cba000001"}]}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b355c497bfe9cba000001.privileges"=>/r\w*/, "label_ids"=>"503b355c497bfe9cba000003"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b355c497bfe9cba000001.privileges"=>/r\w*/, "label_ids"=>"503b355c497bfe9cba000005"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b355c497bfe9cba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b355c497bfe9cba000003"} update={"$set"=>{"acl"=>{"503b355c497bfe9cba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:52:44 +0200}, "503b355c497bfe9cba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b355c497bfe9cba000001", "at"=>2012-08-27 10:52:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b355c497bfe9cba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:52:44 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b355c497bfe9cba00000b", "at"=>2012-08-27 08:52:44 UTC, "changes"=>{}, "user_id"=>"503b355c497bfe9cba000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b355c497bfe9cba000001.privileges"=>/r\w*/, "label_ids"=>"503b355c497bfe9cba000003"} flags=[] limit=0 skip=0 fields=nil (0.5090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b355c497bfe9cba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4981ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6914ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1798ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3950ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3589497bfe9eba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3589497bfe9eba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3d30", "confirmation_key"=>"10c75fdec3e3989be245"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3589497bfe9eba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3589497bfe9eba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d70a", "confirmation_key"=>"2d08a490fbb988b04255"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3589497bfe9eba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4382ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3589497bfe9eba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3589497bfe9eba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:53:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3589497bfe9eba000004", "at"=>2012-08-27 08:53:29 UTC, "changes"=>{}, "user_id"=>"503b3589497bfe9eba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3589497bfe9eba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3589497bfe9eba000005", "version"=>1, "label_ids"=>["503b3589497bfe9eba000003"], "pos"=>99, "acl"=>{"503b3589497bfe9eba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:53:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3589497bfe9eba000006", "at"=>2012-08-27 08:53:29 UTC, "changes"=>{}, "user_id"=>"503b3589497bfe9eba000001"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3589497bfe9eba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3589497bfe9eba000007", "version"=>1, "label_ids"=>["503b3589497bfe9eba000005"], "pos"=>99, "acl"=>{"503b3589497bfe9eba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:53:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3589497bfe9eba000008", "at"=>2012-08-27 08:53:29 UTC, "changes"=>{}, "user_id"=>"503b3589497bfe9eba000001"}]}] flags=[] (0.1397ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3589497bfe9eba000001.privileges"=>/r\w*/, "label_ids"=>"503b3589497bfe9eba000003"} flags=[] limit=0 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3589497bfe9eba000001.privileges"=>/r\w*/, "label_ids"=>"503b3589497bfe9eba000005"} flags=[] limit=0 skip=0 fields=nil (0.3967ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3589497bfe9eba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6347ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3589497bfe9eba000003"} update={"$set"=>{"acl"=>{"503b3589497bfe9eba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:53:29 +0200}, "503b3589497bfe9eba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3589497bfe9eba000001", "at"=>2012-08-27 10:53:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3589497bfe9eba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:53:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3589497bfe9eba00000b", "at"=>2012-08-27 08:53:29 UTC, "changes"=>{}, "user_id"=>"503b3589497bfe9eba000001"}]}]}} flags=[] (0.2730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3589497bfe9eba000001.privileges"=>/r\w*/, "label_ids"=>"503b3589497bfe9eba000003"} flags=[] limit=0 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3589497bfe9eba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7179ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0436ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4673ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b35ba497bfe9fba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"352a", "confirmation_key"=>"33e0b04316d4eff97006"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b35ba497bfe9fba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"fe6a", "confirmation_key"=>"5cfcf0add80444e31b25"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ba497bfe9fba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b35ba497bfe9fba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:54:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b35ba497bfe9fba000004", "at"=>2012-08-27 08:54:18 UTC, "changes"=>{}, "user_id"=>"503b35ba497bfe9fba000001"}]}] flags=[] (0.1700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ba497bfe9fba000005", "version"=>1, "label_ids"=>["503b35ba497bfe9fba000003"], "pos"=>99, "acl"=>{"503b35ba497bfe9fba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:54:18 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b35ba497bfe9fba000006", "at"=>2012-08-27 08:54:18 UTC, "changes"=>{}, "user_id"=>"503b35ba497bfe9fba000001"}]}] flags=[] (0.1333ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3343ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ba497bfe9fba000007", "version"=>1, "label_ids"=>["503b35ba497bfe9fba000005"], "pos"=>99, "acl"=>{"503b35ba497bfe9fba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:54:18 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b35ba497bfe9fba000008", "at"=>2012-08-27 08:54:18 UTC, "changes"=>{}, "user_id"=>"503b35ba497bfe9fba000001"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ba497bfe9fba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ba497bfe9fba000003"} flags=[] limit=0 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ba497bfe9fba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ba497bfe9fba000005"} flags=[] limit=0 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b35ba497bfe9fba000003"} update={"$set"=>{"acl"=>{"503b35ba497bfe9fba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:54:18 +0200}, "503b35ba497bfe9fba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b35ba497bfe9fba000001", "at"=>2012-08-27 10:54:18 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b35ba497bfe9fba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:54:18 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b35ba497bfe9fba00000b", "at"=>2012-08-27 08:54:18 UTC, "changes"=>{}, "user_id"=>"503b35ba497bfe9fba000001"}]}]}} flags=[] (0.2580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ba497bfe9fba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ba497bfe9fba000003"} flags=[] limit=0 skip=0 fields=nil (0.5121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ba497bfe9fba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1881ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1638ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b35ea497bfea0ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0118", "confirmation_key"=>"9e5926a33bc291fe0b70"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b35ea497bfea0ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f5ad", "confirmation_key"=>"f8e0ccc065873a804ccd"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3672ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ea497bfea0ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:06 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba000004", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}] flags=[] (0.1602ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ea497bfea0ba000005", "version"=>1, "label_ids"=>["503b35ea497bfea0ba000003"], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:06 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba000006", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b35ea497bfea0ba000007", "version"=>1, "label_ids"=>["503b35ea497bfea0ba000005"], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:06 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba000008", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ea497bfea0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ea497bfea0ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ea497bfea0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ea497bfea0ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b35ea497bfea0ba000003"} update={"$set"=>{"acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:06 +0200}, "503b35ea497bfea0ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b35ea497bfea0ba000001", "at"=>2012-08-27 10:55:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba00000b", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ea497bfea0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ea497bfea0ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5212ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4938ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b35ea497bfea0ba000005"} update={"$set"=>{"acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:06 UTC}, "503b35ea497bfea0ba000002"=>{"privileges"=>"r", "inherited"=>{"503b35ea497bfea0ba000003"=>"r"}, "invited"=>"503b35ea497bfea0ba000001", "at"=>2012-08-27 10:55:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b35ea497bfea0ba000003"], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba00000e", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ea497bfea0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ea497bfea0ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b35ea497bfea0ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b35ea497bfea0ba000007"} update={"$set"=>{"acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:06 UTC}, "503b35ea497bfea0ba000002"=>{"privileges"=>"r", "inherited"=>{"503b35ea497bfea0ba000003"=>"r", "503b35ea497bfea0ba000005"=>"r"}, "invited"=>"503b35ea497bfea0ba000001", "at"=>2012-08-27 10:55:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b35ea497bfea0ba000005"], "pos"=>99, "acl"=>{"503b35ea497bfea0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:06 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b35ea497bfea0ba000011", "at"=>2012-08-27 08:55:06 UTC, "changes"=>{}, "user_id"=>"503b35ea497bfea0ba000001"}]}]}} flags=[] (0.2933ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b35ea497bfea0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b35ea497bfea0ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3562ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b361e497bfea1ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b361e497bfea1ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"23fb", "confirmation_key"=>"5ab8359f39289ff987d6"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b361e497bfea1ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b361e497bfea1ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e8c0", "confirmation_key"=>"cb04a9d9ce0889e4856b"}] flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4227ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b361e497bfea1ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:58 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b361e497bfea1ba000004", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}] flags=[] (0.1872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b361e497bfea1ba000005", "version"=>1, "label_ids"=>["503b361e497bfea1ba000003"], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:58 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b361e497bfea1ba000006", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b361e497bfea1ba000007", "version"=>1, "label_ids"=>["503b361e497bfea1ba000005"], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:58 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b361e497bfea1ba000008", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b361e497bfea1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b361e497bfea1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b361e497bfea1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b361e497bfea1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b361e497bfea1ba000003"} update={"$set"=>{"acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:55:58 +0200}, "503b361e497bfea1ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b361e497bfea1ba000001", "at"=>2012-08-27 10:55:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:58 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b361e497bfea1ba00000b", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}]}} flags=[] (0.2370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b361e497bfea1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b361e497bfea1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b361e497bfea1ba000005"} update={"$set"=>{"acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:58 UTC}, "503b361e497bfea1ba000002"=>{"privileges"=>"r", "inherited"=>{"503b361e497bfea1ba000003"=>"r"}, "invited"=>"503b361e497bfea1ba000001", "at"=>2012-08-27 10:55:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b361e497bfea1ba000003"], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:58 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b361e497bfea1ba00000e", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}]}} flags=[] (0.2258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b361e497bfea1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b361e497bfea1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b361e497bfea1ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b361e497bfea1ba000007"} update={"$set"=>{"acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:58 UTC}, "503b361e497bfea1ba000002"=>{"privileges"=>"r", "inherited"=>{"503b361e497bfea1ba000003"=>"r", "503b361e497bfea1ba000005"=>"r"}, "invited"=>"503b361e497bfea1ba000001", "at"=>2012-08-27 10:55:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b361e497bfea1ba000005"], "pos"=>99, "acl"=>{"503b361e497bfea1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 08:55:58 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b361e497bfea1ba000011", "at"=>2012-08-27 08:55:58 UTC, "changes"=>{}, "user_id"=>"503b361e497bfea1ba000001"}]}]}} flags=[] (0.4427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b361e497bfea1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b361e497bfea1ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4561ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6583ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0424ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3730497bfea3ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3730497bfea3ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a2e0", "confirmation_key"=>"e83b84ff65563e552c57"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3730497bfea3ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4718ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3730497bfea3ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d2e7", "confirmation_key"=>"2e11d43d21e18f9d8bca"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3730497bfea3ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:32 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3730497bfea3ba000004", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}] flags=[] (0.1991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4678ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3730497bfea3ba000005", "version"=>1, "label_ids"=>["503b3730497bfea3ba000003"], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:32 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3730497bfea3ba000006", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3730497bfea3ba000007", "version"=>1, "label_ids"=>["503b3730497bfea3ba000005"], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:32 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3730497bfea3ba000008", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}] flags=[] (0.1342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3730497bfea3ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3730497bfea3ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3730497bfea3ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3730497bfea3ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3967ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6311ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3730497bfea3ba000003"} update={"$set"=>{"acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:32 +0200}, "503b3730497bfea3ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3730497bfea3ba000001", "at"=>2012-08-27 11:00:32 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:32 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3730497bfea3ba00000b", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}]}} flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3730497bfea3ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3730497bfea3ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3730497bfea3ba000005"} update={"$set"=>{"acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:32 UTC}, "503b3730497bfea3ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3730497bfea3ba000003"=>"r"}, "invited"=>"503b3730497bfea3ba000001", "at"=>2012-08-27 11:00:32 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3730497bfea3ba000003"], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:32 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3730497bfea3ba00000e", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}]}} flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3730497bfea3ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3730497bfea3ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3730497bfea3ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3730497bfea3ba000007"} update={"$set"=>{"acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:32 UTC}, "503b3730497bfea3ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3730497bfea3ba000005"=>"r"}, "invited"=>"503b3730497bfea3ba000001", "at"=>2012-08-27 11:00:32 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3730497bfea3ba000005"], "pos"=>99, "acl"=>{"503b3730497bfea3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:32 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3730497bfea3ba000011", "at"=>2012-08-27 09:00:32 UTC, "changes"=>{}, "user_id"=>"503b3730497bfea3ba000001"}]}]}} flags=[] (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3730497bfea3ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3730497bfea3ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7041ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1731ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3741497bfea4ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3741497bfea4ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"de2e", "confirmation_key"=>"f7707d121cd2dec1de58"}] flags=[] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3741497bfea4ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3741497bfea4ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"702a", "confirmation_key"=>"4f2d96a0cc9482ac8d76"}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4241ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3741497bfea4ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:49 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3741497bfea4ba000004", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3741497bfea4ba000005", "version"=>1, "label_ids"=>["503b3741497bfea4ba000003"], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:49 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3741497bfea4ba000006", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3879ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3741497bfea4ba000007", "version"=>1, "label_ids"=>["503b3741497bfea4ba000005"], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:49 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3741497bfea4ba000008", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}] flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3741497bfea4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3741497bfea4ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3741497bfea4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3741497bfea4ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5379ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3741497bfea4ba000003"} update={"$set"=>{"acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:00:49 +0200}, "503b3741497bfea4ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3741497bfea4ba000001", "at"=>2012-08-27 11:00:49 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:49 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3741497bfea4ba00000b", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}]}} flags=[] (0.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3741497bfea4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3741497bfea4ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4187ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3741497bfea4ba000005"} update={"$set"=>{"acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:49 UTC}, "503b3741497bfea4ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3741497bfea4ba000003"=>"r"}, "invited"=>"503b3741497bfea4ba000001", "at"=>2012-08-27 11:00:49 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3741497bfea4ba000003"], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:49 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3741497bfea4ba00000e", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}]}} flags=[] (0.2351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3741497bfea4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3741497bfea4ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3741497bfea4ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3741497bfea4ba000007"} update={"$set"=>{"acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:49 UTC}, "503b3741497bfea4ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3741497bfea4ba000005"=>"r"}, "invited"=>"503b3741497bfea4ba000001", "at"=>2012-08-27 11:00:49 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3741497bfea4ba000005"], "pos"=>99, "acl"=>{"503b3741497bfea4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:00:49 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3741497bfea4ba000011", "at"=>2012-08-27 09:00:49 UTC, "changes"=>{}, "user_id"=>"503b3741497bfea4ba000001"}]}]}} flags=[] (0.3130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3741497bfea4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3741497bfea4ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3049ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3883497bfea6ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3883497bfea6ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4cea", "confirmation_key"=>"6a0a2c7402ed345b2875"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3883497bfea6ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3883497bfea6ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"faa7", "confirmation_key"=>"ba548f84909f199fe681"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3883497bfea6ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:11 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3883497bfea6ba000004", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3883497bfea6ba000005", "version"=>1, "label_ids"=>["503b3883497bfea6ba000003"], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:11 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3883497bfea6ba000006", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3883497bfea6ba000007", "version"=>1, "label_ids"=>["503b3883497bfea6ba000005"], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:11 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3883497bfea6ba000008", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3883497bfea6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3883497bfea6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3883497bfea6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3883497bfea6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3883497bfea6ba000003"} update={"$set"=>{"acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:11 +0200}, "503b3883497bfea6ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3883497bfea6ba000001", "at"=>2012-08-27 11:06:11 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:11 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3883497bfea6ba00000b", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}]}} flags=[] (0.2587ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3883497bfea6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3883497bfea6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4783ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3883497bfea6ba000005"} update={"$set"=>{"acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:11 UTC}, "503b3883497bfea6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3883497bfea6ba000003"=>"r"}, "invited"=>"503b3883497bfea6ba000001", "at"=>2012-08-27 11:06:11 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3883497bfea6ba000003"], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:11 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3883497bfea6ba00000e", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3883497bfea6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3883497bfea6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4838ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3883497bfea6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3883497bfea6ba000007"} update={"$set"=>{"acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:11 UTC}, "503b3883497bfea6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3883497bfea6ba000005"=>"r"}, "invited"=>"503b3883497bfea6ba000001", "at"=>2012-08-27 11:06:11 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3883497bfea6ba000005"], "pos"=>99, "acl"=>{"503b3883497bfea6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:11 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3883497bfea6ba000011", "at"=>2012-08-27 09:06:11 UTC, "changes"=>{}, "user_id"=>"503b3883497bfea6ba000001"}]}]}} flags=[] (0.3352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3883497bfea6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3883497bfea6ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3028ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6838ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1659ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38a2497bfea9ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8a59", "confirmation_key"=>"942632faf46ccb089712"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38a2497bfea9ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cd2f", "confirmation_key"=>"3ab68a114b00d70baf47"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38a2497bfea9ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:42 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba000004", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}] flags=[] (0.1709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38a2497bfea9ba000005", "version"=>1, "label_ids"=>["503b38a2497bfea9ba000003"], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:42 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba000006", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38a2497bfea9ba000007", "version"=>1, "label_ids"=>["503b38a2497bfea9ba000005"], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:42 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba000008", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38a2497bfea9ba000001.privileges"=>/r\w*/, "label_ids"=>"503b38a2497bfea9ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38a2497bfea9ba000001.privileges"=>/r\w*/, "label_ids"=>"503b38a2497bfea9ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5529ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38a2497bfea9ba000003"} update={"$set"=>{"acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:06:42 +0200}, "503b38a2497bfea9ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b38a2497bfea9ba000001", "at"=>2012-08-27 11:06:42 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:42 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba00000b", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38a2497bfea9ba000001.privileges"=>/r\w*/, "label_ids"=>"503b38a2497bfea9ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38a2497bfea9ba000005"} update={"$set"=>{"acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:42 UTC}, "503b38a2497bfea9ba000002"=>{"privileges"=>"r", "inherited"=>{"503b38a2497bfea9ba000003"=>"r"}, "invited"=>"503b38a2497bfea9ba000001", "at"=>2012-08-27 11:06:42 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38a2497bfea9ba000003"], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:42 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba00000e", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38a2497bfea9ba000001.privileges"=>/r\w*/, "label_ids"=>"503b38a2497bfea9ba000005"} flags=[] limit=0 skip=0 fields=nil (0.5698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38a2497bfea9ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4861ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38a2497bfea9ba000007"} update={"$set"=>{"acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:42 UTC}, "503b38a2497bfea9ba000002"=>{"privileges"=>"r", "inherited"=>{"503b38a2497bfea9ba000005"=>"r"}, "invited"=>"503b38a2497bfea9ba000001", "at"=>2012-08-27 11:06:42 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38a2497bfea9ba000005"], "pos"=>99, "acl"=>{"503b38a2497bfea9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:06:42 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38a2497bfea9ba000011", "at"=>2012-08-27 09:06:42 UTC, "changes"=>{}, "user_id"=>"503b38a2497bfea9ba000001"}]}]}} flags=[] (0.5128ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38a2497bfea9ba000001.privileges"=>/r\w*/, "label_ids"=>"503b38a2497bfea9ba000007"} flags=[] limit=0 skip=0 fields=nil (62.9082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b38a2497bfea9ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6611ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1738ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38b4497bfeaaba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c253", "confirmation_key"=>"3706c54745a24d438c0d"}] flags=[] (0.0913ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38b4497bfeaaba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3c6a", "confirmation_key"=>"759a5639c106f6ca2ef8"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4268ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38b4497bfeaaba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:00 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba000004", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}] flags=[] (0.1662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38b4497bfeaaba000005", "version"=>1, "label_ids"=>["503b38b4497bfeaaba000003"], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:00 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba000006", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38b4497bfeaaba000007", "version"=>1, "label_ids"=>["503b38b4497bfeaaba000005"], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:00 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba000008", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38b4497bfeaaba000001.privileges"=>/r\w*/, "label_ids"=>"503b38b4497bfeaaba000003"} flags=[] limit=0 skip=0 fields=nil (1.5361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38b4497bfeaaba000001.privileges"=>/r\w*/, "label_ids"=>"503b38b4497bfeaaba000005"} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5641ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38b4497bfeaaba000003"} update={"$set"=>{"acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:00 +0200}, "503b38b4497bfeaaba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b38b4497bfeaaba000001", "at"=>2012-08-27 11:07:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:00 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba00000b", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}]}} flags=[] (0.2422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38b4497bfeaaba000001.privileges"=>/r\w*/, "label_ids"=>"503b38b4497bfeaaba000003"} flags=[] limit=0 skip=0 fields=nil (0.5012ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5610ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38b4497bfeaaba000005"} update={"$set"=>{"acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:00 UTC}, "503b38b4497bfeaaba000002"=>{"privileges"=>"r", "inherited"=>{"503b38b4497bfeaaba000003"=>"r"}, "invited"=>"503b38b4497bfeaaba000001", "at"=>2012-08-27 11:07:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38b4497bfeaaba000003"], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:00 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba00000e", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}]}} flags=[] (0.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38b4497bfeaaba000001.privileges"=>/r\w*/, "label_ids"=>"503b38b4497bfeaaba000005"} flags=[] limit=0 skip=0 fields=nil (0.4752ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38b4497bfeaaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38b4497bfeaaba000007"} update={"$set"=>{"acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:00 UTC}, "503b38b4497bfeaaba000002"=>{"privileges"=>"r", "inherited"=>{"503b38b4497bfeaaba000005"=>"r"}, "invited"=>"503b38b4497bfeaaba000001", "at"=>2012-08-27 11:07:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38b4497bfeaaba000005"], "pos"=>99, "acl"=>{"503b38b4497bfeaaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:00 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38b4497bfeaaba000011", "at"=>2012-08-27 09:07:00 UTC, "changes"=>{}, "user_id"=>"503b38b4497bfeaaba000001"}]}]}} flags=[] (0.2990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38b4497bfeaaba000001.privileges"=>/r\w*/, "label_ids"=>"503b38b4497bfeaaba000007"} flags=[] limit=0 skip=0 fields=nil (0.3037ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b38b4497bfeaaba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3228ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7248ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38bd497bfeabba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38bd497bfeabba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"399d", "confirmation_key"=>"34e04731c13a3fbcfdc4"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b38bd497bfeabba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b38bd497bfeabba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1d1e", "confirmation_key"=>"3b5ac2aef4a28d26bae1"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4287ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38bd497bfeabba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:09 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38bd497bfeabba000004", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38bd497bfeabba000005", "version"=>1, "label_ids"=>["503b38bd497bfeabba000003"], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:09 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38bd497bfeabba000006", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b38bd497bfeabba000007", "version"=>1, "label_ids"=>["503b38bd497bfeabba000005"], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:09 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38bd497bfeabba000008", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38bd497bfeabba000001.privileges"=>/r\w*/, "label_ids"=>"503b38bd497bfeabba000003"} flags=[] limit=0 skip=0 fields=nil (0.5341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38bd497bfeabba000001.privileges"=>/r\w*/, "label_ids"=>"503b38bd497bfeabba000005"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6511ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38bd497bfeabba000003"} update={"$set"=>{"acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:09 +0200}, "503b38bd497bfeabba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b38bd497bfeabba000001", "at"=>2012-08-27 11:07:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:09 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b38be497bfeabba00000b", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38bd497bfeabba000001.privileges"=>/r\w*/, "label_ids"=>"503b38bd497bfeabba000003"} flags=[] limit=0 skip=0 fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4900ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38bd497bfeabba000005"} update={"$set"=>{"acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:09 UTC}, "503b38bd497bfeabba000002"=>{"privileges"=>"r", "inherited"=>{"503b38bd497bfeabba000003"=>"r"}, "invited"=>"503b38bd497bfeabba000001", "at"=>2012-08-27 11:07:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38bd497bfeabba000003"], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:09 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b38be497bfeabba00000e", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38bd497bfeabba000001.privileges"=>/r\w*/, "label_ids"=>"503b38bd497bfeabba000005"} flags=[] limit=0 skip=0 fields=nil (0.4859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b38bd497bfeabba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b38bd497bfeabba000007"} update={"$set"=>{"acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:09 UTC}, "503b38bd497bfeabba000002"=>{"privileges"=>"r", "inherited"=>{"503b38bd497bfeabba000005"=>"r"}, "invited"=>"503b38bd497bfeabba000001", "at"=>2012-08-27 11:07:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b38bd497bfeabba000005"], "pos"=>99, "acl"=>{"503b38bd497bfeabba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:07:09 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b38be497bfeabba000011", "at"=>2012-08-27 09:07:09 UTC, "changes"=>{}, "user_id"=>"503b38bd497bfeabba000001"}]}]}} flags=[] (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b38bd497bfeabba000001.privileges"=>/r\w*/, "label_ids"=>"503b38bd497bfeabba000007"} flags=[] limit=0 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b38bd497bfeabba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b394a497bfedcba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4153ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b394a497bfedcba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5180", "confirmation_key"=>"bbc5ef5a356f342648e8"}] flags=[] (0.0942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b394a497bfedcba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b394a497bfedcba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"003e", "confirmation_key"=>"b6302478a345866e78ee"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b394a497bfedcba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:30 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b394a497bfedcba000004", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}] flags=[] (0.1681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b394a497bfedcba000005", "version"=>1, "label_ids"=>["503b394a497bfedcba000003"], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:30 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b394a497bfedcba000006", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b394a497bfedcba000007", "version"=>1, "label_ids"=>["503b394a497bfedcba000005"], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:30 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b394a497bfedcba000008", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b394a497bfedcba000001.privileges"=>/r\w*/, "label_ids"=>"503b394a497bfedcba000003"} flags=[] limit=0 skip=0 fields=nil (0.5469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b394a497bfedcba000001.privileges"=>/r\w*/, "label_ids"=>"503b394a497bfedcba000005"} flags=[] limit=0 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b394a497bfedcba000003"} update={"$set"=>{"acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:30 +0200}, "503b394a497bfedcba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b394a497bfedcba000001", "at"=>2012-08-27 11:09:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:30 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b394a497bfedcba00000b", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}]}} flags=[] (0.2513ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b394a497bfedcba000001.privileges"=>/r\w*/, "label_ids"=>"503b394a497bfedcba000003"} flags=[] limit=0 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b394a497bfedcba000005"} update={"$set"=>{"acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:30 UTC}, "503b394a497bfedcba000002"=>{"privileges"=>"r", "inherited"=>{"503b394a497bfedcba000003"=>"r"}, "invited"=>"503b394a497bfedcba000001", "at"=>2012-08-27 11:09:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b394a497bfedcba000003"], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:30 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b394a497bfedcba00000e", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}]}} flags=[] (0.2170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b394a497bfedcba000001.privileges"=>/r\w*/, "label_ids"=>"503b394a497bfedcba000005"} flags=[] limit=0 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b394a497bfedcba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b394a497bfedcba000007"} update={"$set"=>{"acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:30 UTC}, "503b394a497bfedcba000002"=>{"privileges"=>"r", "inherited"=>{"503b394a497bfedcba000005"=>"r"}, "invited"=>"503b394a497bfedcba000001", "at"=>2012-08-27 11:09:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b394a497bfedcba000005"], "pos"=>99, "acl"=>{"503b394a497bfedcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:30 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b394a497bfedcba000011", "at"=>2012-08-27 09:09:30 UTC, "changes"=>{}, "user_id"=>"503b394a497bfedcba000001"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b394a497bfedcba000001.privileges"=>/r\w*/, "label_ids"=>"503b394a497bfedcba000007"} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b394a497bfedcba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b394a497bfedcba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1922ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3962497bfeddba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3962497bfeddba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"836c", "confirmation_key"=>"22a3eafc4a0f1825316d"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3962497bfeddba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3962497bfeddba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"42d8", "confirmation_key"=>"ed22f32fae03ab72118b"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3962497bfeddba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:54 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3962497bfeddba000004", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}] flags=[] (0.1903ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3962497bfeddba000005", "version"=>1, "label_ids"=>["503b3962497bfeddba000003"], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:54 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3962497bfeddba000006", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3962497bfeddba000007", "version"=>1, "label_ids"=>["503b3962497bfeddba000005"], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:54 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3962497bfeddba000008", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3962497bfeddba000001.privileges"=>/r\w*/, "label_ids"=>"503b3962497bfeddba000003"} flags=[] limit=0 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3962497bfeddba000001.privileges"=>/r\w*/, "label_ids"=>"503b3962497bfeddba000005"} flags=[] limit=0 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4959ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3962497bfeddba000003"} update={"$set"=>{"acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:54 +0200}, "503b3962497bfeddba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3962497bfeddba000001", "at"=>2012-08-27 11:09:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3962497bfeddba00000b", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3962497bfeddba000001.privileges"=>/r\w*/, "label_ids"=>"503b3962497bfeddba000003"} flags=[] limit=0 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4752ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3962497bfeddba000005"} update={"$set"=>{"acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:54 UTC}, "503b3962497bfeddba000002"=>{"privileges"=>"r", "inherited"=>{"503b3962497bfeddba000003"=>"r"}, "invited"=>"503b3962497bfeddba000001", "at"=>2012-08-27 11:09:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3962497bfeddba000003"], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3962497bfeddba00000e", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}]}} flags=[] (0.2408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3962497bfeddba000001.privileges"=>/r\w*/, "label_ids"=>"503b3962497bfeddba000005"} flags=[] limit=0 skip=0 fields=nil (0.4802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3962497bfeddba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3962497bfeddba000007"} update={"$set"=>{"acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:54 UTC}, "503b3962497bfeddba000002"=>{"privileges"=>"r", "inherited"=>{"503b3962497bfeddba000005"=>"r"}, "invited"=>"503b3962497bfeddba000001", "at"=>2012-08-27 11:09:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3962497bfeddba000005"], "pos"=>99, "acl"=>{"503b3962497bfeddba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:09:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3962497bfeddba000011", "at"=>2012-08-27 09:09:54 UTC, "changes"=>{}, "user_id"=>"503b3962497bfeddba000001"}]}]}} flags=[] (0.2682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3962497bfeddba000001.privileges"=>/r\w*/, "label_ids"=>"503b3962497bfeddba000007"} flags=[] limit=0 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3962497bfeddba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3962497bfeddba000007"} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3962497bfeddba000005"} flags=[] limit=-1 skip=0 fields=nil (0.7112ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6931ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1638ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0467ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ae0497bfedfba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d6c8", "confirmation_key"=>"d865e934fa64aa05e61f"}] flags=[] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3269ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ae0497bfedfba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"0c4a", "confirmation_key"=>"9df3f2a8de8449b9dc8e"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3471ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ae0497bfedfba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba000004", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ae0497bfedfba000005", "version"=>1, "label_ids"=>["503b3ae0497bfedfba000003"], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba000006", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3071ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ae0497bfedfba000007", "version"=>1, "label_ids"=>["503b3ae0497bfedfba000005"], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba000008", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}] flags=[] (0.1297ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ae0497bfedfba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ae0497bfedfba000003"} flags=[] limit=0 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ae0497bfedfba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ae0497bfedfba000005"} flags=[] limit=0 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4671ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ae0497bfedfba000003"} update={"$set"=>{"acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:16 +0200}, "503b3ae0497bfedfba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ae0497bfedfba000001", "at"=>2012-08-27 11:16:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba00000b", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}]}} flags=[] (0.2439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ae0497bfedfba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ae0497bfedfba000003"} flags=[] limit=0 skip=0 fields=nil (0.4952ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ae0497bfedfba000005"} update={"$set"=>{"acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:16 UTC}, "503b3ae0497bfedfba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ae0497bfedfba000003"=>"r"}, "invited"=>"503b3ae0497bfedfba000001", "at"=>2012-08-27 11:16:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ae0497bfedfba000003"], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba00000e", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ae0497bfedfba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ae0497bfedfba000005"} flags=[] limit=0 skip=0 fields=nil (0.4778ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ae0497bfedfba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ae0497bfedfba000007"} update={"$set"=>{"acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:16 UTC}, "503b3ae0497bfedfba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ae0497bfedfba000005"=>"r"}, "invited"=>"503b3ae0497bfedfba000001", "at"=>2012-08-27 11:16:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ae0497bfedfba000005"], "pos"=>99, "acl"=>{"503b3ae0497bfedfba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ae0497bfedfba000011", "at"=>2012-08-27 09:16:16 UTC, "changes"=>{}, "user_id"=>"503b3ae0497bfedfba000001"}]}]}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ae0497bfedfba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ae0497bfedfba000007"} flags=[] limit=0 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ae0497bfedfba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ae0497bfedfba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ae0497bfedfba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6890ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1628ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3af9497bfee5ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6556", "confirmation_key"=>"74fb0636cde42cddb2eb"}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3af9497bfee5ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d88e", "confirmation_key"=>"50dafe92662b912d17d9"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3af9497bfee5ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:41 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba000004", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3af9497bfee5ba000005", "version"=>1, "label_ids"=>["503b3af9497bfee5ba000003"], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:41 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba000006", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3af9497bfee5ba000007", "version"=>1, "label_ids"=>["503b3af9497bfee5ba000005"], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:41 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba000008", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3858ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5362ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3af9497bfee5ba000003"} update={"$set"=>{"acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:16:41 +0200}, "503b3af9497bfee5ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3af9497bfee5ba000001", "at"=>2012-08-27 11:16:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:41 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba00000b", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4878ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3af9497bfee5ba000005"} update={"$set"=>{"acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:41 UTC}, "503b3af9497bfee5ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3af9497bfee5ba000003"=>"r"}, "invited"=>"503b3af9497bfee5ba000001", "at"=>2012-08-27 11:16:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3af9497bfee5ba000003"], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:41 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba00000e", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000005"} flags=[] limit=0 skip=0 fields=nil (0.5629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3af9497bfee5ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3af9497bfee5ba000007"} update={"$set"=>{"acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:41 UTC}, "503b3af9497bfee5ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3af9497bfee5ba000005"=>"r"}, "invited"=>"503b3af9497bfee5ba000001", "at"=>2012-08-27 11:16:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3af9497bfee5ba000005"], "pos"=>99, "acl"=>{"503b3af9497bfee5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:16:41 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3af9497bfee5ba000011", "at"=>2012-08-27 09:16:41 UTC, "changes"=>{}, "user_id"=>"503b3af9497bfee5ba000001"}]}]}} flags=[] (0.4029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3af9497bfee5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3af9497bfee5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.7200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3af9497bfee5ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3af9497bfee5ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6568ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3af9497bfee5ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5147ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6721ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b35497bfee6ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8d7a", "confirmation_key"=>"a2e033269b5edda3ee59"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4067ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b35497bfee6ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1403", "confirmation_key"=>"f741c55cd9d20aab3dc7"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b35497bfee6ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:41 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba000004", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b35497bfee6ba000005", "version"=>1, "label_ids"=>["503b3b35497bfee6ba000003"], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:41 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba000006", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3169ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b35497bfee6ba000007", "version"=>1, "label_ids"=>["503b3b35497bfee6ba000005"], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:41 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba000008", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6258ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b35497bfee6ba000003"} update={"$set"=>{"acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:41 +0200}, "503b3b35497bfee6ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3b35497bfee6ba000001", "at"=>2012-08-27 11:17:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:41 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba00000b", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}]}} flags=[] (0.2651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b35497bfee6ba000005"} update={"$set"=>{"acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:41 UTC}, "503b3b35497bfee6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b35497bfee6ba000003"=>"r"}, "invited"=>"503b3b35497bfee6ba000001", "at"=>2012-08-27 11:17:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b35497bfee6ba000003"], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:41 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba00000e", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.5009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b35497bfee6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6638ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b35497bfee6ba000007"} update={"$set"=>{"acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:41 UTC}, "503b3b35497bfee6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b35497bfee6ba000005"=>"r"}, "invited"=>"503b3b35497bfee6ba000001", "at"=>2012-08-27 11:17:41 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b35497bfee6ba000005"], "pos"=>99, "acl"=>{"503b3b35497bfee6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:41 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b35497bfee6ba000011", "at"=>2012-08-27 09:17:41 UTC, "changes"=>{}, "user_id"=>"503b3b35497bfee6ba000001"}]}]}} flags=[] (0.3762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.7601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.7319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b35497bfee6ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b35497bfee6ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b35497bfee6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b35497bfee6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.7970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b35497bfee6ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6123ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0467ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b42497bfee7ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1298", "confirmation_key"=>"4f6e58588cb06487e7ba"}] flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b42497bfee7ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"14f9", "confirmation_key"=>"c8bbd28b2a17022b7eff"}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5589ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b42497bfee7ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:54 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b42497bfee7ba000004", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}] flags=[] (0.2019ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b42497bfee7ba000005", "version"=>1, "label_ids"=>["503b3b42497bfee7ba000003"], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:54 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b42497bfee7ba000006", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}] flags=[] (0.1712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b42497bfee7ba000007", "version"=>1, "label_ids"=>["503b3b42497bfee7ba000005"], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:54 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b42497bfee7ba000008", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5519ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b42497bfee7ba000003"} update={"$set"=>{"acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:17:54 +0200}, "503b3b42497bfee7ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3b42497bfee7ba000001", "at"=>2012-08-27 11:17:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b43497bfee7ba00000b", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}]}} flags=[] (0.3970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5021ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b42497bfee7ba000005"} update={"$set"=>{"acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:54 UTC}, "503b3b42497bfee7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b42497bfee7ba000003"=>"r"}, "invited"=>"503b3b42497bfee7ba000001", "at"=>2012-08-27 11:17:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b42497bfee7ba000003"], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b43497bfee7ba00000e", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}]}} flags=[] (0.2389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b42497bfee7ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b42497bfee7ba000007"} update={"$set"=>{"acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:54 UTC}, "503b3b42497bfee7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b42497bfee7ba000005"=>"r"}, "invited"=>"503b3b42497bfee7ba000001", "at"=>2012-08-27 11:17:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b42497bfee7ba000005"], "pos"=>99, "acl"=>{"503b3b42497bfee7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:17:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b43497bfee7ba000011", "at"=>2012-08-27 09:17:54 UTC, "changes"=>{}, "user_id"=>"503b3b42497bfee7ba000001"}]}]}} flags=[] (0.2687ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000007"} flags=[] limit=0 skip=0 fields=nil (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b42497bfee7ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.2890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b42497bfee7ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b42497bfee7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b42497bfee7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b42497bfee7ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7131ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b54497bfee8ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"46a2", "confirmation_key"=>"d836d19fa878a2acb3b9"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b54497bfee8ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b719", "confirmation_key"=>"5e49cb97dac5997db84e"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b54497bfee8ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba000004", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}] flags=[] (0.1628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b54497bfee8ba000005", "version"=>1, "label_ids"=>["503b3b54497bfee8ba000003"], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba000006", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3374ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b54497bfee8ba000007", "version"=>1, "label_ids"=>["503b3b54497bfee8ba000005"], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:12 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba000008", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b54497bfee8ba000003"} update={"$set"=>{"acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:12 +0200}, "503b3b54497bfee8ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3b54497bfee8ba000001", "at"=>2012-08-27 11:18:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba00000b", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b54497bfee8ba000005"} update={"$set"=>{"acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:12 UTC}, "503b3b54497bfee8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b54497bfee8ba000003"=>"r"}, "invited"=>"503b3b54497bfee8ba000001", "at"=>2012-08-27 11:18:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b54497bfee8ba000003"], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba00000e", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}]}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b54497bfee8ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6599ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b54497bfee8ba000007"} update={"$set"=>{"acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:12 UTC}, "503b3b54497bfee8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b54497bfee8ba000005"=>"r"}, "invited"=>"503b3b54497bfee8ba000001", "at"=>2012-08-27 11:18:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b54497bfee8ba000005"], "pos"=>99, "acl"=>{"503b3b54497bfee8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b54497bfee8ba000011", "at"=>2012-08-27 09:18:12 UTC, "changes"=>{}, "user_id"=>"503b3b54497bfee8ba000001"}]}]}} flags=[] (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.2272ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b54497bfee8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b54497bfee8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b54497bfee8ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3b54497bfee8ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6671ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1731ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b75497bfee9ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b75497bfee9ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c87e", "confirmation_key"=>"352d9ed52fc1046266f7"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b75497bfee9ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3006ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b75497bfee9ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5728", "confirmation_key"=>"822e76fa87bad1a814d8"}] flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b75497bfee9ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b75497bfee9ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b75497bfee9ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b75497bfee9ba000004", "at"=>2012-08-27 09:18:45 UTC, "changes"=>{}, "user_id"=>"503b3b75497bfee9ba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7193ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b82497bfeeaba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"193b", "confirmation_key"=>"4d8cbd84a35e19d0cb15"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3b82497bfeeaba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9af9", "confirmation_key"=>"9bd7095ea54626414eb8"}] flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b82497bfeeaba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:58 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba000004", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}] flags=[] (0.1700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000003"} flags=[] limit=0 skip=0 fields=nil (0.3669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b82497bfeeaba000005", "version"=>1, "label_ids"=>["503b3b82497bfeeaba000003"], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:58 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba000006", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000005"} flags=[] limit=0 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3b82497bfeeaba000007", "version"=>1, "label_ids"=>["503b3b82497bfeeaba000005"], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:58 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba000008", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000007"} flags=[] limit=0 skip=0 fields=nil (0.3803ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000003"} flags=[] limit=0 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000005"} flags=[] limit=0 skip=0 fields=nil (0.3169ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6292ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b82497bfeeaba000003"} update={"$set"=>{"acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:58 +0200}, "503b3b82497bfeeaba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3b82497bfeeaba000001", "at"=>2012-08-27 11:18:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba00000b", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}]}} flags=[] (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000003"} flags=[] limit=0 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5121ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b82497bfeeaba000005"} update={"$set"=>{"acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}, "503b3b82497bfeeaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b82497bfeeaba000003"=>"r"}, "invited"=>"503b3b82497bfeeaba000001", "at"=>2012-08-27 11:18:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b82497bfeeaba000003"], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba00000e", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}]}} flags=[] (0.2272ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000005"} flags=[] limit=0 skip=0 fields=nil (0.7560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5708ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b82497bfeeaba000007"} update={"$set"=>{"acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}, "503b3b82497bfeeaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b82497bfeeaba000005"=>"r"}, "invited"=>"503b3b82497bfeeaba000001", "at"=>2012-08-27 11:18:58 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3b82497bfeeaba000005"], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba000011", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}]}} flags=[] (0.3889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000007"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3b82497bfeeaba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8218ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3b82497bfeeaba000003"} update={"$set"=>{"acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:18:58 +0200}, "503b3b82497bfeeaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3b82497bfeeaba000005"=>"r"}, "invited"=>"503b3b82497bfeeaba000001", "at"=>2012-08-27 11:18:58 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3b82497bfeeaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:18:58 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3b82497bfeeaba00000b", "at"=>2012-08-27 09:18:58 UTC, "changes"=>{}, "user_id"=>"503b3b82497bfeeaba000001"}]}]}} flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3b82497bfeeaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3b82497bfeeaba000003"} flags=[] limit=0 skip=0 fields=nil (0.5279ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6552ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1559ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ba7497bfeefba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"342e", "confirmation_key"=>"23c6485642d1042225d6"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ba7497bfeefba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"dd27", "confirmation_key"=>"247202175186421e70bd"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4218ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ba7497bfeefba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:35 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba000004", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}] flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000003"} flags=[] limit=0 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ba7497bfeefba000005", "version"=>1, "label_ids"=>["503b3ba7497bfeefba000003"], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:35 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba000006", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000005"} flags=[] limit=0 skip=0 fields=nil (0.3707ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ba7497bfeefba000007", "version"=>1, "label_ids"=>["503b3ba7497bfeefba000005"], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:35 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba000008", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000007"} flags=[] limit=0 skip=0 fields=nil (0.2911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000003"} flags=[] limit=0 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000005"} flags=[] limit=0 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5410ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ba7497bfeefba000003"} update={"$set"=>{"acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:35 +0200}, "503b3ba7497bfeefba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ba7497bfeefba000001", "at"=>2012-08-27 11:19:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba00000b", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}]}} flags=[] (0.2630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000003"} flags=[] limit=0 skip=0 fields=nil (0.5088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ba7497bfeefba000005"} update={"$set"=>{"acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:35 UTC}, "503b3ba7497bfeefba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ba7497bfeefba000003"=>"r"}, "invited"=>"503b3ba7497bfeefba000001", "at"=>2012-08-27 11:19:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ba7497bfeefba000003"], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba00000e", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000005"} flags=[] limit=0 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ba7497bfeefba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6609ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ba7497bfeefba000007"} update={"$set"=>{"acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:35 UTC}, "503b3ba7497bfeefba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ba7497bfeefba000005"=>"r"}, "invited"=>"503b3ba7497bfeefba000001", "at"=>2012-08-27 11:19:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ba7497bfeefba000005"], "pos"=>99, "acl"=>{"503b3ba7497bfeefba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ba7497bfeefba000011", "at"=>2012-08-27 09:19:35 UTC, "changes"=>{}, "user_id"=>"503b3ba7497bfeefba000001"}]}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ba7497bfeefba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ba7497bfeefba000007"} flags=[] limit=0 skip=0 fields=nil (0.2768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ba7497bfeefba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ba7497bfeefba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ba7497bfeefba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6349ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6540ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1831ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3649ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3bb7497bfef0ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6690", "confirmation_key"=>"59b8a4bb4297777fcf49"}] flags=[] (0.1023ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3bb7497bfef0ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3e8c", "confirmation_key"=>"944141fa0ef0e45de886"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bb7497bfef0ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba000004", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}] flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000003"} flags=[] limit=0 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bb7497bfef0ba000005", "version"=>1, "label_ids"=>["503b3bb7497bfef0ba000003"], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba000006", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3142ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bb7497bfef0ba000007", "version"=>1, "label_ids"=>["503b3bb7497bfef0ba000005"], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:51 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba000008", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000007"} flags=[] limit=0 skip=0 fields=nil (0.2811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5531ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bb7497bfef0ba000003"} update={"$set"=>{"acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:19:51 +0200}, "503b3bb7497bfef0ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3bb7497bfef0ba000001", "at"=>2012-08-27 11:19:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba00000b", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}]}} flags=[] (0.2820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bb7497bfef0ba000005"} update={"$set"=>{"acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:51 UTC}, "503b3bb7497bfef0ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3bb7497bfef0ba000003"=>"r"}, "invited"=>"503b3bb7497bfef0ba000001", "at"=>2012-08-27 11:19:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3bb7497bfef0ba000003"], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba00000e", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}]}} flags=[] (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000005"} flags=[] limit=0 skip=0 fields=nil (0.5622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bb7497bfef0ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5600ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bb7497bfef0ba000007"} update={"$set"=>{"acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:51 UTC}, "503b3bb7497bfef0ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3bb7497bfef0ba000005"=>"r"}, "invited"=>"503b3bb7497bfef0ba000001", "at"=>2012-08-27 11:19:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3bb7497bfef0ba000005"], "pos"=>99, "acl"=>{"503b3bb7497bfef0ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:19:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3bb7497bfef0ba000011", "at"=>2012-08-27 09:19:51 UTC, "changes"=>{}, "user_id"=>"503b3bb7497bfef0ba000001"}]}]}} flags=[] (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bb7497bfef0ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bb7497bfef0ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bb7497bfef0ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bb7497bfef0ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6938ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bb7497bfef0ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6828ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1721ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3bfc497bfef1ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2d43", "confirmation_key"=>"641d4d9005fa451b51d4"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4017ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3bfc497bfef1ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"04cd", "confirmation_key"=>"3c62c98f82fc9d4be6c5"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4227ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bfc497bfef1ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:00 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba000004", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bfc497bfef1ba000005", "version"=>1, "label_ids"=>["503b3bfc497bfef1ba000003"], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:00 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba000006", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3059ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3bfc497bfef1ba000007", "version"=>1, "label_ids"=>["503b3bfc497bfef1ba000005"], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:00 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba000008", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bfc497bfef1ba000003"} update={"$set"=>{"acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:00 +0200}, "503b3bfc497bfef1ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3bfc497bfef1ba000001", "at"=>2012-08-27 11:21:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:00 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba00000b", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5569ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bfc497bfef1ba000005"} update={"$set"=>{"acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:00 UTC}, "503b3bfc497bfef1ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3bfc497bfef1ba000003"=>"r"}, "invited"=>"503b3bfc497bfef1ba000001", "at"=>2012-08-27 11:21:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3bfc497bfef1ba000003"], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:00 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba00000e", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}]}} flags=[] (0.2279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3bfc497bfef1ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6309ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3bfc497bfef1ba000007"} update={"$set"=>{"acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:00 UTC}, "503b3bfc497bfef1ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3bfc497bfef1ba000005"=>"r"}, "invited"=>"503b3bfc497bfef1ba000001", "at"=>2012-08-27 11:21:00 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3bfc497bfef1ba000005"], "pos"=>99, "acl"=>{"503b3bfc497bfef1ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:00 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3bfc497bfef1ba000011", "at"=>2012-08-27 09:21:00 UTC, "changes"=>{}, "user_id"=>"503b3bfc497bfef1ba000001"}]}]}} flags=[] (0.4148ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.7520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bfc497bfef1ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bfc497bfef1ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3bfc497bfef1ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3bfc497bfef1ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3bfc497bfef1ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6778ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1528ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c14497bfef2ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a1b8", "confirmation_key"=>"068ff139534ce19d5ea1"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3521ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c14497bfef2ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8420", "confirmation_key"=>"ecc36475ec3995fbe7b2"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c14497bfef2ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba000004", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}] flags=[] (0.1729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c14497bfef2ba000005", "version"=>1, "label_ids"=>["503b3c14497bfef2ba000003"], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:24 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba000006", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c14497bfef2ba000007", "version"=>1, "label_ids"=>["503b3c14497bfef2ba000005"], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:24 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba000008", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}] flags=[] (0.1278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c14497bfef2ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c14497bfef2ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c14497bfef2ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c14497bfef2ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5424ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c14497bfef2ba000003"} update={"$set"=>{"acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:24 +0200}, "503b3c14497bfef2ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c14497bfef2ba000001", "at"=>2012-08-27 11:21:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba00000b", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}]}} flags=[] (0.2553ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c14497bfef2ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c14497bfef2ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4728ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c14497bfef2ba000005"} update={"$set"=>{"acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:24 UTC}, "503b3c14497bfef2ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c14497bfef2ba000003"=>"r"}, "invited"=>"503b3c14497bfef2ba000001", "at"=>2012-08-27 11:21:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c14497bfef2ba000003"], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba00000e", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}]}} flags=[] (0.2201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c14497bfef2ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c14497bfef2ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c14497bfef2ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4003ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c14497bfef2ba000007"} update={"$set"=>{"acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:24 UTC}, "503b3c14497bfef2ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c14497bfef2ba000005"=>"r"}, "invited"=>"503b3c14497bfef2ba000001", "at"=>2012-08-27 11:21:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c14497bfef2ba000005"], "pos"=>99, "acl"=>{"503b3c14497bfef2ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:21:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c14497bfef2ba000011", "at"=>2012-08-27 09:21:24 UTC, "changes"=>{}, "user_id"=>"503b3c14497bfef2ba000001"}]}]}} flags=[] (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c14497bfef2ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c14497bfef2ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c14497bfef2ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c14497bfef2ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c14497bfef2ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6251ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1643ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c2b497bfef3ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c2b497bfef3ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9c0b", "confirmation_key"=>"6b69ef6fd58281a4f438"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c2b497bfef3ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4017ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c2b497bfef3ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5956", "confirmation_key"=>"c17d69f55b5614cecfd1"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c2b497bfef3ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c2b497bfef3ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c2b497bfef3ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:47 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c2b497bfef3ba000004", "at"=>2012-08-27 09:21:47 UTC, "changes"=>{}, "user_id"=>"503b3c2b497bfef3ba000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7150ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1826ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4683ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c39497bfef4ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d7b8", "confirmation_key"=>"49beb4de9a5e76682fc0"}] flags=[] (0.1018ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c39497bfef4ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a748", "confirmation_key"=>"cf3e0a7d18a0877ae1f3"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c39497bfef4ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba000004", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}] flags=[] (0.1707ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c39497bfef4ba000005", "version"=>1, "label_ids"=>["503b3c39497bfef4ba000003"], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba000006", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c39497bfef4ba000007", "version"=>1, "label_ids"=>["503b3c39497bfef4ba000005"], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:01 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba000008", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c39497bfef4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c39497bfef4ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4857ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c39497bfef4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c39497bfef4ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5431ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c39497bfef4ba000003"} update={"$set"=>{"acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:01 +0200}, "503b3c39497bfef4ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c39497bfef4ba000001", "at"=>2012-08-27 11:22:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba00000b", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}]}} flags=[] (0.2477ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c39497bfef4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c39497bfef4ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c39497bfef4ba000005"} update={"$set"=>{"acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:01 UTC}, "503b3c39497bfef4ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c39497bfef4ba000003"=>"r"}, "invited"=>"503b3c39497bfef4ba000001", "at"=>2012-08-27 11:22:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c39497bfef4ba000003"], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba00000e", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}]}} flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c39497bfef4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c39497bfef4ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c39497bfef4ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c39497bfef4ba000007"} update={"$set"=>{"acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:01 UTC}, "503b3c39497bfef4ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c39497bfef4ba000005"=>"r"}, "invited"=>"503b3c39497bfef4ba000001", "at"=>2012-08-27 11:22:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c39497bfef4ba000005"], "pos"=>99, "acl"=>{"503b3c39497bfef4ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c39497bfef4ba000011", "at"=>2012-08-27 09:22:01 UTC, "changes"=>{}, "user_id"=>"503b3c39497bfef4ba000001"}]}]}} flags=[] (0.2582ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c39497bfef4ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c39497bfef4ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3147ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c39497bfef4ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c39497bfef4ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c39497bfef4ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6371ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7110ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1657ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c59497bfef5ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a399", "confirmation_key"=>"d128fd33e351da5fc16f"}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c59497bfef5ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"88b2", "confirmation_key"=>"50b18594927deec47c7f"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c59497bfef5ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba000004", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4172ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c59497bfef5ba000005", "version"=>1, "label_ids"=>["503b3c59497bfef5ba000003"], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:33 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba000006", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c59497bfef5ba000007", "version"=>1, "label_ids"=>["503b3c59497bfef5ba000005"], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:33 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba000008", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}] flags=[] (0.1590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4537ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c59497bfef5ba000003"} update={"$set"=>{"acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:33 +0200}, "503b3c59497bfef5ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c59497bfef5ba000001", "at"=>2012-08-27 11:22:33 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba00000b", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}]}} flags=[] (0.2742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5662ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c59497bfef5ba000005"} update={"$set"=>{"acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}, "503b3c59497bfef5ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c59497bfef5ba000003"=>"r"}, "invited"=>"503b3c59497bfef5ba000001", "at"=>2012-08-27 11:22:33 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c59497bfef5ba000003"], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba00000e", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}]}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c59497bfef5ba000007"} update={"$set"=>{"acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}, "503b3c59497bfef5ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c59497bfef5ba000005"=>"r"}, "invited"=>"503b3c59497bfef5ba000001", "at"=>2012-08-27 11:22:33 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c59497bfef5ba000005"], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba000011", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}]}} flags=[] (0.2959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000007"} flags=[] limit=0 skip=0 fields=nil (33.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c59497bfef5ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.7339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c59497bfef5ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.7780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c59497bfef5ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9038ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c59497bfef5ba000003"} update={"$set"=>{"acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:33 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c59497bfef5ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:22:33 UTC}, "503b3c59497bfef5ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c59497bfef5ba000001", "at"=>2012-08-27 09:22:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c59497bfef5ba000014", "at"=>2012-08-27 09:22:33 UTC, "changes"=>{}, "user_id"=>"503b3c59497bfef5ba000001"}]}]}} flags=[] (0.3572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c59497bfef5ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c59497bfef5ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c59497bfef5ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5293ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6609ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1869ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c87497bfef6ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"be1c", "confirmation_key"=>"b93b927528f8f553cc13"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c87497bfef6ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d99a", "confirmation_key"=>"299efb4f53e8bcfd0acb"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c87497bfef6ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:19 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba000004", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}] flags=[] (0.1662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c87497bfef6ba000005", "version"=>1, "label_ids"=>["503b3c87497bfef6ba000003"], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:19 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba000006", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3757ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c87497bfef6ba000007", "version"=>1, "label_ids"=>["503b3c87497bfef6ba000005"], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:19 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba000008", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}] flags=[] (0.1209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c87497bfef6ba000003"} update={"$set"=>{"acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:19 +0200}, "503b3c87497bfef6ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c87497bfef6ba000001", "at"=>2012-08-27 11:23:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba00000b", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4282ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c87497bfef6ba000005"} update={"$set"=>{"acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}, "503b3c87497bfef6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c87497bfef6ba000003"=>"r"}, "invited"=>"503b3c87497bfef6ba000001", "at"=>2012-08-27 11:23:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c87497bfef6ba000003"], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba00000e", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}]}} flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4764ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c87497bfef6ba000007"} update={"$set"=>{"acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}, "503b3c87497bfef6ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c87497bfef6ba000005"=>"r"}, "invited"=>"503b3c87497bfef6ba000001", "at"=>2012-08-27 11:23:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c87497bfef6ba000005"], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba000011", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}]}} flags=[] (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c87497bfef6ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c87497bfef6ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c87497bfef6ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6351ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c87497bfef6ba000003"} update={"$set"=>{"acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:19 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c87497bfef6ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:19 UTC}, "503b3c87497bfef6ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c87497bfef6ba000001", "at"=>2012-08-27 09:23:19 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c87497bfef6ba000014", "at"=>2012-08-27 09:23:19 UTC, "changes"=>{}, "user_id"=>"503b3c87497bfef6ba000001"}]}]}} flags=[] (0.4022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c87497bfef6ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c87497bfef6ba000003"} flags=[] limit=0 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c87497bfef6ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6561ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1798ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c97497bfef7ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1f4f", "confirmation_key"=>"1076309536a47cbbbf3a"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3c97497bfef7ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"74ba", "confirmation_key"=>"e428d60182b31b85f598"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c97497bfef7ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:35 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000004", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c97497bfef7ba000005", "version"=>1, "label_ids"=>["503b3c97497bfef7ba000003"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:35 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000006", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3111ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3c97497bfef7ba000007", "version"=>1, "label_ids"=>["503b3c97497bfef7ba000005"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:35 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000008", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5558ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000003"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:35 +0200}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 11:23:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba00000b", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4718ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000005"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c97497bfef7ba000003"=>"r"}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 11:23:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c97497bfef7ba000003"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba00000e", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.2129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3958ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000007"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c97497bfef7ba000005"=>"r"}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 11:23:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3c97497bfef7ba000005"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000011", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c97497bfef7ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c97497bfef7ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8628ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000003"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:35 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000014", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.4561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000003"} flags=[] limit=0 skip=0 fields=nil (0.7482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8020ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000005"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3c97497bfef7ba000003"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c97497bfef7ba000003"=>"r"}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba000017", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.4759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6604ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3c97497bfef7ba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3c97497bfef7ba000007"} update={"$set"=>{"acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3c97497bfef7ba000005"], "pos"=>99, "acl"=>{"503b3c97497bfef7ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:23:35 UTC}, "503b3c97497bfef7ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3c97497bfef7ba000005"=>"r"}, "invited"=>"503b3c97497bfef7ba000001", "at"=>2012-08-27 09:23:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3c97497bfef7ba00001a", "at"=>2012-08-27 09:23:35 UTC, "changes"=>{}, "user_id"=>"503b3c97497bfef7ba000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3c97497bfef7ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3c97497bfef7ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4227ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c97497bfef7ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3903ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3c97497bfef7ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7100ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4470ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4847ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3d25497bfef8ba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"06c8", "confirmation_key"=>"45dfd930496cb3adffcf"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3d25497bfef8ba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d05d", "confirmation_key"=>"4c4c9146d09bace57e12"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d25497bfef8ba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000004", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}] flags=[] (0.1841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d25497bfef8ba000005", "version"=>1, "label_ids"=>["503b3d25497bfef8ba000003"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000006", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}] flags=[] (0.1531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d25497bfef8ba000007", "version"=>1, "label_ids"=>["503b3d25497bfef8ba000005"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000008", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4773ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000003"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba00000b", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2663ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3541ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000005"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000003"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3d25497bfef8ba000003"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba00000e", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4592ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000007"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000005"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3d25497bfef8ba000005"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000011", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.4289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d25497bfef8ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d25497bfef8ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6537ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8452ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000003"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000014", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.4890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6559ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000005"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3d25497bfef8ba000003"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000003"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000017", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5848ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000007"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3d25497bfef8ba000005"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000005"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba00001a", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d25497bfef8ba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d25497bfef8ba000007"} flags=[] limit=-1 skip=0 fields=nil (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7541ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000003"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}, "503b3d25497bfef8ba000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba00001d", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000003"} flags=[] limit=0 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6249ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000005"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000003"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3d25497bfef8ba000003"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000020", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000005"} flags=[] limit=0 skip=0 fields=nil (0.6061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5901ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d25497bfef8ba000007"} update={"$set"=>{"acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}, "503b3d25497bfef8ba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d25497bfef8ba000005"=>"r"}, "invited"=>"503b3d25497bfef8ba000001", "at"=>2012-08-27 11:25:57 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3d25497bfef8ba000005"], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:25:57 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000023", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}]}} flags=[] (0.3099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d25497bfef8ba000007"} flags=[] limit=0 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d25497bfef8ba000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d25497bfef8ba000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d25497bfef8ba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:25:57 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3d25497bfef8ba000025", "at"=>2012-08-27 09:25:57 UTC, "changes"=>{}, "user_id"=>"503b3d25497bfef8ba000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3d25497bfef8ba000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5019ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6709ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3941ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3d9a497bfefaba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"fd20", "confirmation_key"=>"bae88c257799c5c8343e"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3d9a497bfefaba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c0a0", "confirmation_key"=>"c3aa9d327acefc79491e"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d9a497bfefaba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000004", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}] flags=[] (0.1831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d9a497bfefaba000005", "version"=>1, "label_ids"=>["503b3d9a497bfefaba000003"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000006", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d9a497bfefaba000007", "version"=>1, "label_ids"=>["503b3d9a497bfefaba000005"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000008", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000003"} flags=[] limit=0 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000005"} flags=[] limit=0 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5529ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000003"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba00000b", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000003"} flags=[] limit=0 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000005"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000003"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3d9a497bfefaba000003"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba00000e", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000005"} flags=[] limit=0 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000007"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000005"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3d9a497bfefaba000005"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000011", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000007"} flags=[] limit=0 skip=0 fields=nil (0.3629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d9a497bfefaba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d9a497bfefaba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7830ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000003"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000014", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000003"} flags=[] limit=0 skip=0 fields=nil (0.7360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8597ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000005"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3d9a497bfefaba000003"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000003"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000017", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000005"} flags=[] limit=0 skip=0 fields=nil (0.5808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6218ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000007"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3d9a497bfefaba000005"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000005"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba00001a", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000007"} flags=[] limit=0 skip=0 fields=nil (0.4501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d9a497bfefaba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3d9a497bfefaba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7389ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000003"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}, "503b3d9a497bfefaba000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba00001d", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000003"} flags=[] limit=0 skip=0 fields=nil (0.5372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7610ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000005"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000003"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3d9a497bfefaba000003"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000020", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.2208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000005"} flags=[] limit=0 skip=0 fields=nil (0.5970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5362ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3d9a497bfefaba000007"} update={"$set"=>{"acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}, "503b3d9a497bfefaba000002"=>{"privileges"=>"r", "inherited"=>{"503b3d9a497bfefaba000005"=>"r"}, "invited"=>"503b3d9a497bfefaba000001", "at"=>2012-08-27 11:27:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3d9a497bfefaba000005"], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:27:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000023", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}]}} flags=[] (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "label_ids"=>"503b3d9a497bfefaba000007"} flags=[] limit=0 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3d9a497bfefaba000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3d9a497bfefaba000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3d9a497bfefaba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:27:54 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3d9a497bfefaba000025", "at"=>2012-08-27 09:27:54 UTC, "changes"=>{}, "user_id"=>"503b3d9a497bfefaba000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3d9a497bfefaba000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6924ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7062ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2539ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1638ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3dc5497bfefbba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3302", "confirmation_key"=>"570008226b8bf930dd31"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3dc5497bfefbba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"877e", "confirmation_key"=>"1ba93c164fb087526980"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3dc5497bfefbba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000004", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3dc5497bfefbba000005", "version"=>1, "label_ids"=>["503b3dc5497bfefbba000003"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000006", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3dc5497bfefbba000007", "version"=>1, "label_ids"=>["503b3dc5497bfefbba000005"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000008", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}] flags=[] (0.1190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000003"} flags=[] limit=0 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000005"} flags=[] limit=0 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6080ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000003"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba00000b", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000003"} flags=[] limit=0 skip=0 fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4840ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000005"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000003"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3dc5497bfefbba000003"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba00000e", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000005"} flags=[] limit=0 skip=0 fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000007"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000005"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3dc5497bfefbba000005"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000011", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.4528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000007"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3dc5497bfefbba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3dc5497bfefbba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8862ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000003"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000014", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000003"} flags=[] limit=0 skip=0 fields=nil (0.8540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7939ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000005"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3dc5497bfefbba000003"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000003"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000017", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000005"} flags=[] limit=0 skip=0 fields=nil (0.7842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6680ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000007"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3dc5497bfefbba000005"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000005"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba00001a", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000007"} flags=[] limit=0 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3dc5497bfefbba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3dc5497bfefbba000007"} flags=[] limit=-1 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7751ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000003"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}, "503b3dc5497bfefbba000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba00001d", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000003"} flags=[] limit=0 skip=0 fields=nil (0.7291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5941ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000005"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000003"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3dc5497bfefbba000003"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000020", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000005"} flags=[] limit=0 skip=0 fields=nil (0.5529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6220ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3dc5497bfefbba000007"} update={"$set"=>{"acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}, "503b3dc5497bfefbba000002"=>{"privileges"=>"r", "inherited"=>{"503b3dc5497bfefbba000005"=>"r"}, "invited"=>"503b3dc5497bfefbba000001", "at"=>2012-08-27 11:28:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3dc5497bfefbba000005"], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:28:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000023", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}]}} flags=[] (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "label_ids"=>"503b3dc5497bfefbba000007"} flags=[] limit=0 skip=0 fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3dc5497bfefbba000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3dc5497bfefbba000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3dc5497bfefbba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:28:37 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3dc5497bfefbba000025", "at"=>2012-08-27 09:28:37 UTC, "changes"=>{}, "user_id"=>"503b3dc5497bfefbba000001"}]}] flags=[] (0.1507ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3dc5497bfefbba000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ded497bfefcba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ded497bfefcba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4848", "confirmation_key"=>"a36b2724b9292c89fce8"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ded497bfefcba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ded497bfefcba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9805", "confirmation_key"=>"508590a26d89d75c3422"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ded497bfefcba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000004", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ded497bfefcba000005", "version"=>1, "label_ids"=>["503b3ded497bfefcba000003"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000006", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2658ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ded497bfefcba000007", "version"=>1, "label_ids"=>["503b3ded497bfefcba000005"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000008", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000003"} flags=[] limit=0 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000005"} flags=[] limit=0 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4499ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000003"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ded497bfefcba00000b", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000003"} flags=[] limit=0 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000005"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000003"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ded497bfefcba000003"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ded497bfefcba00000e", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000005"} flags=[] limit=0 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000007"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000005"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ded497bfefcba000005"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000011", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000007"} flags=[] limit=0 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ded497bfefcba000005"} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ded497bfefcba000007"} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8221ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000003"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000014", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000003"} flags=[] limit=0 skip=0 fields=nil (0.6521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5608ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000005"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3ded497bfefcba000003"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000003"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000017", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.3889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000005"} flags=[] limit=0 skip=0 fields=nil (0.8039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7718ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000007"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3ded497bfefcba000005"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000005"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ded497bfefcba00001a", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000007"} flags=[] limit=0 skip=0 fields=nil (0.4749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ded497bfefcba000005"} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ded497bfefcba000007"} flags=[] limit=-1 skip=0 fields=nil (0.3469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7710ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000003"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}, "503b3ded497bfefcba000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ded497bfefcba00001d", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000003"} flags=[] limit=0 skip=0 fields=nil (0.7401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6111ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000005"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000003"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3ded497bfefcba000003"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000020", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.2203ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000005"} flags=[] limit=0 skip=0 fields=nil (0.6590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5932ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ded497bfefcba000007"} update={"$set"=>{"acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}, "503b3ded497bfefcba000002"=>{"privileges"=>"r", "inherited"=>{"503b3ded497bfefcba000005"=>"r"}, "invited"=>"503b3ded497bfefcba000001", "at"=>2012-08-27 11:29:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3ded497bfefcba000005"], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:29:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000023", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}]}} flags=[] (0.3037ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "label_ids"=>"503b3ded497bfefcba000007"} flags=[] limit=0 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ded497bfefcba000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ded497bfefcba000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ded497bfefcba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:29:17 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3ded497bfefcba000025", "at"=>2012-08-27 09:29:17 UTC, "changes"=>{}, "user_id"=>"503b3ded497bfefcba000001"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3ded497bfefcba000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0979ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.9888ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1931ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3052", "confirmation_key"=>"2b3bd1a459d45095be46"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3541ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"91a6", "confirmation_key"=>"4eb6cb9ac36f10e128c7"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000004", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000001"}]}] flags=[] (0.1771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5348ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000003"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}, "503b3e56497bfefeba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3e56497bfefeba000001", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000007", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000001"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000003"} flags=[] limit=0 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b3e56497bfefeba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5341ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b3e56497bfefeba000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3781ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1547ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"417c", "confirmation_key"=>"0bceb428e806b5de60bf"}] flags=[] (0.1581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4678ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00000c", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba00000a"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3443ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00000e", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba00000a"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000010", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba00000a"}]}] flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba00000b"} flags=[] limit=0 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3e56497bfefeba00000d"} update={"$push"=>{:label_ids=>"503b3e56497bfefeba00000b"}} flags=[:multi] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba00000b"} flags=[] limit=0 skip=0 fields=nil (0.3448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3e56497bfefeba00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5677ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3e56497bfefeba00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba00000b"} flags=[] limit=0 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba00000b"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3e56497bfefeba00000f"} update={"$push"=>{:label_ids=>"503b3e56497bfefeba00000d"}} flags=[:multi] (0.1211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba00000f"} flags=[] limit=-1 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3e56497bfefeba00000d"]}} flags=[] limit=0 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b3e56497bfefeba00000d"]}} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2210ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1831ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"bd95", "confirmation_key"=>"99ee30090fa2655387d7"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cf7d", "confirmation_key"=>"6f411ca6f3ff9d829f87"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3252ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000014", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000015", "version"=>1, "label_ids"=>["503b3e56497bfefeba000013"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000016", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5040ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000017", "version"=>1, "label_ids"=>["503b3e56497bfefeba000015"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000018", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000013"} flags=[] limit=0 skip=0 fields=nil (0.6521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000015"} flags=[] limit=0 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5641ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000013"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00001b", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000013"} flags=[] limit=0 skip=0 fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000015"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000013"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3e56497bfefeba000013"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00001e", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000015"} flags=[] limit=0 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000017"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000015"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3e56497bfefeba000015"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000021", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000017"} flags=[] limit=0 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba000015"} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba000017"} flags=[] limit=-1 skip=0 fields=nil (0.2911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6192ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000013"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000024", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000013"} flags=[] limit=0 skip=0 fields=nil (0.5562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5538ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000015"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3e56497bfefeba000013"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000013"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000027", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000015"} flags=[] limit=0 skip=0 fields=nil (0.5519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4802ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000017"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3e56497bfefeba000015"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000015"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00002a", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000017"} flags=[] limit=0 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba000015"} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba000017"} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000013"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}, "503b3e56497bfefeba000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00002d", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000013"} flags=[] limit=0 skip=0 fields=nil (0.6759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6199ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000015"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000013"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3e56497bfefeba000013"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000030", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000015"} flags=[] limit=0 skip=0 fields=nil (0.6621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6809ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e56497bfefeba000017"} update={"$set"=>{"acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}, "503b3e56497bfefeba000012"=>{"privileges"=>"r", "inherited"=>{"503b3e56497bfefeba000015"=>"r"}, "invited"=>"503b3e56497bfefeba000011", "at"=>2012-08-27 11:31:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3e56497bfefeba000015"], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000033", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}]}} flags=[] (0.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "label_ids"=>"503b3e56497bfefeba000017"} flags=[] limit=0 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000035", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000011"}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000011.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5848ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2420ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"d626", "confirmation_key"=>"cacae531b9fd4f76b6af"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"4a5d", "confirmation_key"=>"340cb65b054c63d9f17f"}] flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2820ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e56497bfefeba000039", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000036"}]}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00003d", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000036"}]}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e56497bfefeba00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3712ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e56497bfefeba00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e56497bfefeba000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:02 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b3e56497bfefeba00003f", "at"=>2012-08-27 09:31:02 UTC, "changes"=>{}, "user_id"=>"503b3e56497bfefeba000036"}]}] flags=[] (0.1559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e56497bfefeba000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5481ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e56497bfefeba000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1228ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e56497bfefeba000038"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f406", "confirmation_key"=>"986492b686da879fc85f"}] flags=[] (0.0899ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dbe7", "confirmation_key"=>"d2ffa0405716da15eabd"}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5016ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e56497bfefeba000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e56497bfefeba000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"bcac", "confirmation_key"=>"417bd994f5e9005102fa"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4759ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b3e56497bfefeba000044", "user_ids"=>["503b3e56497bfefeba000043"], "name"=>"g1"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b3e56497bfefeba000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b3e56497bfefeba000044"}} flags=[:multi] (0.0877ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b3e56497bfefeba000044"]}}]}} (0.3443ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6483ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1719ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1469ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0403ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e5b497bfeffba000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"051c", "confirmation_key"=>"07bf1495578b962d9783"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3e5b497bfeffba000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a2bc", "confirmation_key"=>"3325e14c69423332007b"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e5b497bfeffba000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000004", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}] flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e5b497bfeffba000005", "version"=>1, "label_ids"=>["503b3e5b497bfeffba000003"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000006", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e5b497bfeffba000007", "version"=>1, "label_ids"=>["503b3e5b497bfeffba000005"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000008", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000003"} flags=[] limit=0 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000005"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5767ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000003"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba00000b", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000003"} flags=[] limit=0 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000005"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000003"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3e5b497bfeffba000003"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba00000e", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000005"} flags=[] limit=0 skip=0 fields=nil (0.3603ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000007"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000005"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3e5b497bfeffba000005"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000011", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000007"} flags=[] limit=0 skip=0 fields=nil (0.4327ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e5b497bfeffba000005"} flags=[] limit=-1 skip=0 fields=nil (0.6249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e5b497bfeffba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8893ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000003"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000014", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000003"} flags=[] limit=0 skip=0 fields=nil (0.5410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5322ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000005"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3e5b497bfeffba000003"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000003"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000017", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000005"} flags=[] limit=0 skip=0 fields=nil (0.5791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000007"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3e5b497bfeffba000005"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000005"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba00001a", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000007"} flags=[] limit=0 skip=0 fields=nil (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e5b497bfeffba000005"} flags=[] limit=-1 skip=0 fields=nil (0.5991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3e5b497bfeffba000007"} flags=[] limit=-1 skip=0 fields=nil (0.6440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6850ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000003"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}, "503b3e5b497bfeffba000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba00001d", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000003"} flags=[] limit=0 skip=0 fields=nil (0.6540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7582ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000005"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000003"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3e5b497bfeffba000003"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000020", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.2379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000005"} flags=[] limit=0 skip=0 fields=nil (0.7331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3e5b497bfeffba000007"} update={"$set"=>{"acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}, "503b3e5b497bfeffba000002"=>{"privileges"=>"r", "inherited"=>{"503b3e5b497bfeffba000005"=>"r"}, "invited"=>"503b3e5b497bfeffba000001", "at"=>2012-08-27 11:31:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3e5b497bfeffba000005"], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:31:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000023", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}]}} flags=[] (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "label_ids"=>"503b3e5b497bfeffba000007"} flags=[] limit=0 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3e5b497bfeffba000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4501ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3e5b497bfeffba000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3e5b497bfeffba000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:31:07 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3e5b497bfeffba000025", "at"=>2012-08-27 09:31:07 UTC, "changes"=>{}, "user_id"=>"503b3e5b497bfeffba000001"}]}] flags=[] (0.1483ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3e5b497bfeffba000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8509ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2458ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4637ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ee9497bfe02bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5b10", "confirmation_key"=>"08fb1a33c56f941c3abf"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3ee9497bfe02bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1d71", "confirmation_key"=>"096790b5fbf5678c2d33"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ee9497bfe02bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000004", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}] flags=[] (0.1829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3381ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ee9497bfe02bb000005", "version"=>1, "label_ids"=>["503b3ee9497bfe02bb000003"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000006", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ee9497bfe02bb000007", "version"=>1, "label_ids"=>["503b3ee9497bfe02bb000005"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000008", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000003"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb00000b", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000005"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000003"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ee9497bfe02bb000003"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb00000e", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000007"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000005"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3ee9497bfe02bb000005"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000011", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ee9497bfe02bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ee9497bfe02bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8259ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000003"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000014", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000003"} flags=[] limit=0 skip=0 fields=nil (0.7479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7720ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000005"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3ee9497bfe02bb000003"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000003"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000017", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000005"} flags=[] limit=0 skip=0 fields=nil (0.9372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7963ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000007"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3ee9497bfe02bb000005"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000005"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb00001a", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ee9497bfe02bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3ee9497bfe02bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7050ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000003"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb00001d", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6890ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000005"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000003"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3ee9497bfe02bb000003"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000020", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000005"} flags=[] limit=0 skip=0 fields=nil (12.7861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9470ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3ee9497bfe02bb000007"} update={"$set"=>{"acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}, "503b3ee9497bfe02bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3ee9497bfe02bb000005"=>"r"}, "invited"=>"503b3ee9497bfe02bb000001", "at"=>2012-08-27 11:33:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3ee9497bfe02bb000005"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:33:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000023", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}]}} flags=[] (0.3078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3ee9497bfe02bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3ee9497bfe02bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3ee9497bfe02bb000024", "version"=>1, "label_ids"=>["503b3ee9497bfe02bb000003"], "pos"=>99, "acl"=>{"503b3ee9497bfe02bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:33:29 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3ee9497bfe02bb000025", "at"=>2012-08-27 09:33:29 UTC, "changes"=>{}, "user_id"=>"503b3ee9497bfe02bb000001"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3ee9497bfe02bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1898ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4003ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3f47497bfe07bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f2b2", "confirmation_key"=>"504a69f9742b58b0bdc0"}] flags=[] (0.1059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3f47497bfe07bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"38a1", "confirmation_key"=>"70da322a83612fb308da"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f47497bfe07bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000004", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}] flags=[] (0.1760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f47497bfe07bb000005", "version"=>1, "label_ids"=>["503b3f47497bfe07bb000003"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000006", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f47497bfe07bb000007", "version"=>1, "label_ids"=>["503b3f47497bfe07bb000005"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000008", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3283ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000003"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb00000b", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000005"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000003"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3f47497bfe07bb000003"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb00000e", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2248ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3893ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000007"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000005"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3f47497bfe07bb000005"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000011", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2313ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000007"} flags=[] limit=0 skip=0 fields=nil (0.5913ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f47497bfe07bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f47497bfe07bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000003"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000014", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8478ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000005"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3f47497bfe07bb000003"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000003"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000017", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.3932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000005"} flags=[] limit=0 skip=0 fields=nil (0.7300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000007"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3f47497bfe07bb000005"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000005"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb00001a", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f47497bfe07bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f47497bfe07bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7410ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000003"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}, "503b3f47497bfe07bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb00001d", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000003"} flags=[] limit=0 skip=0 fields=nil (0.8278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6840ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000005"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000003"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3f47497bfe07bb000003"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000020", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000005"} flags=[] limit=0 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5562ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f47497bfe07bb000007"} update={"$set"=>{"acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}, "503b3f47497bfe07bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f47497bfe07bb000005"=>"r"}, "invited"=>"503b3f47497bfe07bb000001", "at"=>2012-08-27 11:35:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3f47497bfe07bb000005"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000023", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}]}} flags=[] (0.3040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f47497bfe07bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f47497bfe07bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f47497bfe07bb000024", "version"=>1, "label_ids"=>["503b3f47497bfe07bb000003"], "pos"=>99, "acl"=>{"503b3f47497bfe07bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:03 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3f47497bfe07bb000025", "at"=>2012-08-27 09:35:03 UTC, "changes"=>{}, "user_id"=>"503b3f47497bfe07bb000001"}]}] flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3f47497bfe07bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9470ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2007ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3f54497bfe08bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"af56", "confirmation_key"=>"1327e8547f88aa7a6303"}] flags=[] (0.0978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3f54497bfe08bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cb22", "confirmation_key"=>"ab701a9043b0a47ba838"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f54497bfe08bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000004", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}] flags=[] (0.1757ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f54497bfe08bb000005", "version"=>1, "label_ids"=>["503b3f54497bfe08bb000003"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000006", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f54497bfe08bb000007", "version"=>1, "label_ids"=>["503b3f54497bfe08bb000005"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000008", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000003"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb00000b", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.2432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5252ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000005"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000003"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3f54497bfe08bb000003"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb00000e", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.2279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000007"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000005"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3f54497bfe08bb000005"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000011", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.4709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f54497bfe08bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f54497bfe08bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000003"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000014", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5472ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000005"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3f54497bfe08bb000003"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000003"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000017", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.2458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000005"} flags=[] limit=0 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4883ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000007"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3f54497bfe08bb000005"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000005"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb00001a", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f54497bfe08bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3f54497bfe08bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3846ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7219ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000003"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}, "503b3f54497bfe08bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb00001d", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.4141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000003"} flags=[] limit=0 skip=0 fields=nil (0.7939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6690ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000005"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000003"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3f54497bfe08bb000003"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000020", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000005"} flags=[] limit=0 skip=0 fields=nil (0.5372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5839ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3f54497bfe08bb000007"} update={"$set"=>{"acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}, "503b3f54497bfe08bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3f54497bfe08bb000005"=>"r"}, "invited"=>"503b3f54497bfe08bb000001", "at"=>2012-08-27 11:35:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3f54497bfe08bb000005"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:35:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000023", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}]}} flags=[] (0.5147ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3f54497bfe08bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3f54497bfe08bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3f54497bfe08bb000024", "version"=>1, "label_ids"=>["503b3f54497bfe08bb000003"], "pos"=>99, "acl"=>{"503b3f54497bfe08bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:35:16 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3f54497bfe08bb000025", "at"=>2012-08-27 09:35:16 UTC, "changes"=>{}, "user_id"=>"503b3f54497bfe08bb000001"}]}] flags=[] (0.1507ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3f54497bfe08bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6871ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7176ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4773ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3fc5497bfe09bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"20fd", "confirmation_key"=>"588cee6d490e7247944c"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b3fc5497bfe09bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c637", "confirmation_key"=>"846e70ff121219726174"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3fc5497bfe09bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000004", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3fc5497bfe09bb000005", "version"=>1, "label_ids"=>["503b3fc5497bfe09bb000003"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000006", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3fc5497bfe09bb000007", "version"=>1, "label_ids"=>["503b3fc5497bfe09bb000005"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000008", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000003"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb00000b", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000005"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000003"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3fc5497bfe09bb000003"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb00000e", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000005"} flags=[] limit=0 skip=0 fields=nil (0.5600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000007"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000005"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b3fc5497bfe09bb000005"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000011", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3fc5497bfe09bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3fc5497bfe09bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7780ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000003"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000014", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.4244ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000003"} flags=[] limit=0 skip=0 fields=nil (0.8802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7741ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000005"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3fc5497bfe09bb000003"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000003"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000017", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000005"} flags=[] limit=0 skip=0 fields=nil (0.5741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000007"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b3fc5497bfe09bb000005"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000005"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb00001a", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3fc5497bfe09bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b3fc5497bfe09bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7052ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000003"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb00001d", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000003"} flags=[] limit=0 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5713ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000005"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000003"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3fc5497bfe09bb000003"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000020", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000005"} flags=[] limit=0 skip=0 fields=nil (0.6800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6621ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b3fc5497bfe09bb000007"} update={"$set"=>{"acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}, "503b3fc5497bfe09bb000002"=>{"privileges"=>"r", "inherited"=>{"503b3fc5497bfe09bb000005"=>"r"}, "invited"=>"503b3fc5497bfe09bb000001", "at"=>2012-08-27 11:37:09 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b3fc5497bfe09bb000005"], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:37:09 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000023", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}]}} flags=[] (0.3202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "label_ids"=>"503b3fc5497bfe09bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b3fc5497bfe09bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b3fc5497bfe09bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b3fc5497bfe09bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:37:09 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b3fc5497bfe09bb000025", "at"=>2012-08-27 09:37:09 UTC, "changes"=>{}, "user_id"=>"503b3fc5497bfe09bb000001"}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b3fc5497bfe09bb000024"} update={"$push"=>{:label_ids=>"503b3fc5497bfe09bb000003"}} flags=[:multi] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b3fc5497bfe09bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5500ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6948ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1929ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4820ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4008497bfe0abb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4189ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4008497bfe0abb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9b3f", "confirmation_key"=>"6490c78f33ed2b27a557"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4008497bfe0abb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4008497bfe0abb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cb8a", "confirmation_key"=>"44ace9c752056dc1f91d"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4008497bfe0abb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000004", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}] flags=[] (0.1752ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4086ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4008497bfe0abb000005", "version"=>1, "label_ids"=>["503b4008497bfe0abb000003"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000006", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3822ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4008497bfe0abb000007", "version"=>1, "label_ids"=>["503b4008497bfe0abb000005"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000008", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000003"} flags=[] limit=0 skip=0 fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000005"} flags=[] limit=0 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000003"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4008497bfe0abb00000b", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000003"} flags=[] limit=0 skip=0 fields=nil (0.5040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000005"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000003"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4008497bfe0abb000003"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4008497bfe0abb00000e", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000005"} flags=[] limit=0 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4768ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000007"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000005"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4008497bfe0abb000005"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000011", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.4098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000007"} flags=[] limit=0 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4008497bfe0abb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4008497bfe0abb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8399ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000003"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000014", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.4809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000003"} flags=[] limit=0 skip=0 fields=nil (0.6282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000005"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4008497bfe0abb000003"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000003"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000017", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.3881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000005"} flags=[] limit=0 skip=0 fields=nil (0.5891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5622ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000007"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4008497bfe0abb000005"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000005"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4008497bfe0abb00001a", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000007"} flags=[] limit=0 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4008497bfe0abb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4008497bfe0abb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000003"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}, "503b4008497bfe0abb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4008497bfe0abb00001d", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000003"} flags=[] limit=0 skip=0 fields=nil (0.6230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6192ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000005"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000003"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4008497bfe0abb000003"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000020", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.2279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000005"} flags=[] limit=0 skip=0 fields=nil (0.6068ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4008497bfe0abb000007"} update={"$set"=>{"acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}, "503b4008497bfe0abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4008497bfe0abb000005"=>"r"}, "invited"=>"503b4008497bfe0abb000001", "at"=>2012-08-27 11:38:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4008497bfe0abb000005"], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000023", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}]}} flags=[] (0.3061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4008497bfe0abb000007"} flags=[] limit=0 skip=0 fields=nil (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4008497bfe0abb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2909ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4008497bfe0abb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4008497bfe0abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:16 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4008497bfe0abb000025", "at"=>2012-08-27 09:38:16 UTC, "changes"=>{}, "user_id"=>"503b4008497bfe0abb000001"}]}] flags=[] (0.2093ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4008497bfe0abb000024"} update={"$push"=>{:label_ids=>"503b4008497bfe0abb000003"}} flags=[:multi] (0.0908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4008497bfe0abb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6552ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6742ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b402f497bfe0bbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a4f4", "confirmation_key"=>"454321f6d7a1543e08d6"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b402f497bfe0bbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"27d6", "confirmation_key"=>"9976c8427b4ae77bfab3"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b402f497bfe0bbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000004", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}] flags=[] (0.1862ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b402f497bfe0bbb000005", "version"=>1, "label_ids"=>["503b402f497bfe0bbb000003"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000006", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b402f497bfe0bbb000007", "version"=>1, "label_ids"=>["503b402f497bfe0bbb000005"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000008", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6762ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000003"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb00000b", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000005"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000003"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b402f497bfe0bbb000003"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb00000e", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000007"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000005"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b402f497bfe0bbb000005"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000011", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.4141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b402f497bfe0bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b402f497bfe0bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000003"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000014", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.3121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5939ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000005"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b402f497bfe0bbb000003"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000003"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000017", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.5541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4828ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000007"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b402f497bfe0bbb000005"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000005"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb00001a", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000007"} flags=[] limit=0 skip=0 fields=nil (0.2789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b402f497bfe0bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b402f497bfe0bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000003"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}, "503b402f497bfe0bbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb00001d", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000005"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000003"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b402f497bfe0bbb000003"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000020", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000005"} flags=[] limit=0 skip=0 fields=nil (1.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5980ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b402f497bfe0bbb000007"} update={"$set"=>{"acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}, "503b402f497bfe0bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b402f497bfe0bbb000005"=>"r"}, "invited"=>"503b402f497bfe0bbb000001", "at"=>2012-08-27 11:38:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b402f497bfe0bbb000005"], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:38:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000023", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}]}} flags=[] (0.2139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b402f497bfe0bbb000007"} flags=[] limit=0 skip=0 fields=nil (0.5078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b402f497bfe0bbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b402f497bfe0bbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b402f497bfe0bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:38:55 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b402f497bfe0bbb000025", "at"=>2012-08-27 09:38:55 UTC, "changes"=>{}, "user_id"=>"503b402f497bfe0bbb000001"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b402f497bfe0bbb000024"} update={"$push"=>{:label_ids=>"503b402f497bfe0bbb000003"}} flags=[:multi] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b402f497bfe0bbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6719ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1798ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4045497bfe0cbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5ba2", "confirmation_key"=>"1068e08b262d193b8f98"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4045497bfe0cbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"42da", "confirmation_key"=>"f3f6141cbe5968f99a90"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4045497bfe0cbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000004", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4045497bfe0cbb000005", "version"=>1, "label_ids"=>["503b4045497bfe0cbb000003"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000006", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4045497bfe0cbb000007", "version"=>1, "label_ids"=>["503b4045497bfe0cbb000005"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000008", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5479ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000003"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb00000b", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2487ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000005"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000003"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4045497bfe0cbb000003"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb00000e", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000007"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000005"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4045497bfe0cbb000005"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000011", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000007"} flags=[] limit=0 skip=0 fields=nil (0.2871ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4045497bfe0cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4045497bfe0cbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5369ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000003"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000014", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000005"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4045497bfe0cbb000003"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000003"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000017", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.5362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4778ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000007"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4045497bfe0cbb000005"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000005"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb00001a", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.4563ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3963ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4045497bfe0cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6957ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4045497bfe0cbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000003"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}, "503b4045497bfe0cbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb00001d", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.7138ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5600ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000005"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000003"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4045497bfe0cbb000003"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000020", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.6011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6111ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4045497bfe0cbb000007"} update={"$set"=>{"acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}, "503b4045497bfe0cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4045497bfe0cbb000005"=>"r"}, "invited"=>"503b4045497bfe0cbb000001", "at"=>2012-08-27 11:39:17 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4045497bfe0cbb000005"], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:17 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000023", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}]}} flags=[] (0.3252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4045497bfe0cbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4045497bfe0cbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4733ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4045497bfe0cbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4045497bfe0cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:17 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4045497bfe0cbb000025", "at"=>2012-08-27 09:39:17 UTC, "changes"=>{}, "user_id"=>"503b4045497bfe0cbb000001"}]}] flags=[] (0.2799ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4045497bfe0cbb000024"} update={"$push"=>{:label_ids=>"503b4045497bfe0cbb000003"}} flags=[:multi] (0.1206ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4045497bfe0cbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3150ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6559ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1781ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3969ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4551ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b405b497bfe0dbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5460", "confirmation_key"=>"d87454b4b65c1e916a27"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3502ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b405b497bfe0dbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6f9f", "confirmation_key"=>"74f2b8df81b70ebaa94d"}] flags=[] (0.0648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b405b497bfe0dbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000004", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}] flags=[] (0.1910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b405b497bfe0dbb000005", "version"=>1, "label_ids"=>["503b405b497bfe0dbb000003"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000006", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b405b497bfe0dbb000007", "version"=>1, "label_ids"=>["503b405b497bfe0dbb000005"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000008", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5491ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000003"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb00000b", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5038ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000005"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000003"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b405b497bfe0dbb000003"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb00000e", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000007"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000005"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b405b497bfe0dbb000005"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000011", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3312ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b405b497bfe0dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b405b497bfe0dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5429ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000003"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000014", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.4668ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.6909ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5550ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000005"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b405b497bfe0dbb000003"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000003"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000017", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.5481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000007"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b405b497bfe0dbb000005"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000005"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb00001a", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000007"} flags=[] limit=0 skip=0 fields=nil (0.2770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b405b497bfe0dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b405b497bfe0dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9451ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000003"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}, "503b405b497bfe0dbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb00001d", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.7389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6196ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000005"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000003"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b405b497bfe0dbb000003"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000020", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.6368ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7250ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b405b497bfe0dbb000007"} update={"$set"=>{"acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}, "503b405b497bfe0dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b405b497bfe0dbb000005"=>"r"}, "invited"=>"503b405b497bfe0dbb000001", "at"=>2012-08-27 11:39:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b405b497bfe0dbb000005"], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:39:39 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000023", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}]}} flags=[] (0.3140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b405b497bfe0dbb000007"} flags=[] limit=0 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b405b497bfe0dbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b405b497bfe0dbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b405b497bfe0dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:39:39 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b405b497bfe0dbb000025", "at"=>2012-08-27 09:39:39 UTC, "changes"=>{}, "user_id"=>"503b405b497bfe0dbb000001"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b405b497bfe0dbb000024"} update={"$push"=>{:label_ids=>"503b405b497bfe0dbb000003"}} flags=[:multi] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b405b497bfe0dbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2270ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1762ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1488ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b411f497bfe0ebb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d724", "confirmation_key"=>"ad8149ec50bcccacf954"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b411f497bfe0ebb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6855", "confirmation_key"=>"1562e342039f8552cabc"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b411f497bfe0ebb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000004", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b411f497bfe0ebb000005", "version"=>1, "label_ids"=>["503b411f497bfe0ebb000003"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000006", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}] flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b411f497bfe0ebb000007", "version"=>1, "label_ids"=>["503b411f497bfe0ebb000005"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000008", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000003"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb00000b", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5128ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000005"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000003"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b411f497bfe0ebb000003"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb00000e", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000007"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000005"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b411f497bfe0ebb000005"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000011", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.4151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b411f497bfe0ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b411f497bfe0ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5231ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000003"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000014", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.3011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5980ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000005"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b411f497bfe0ebb000003"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000003"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000017", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000007"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b411f497bfe0ebb000005"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000005"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb00001a", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.2811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b411f497bfe0ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b411f497bfe0ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7739ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000003"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}, "503b411f497bfe0ebb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb00001d", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.6742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6511ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000005"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000003"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b411f497bfe0ebb000003"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000020", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.7658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6433ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b411f497bfe0ebb000007"} update={"$set"=>{"acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}, "503b411f497bfe0ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b411f497bfe0ebb000005"=>"r"}, "invited"=>"503b411f497bfe0ebb000001", "at"=>2012-08-27 11:42:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b411f497bfe0ebb000005"], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:42:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000023", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}]}} flags=[] (0.3130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b411f497bfe0ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b411f497bfe0ebb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b411f497bfe0ebb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b411f497bfe0ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:42:55 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b411f497bfe0ebb000025", "at"=>2012-08-27 09:42:55 UTC, "changes"=>{}, "user_id"=>"503b411f497bfe0ebb000001"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b411f497bfe0ebb000024"} update={"$push"=>{:label_ids=>"503b411f497bfe0ebb000003"}} flags=[:multi] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b411f497bfe0ebb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2220ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6940ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2019ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d564", "confirmation_key"=>"c1f406069277b6c2e83c"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"da90", "confirmation_key"=>"c3f9821fcf32573d3796"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000004", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3862ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000003"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}, "503b4126497bfe0fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4126497bfe0fbb000001", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000007", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000003"} flags=[] limit=0 skip=0 fields=nil (0.4017ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4126497bfe0fbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5600ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4126497bfe0fbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6900ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2162ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"eca9", "confirmation_key"=>"9fc33d077ebde84be711"}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00000c", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb00000a"}]}] flags=[] (0.1278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00000e", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb00000a"}]}] flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000010", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb00000a"}]}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4126497bfe0fbb00000d"} update={"$push"=>{:label_ids=>"503b4126497bfe0fbb00000b"}} flags=[:multi] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb00000b"} flags=[] limit=0 skip=0 fields=nil (0.5257ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4126497bfe0fbb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4126497bfe0fbb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb00000b"} flags=[] limit=0 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb00000b"} flags=[] limit=0 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4327ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4126497bfe0fbb00000f"} update={"$push"=>{:label_ids=>"503b4126497bfe0fbb00000d"}} flags=[:multi] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4126497bfe0fbb00000d"]}} flags=[] limit=0 skip=0 fields=nil (0.5889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4126497bfe0fbb00000d"]}} flags=[] limit=0 skip=0 fields=nil (0.6058ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2079ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ce44", "confirmation_key"=>"0a0ec011ba2e04a9b2d7"}] flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e7f7", "confirmation_key"=>"238d6103f79746984e5a"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000014", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3848ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000015", "version"=>1, "label_ids"=>["503b4126497bfe0fbb000013"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000016", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3121ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000017", "version"=>1, "label_ids"=>["503b4126497bfe0fbb000015"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000018", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000013"} flags=[] limit=0 skip=0 fields=nil (0.4902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000015"} flags=[] limit=0 skip=0 fields=nil (0.3288ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4432ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000013"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00001b", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000013"} flags=[] limit=0 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4067ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000015"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000013"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4126497bfe0fbb000013"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00001e", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000015"} flags=[] limit=0 skip=0 fields=nil (0.4802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000017"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000015"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4126497bfe0fbb000015"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000021", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.3259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000017"} flags=[] limit=0 skip=0 fields=nil (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3018ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb000017"} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6540ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000013"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000024", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000013"} flags=[] limit=0 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4501ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000015"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4126497bfe0fbb000013"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000013"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000027", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000015"} flags=[] limit=0 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000017"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4126497bfe0fbb000015"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000015"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00002a", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000017"} flags=[] limit=0 skip=0 fields=nil (0.3622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb000015"} flags=[] limit=-1 skip=0 fields=nil (0.5081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb000017"} flags=[] limit=-1 skip=0 fields=nil (0.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7432ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000013"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}, "503b4126497bfe0fbb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00002d", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000013"} flags=[] limit=0 skip=0 fields=nil (0.7601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6340ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000015"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000013"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4126497bfe0fbb000013"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000030", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000015"} flags=[] limit=0 skip=0 fields=nil (0.5629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4126497bfe0fbb000017"} update={"$set"=>{"acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}, "503b4126497bfe0fbb000012"=>{"privileges"=>"r", "inherited"=>{"503b4126497bfe0fbb000015"=>"r"}, "invited"=>"503b4126497bfe0fbb000011", "at"=>2012-08-27 11:43:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4126497bfe0fbb000015"], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:43:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000033", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}]}} flags=[] (0.2387ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "label_ids"=>"503b4126497bfe0fbb000017"} flags=[] limit=0 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3490ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000035", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000011"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4126497bfe0fbb000034"} update={"$push"=>{:label_ids=>"503b4126497bfe0fbb000013"}} flags=[:multi] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2599ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3529ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"62f1", "confirmation_key"=>"780afc10c17b5c3b92cb"}] flags=[] (0.0827ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3722ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"eda6", "confirmation_key"=>"80028ed5cf689889c263"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb000039", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000036"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00003d", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000036"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4126497bfe0fbb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4126497bfe0fbb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4126497bfe0fbb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:43:02 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4126497bfe0fbb00003f", "at"=>2012-08-27 09:43:02 UTC, "changes"=>{}, "user_id"=>"503b4126497bfe0fbb000036"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4126497bfe0fbb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4623ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4126497bfe0fbb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4126497bfe0fbb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2a99", "confirmation_key"=>"91ef92b6cc84ec77b8bf"}] flags=[] (0.1402ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5424ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"a70f", "confirmation_key"=>"462054e5be38e8580679"}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4126497bfe0fbb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4126497bfe0fbb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"c785", "confirmation_key"=>"07aa3281c80a6405078d"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4126497bfe0fbb000044", "user_ids"=>["503b4126497bfe0fbb000043"], "name"=>"g1"}] flags=[] (0.1161ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4126497bfe0fbb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4126497bfe0fbb000044"}} flags=[:multi] (0.0887ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4126497bfe0fbb000044"]}}]}} (0.3629ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6988ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2038ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3089ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4671ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f946", "confirmation_key"=>"01647f1bd6f8035ffe80"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"bd0e", "confirmation_key"=>"0ad23269f33aeb8d2aa6"}] flags=[] (0.0813ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000004", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000001"}]}] flags=[] (0.1781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5860ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000003"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}, "503b4170497bfe10bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4170497bfe10bb000001", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000007", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000001"}]}]}} flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4170497bfe10bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6461ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5562ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4170497bfe10bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4287ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3462ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ae16", "confirmation_key"=>"5d1e4585e6615a791f3f"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00000c", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb00000a"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2871ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00000e", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb00000a"}]}] flags=[] (0.1373ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000010", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb00000a"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4170497bfe10bb00000d"} update={"$push"=>{:label_ids=>"503b4170497bfe10bb00000b"}} flags=[:multi] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4170497bfe10bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4170497bfe10bb00000f"} update={"$push"=>{:label_ids=>"503b4170497bfe10bb00000d"}} flags=[:multi] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2182ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"291a", "confirmation_key"=>"019de9ef28ec38fbc964"}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3207ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4363", "confirmation_key"=>"1fad3735bf0f40f09bbd"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000014", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3901ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000015", "version"=>1, "label_ids"=>["503b4170497bfe10bb000013"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000016", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3228ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000017", "version"=>1, "label_ids"=>["503b4170497bfe10bb000015"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000018", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}] flags=[] (0.1202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb000013"} flags=[] limit=0 skip=0 fields=nil (0.4628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb000015"} flags=[] limit=0 skip=0 fields=nil (0.4973ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5240ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000013"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00001b", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4880ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000015"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000013"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4170497bfe10bb000013"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00001e", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb000015"} flags=[] limit=0 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5810ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000017"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000015"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4170497bfe10bb000015"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000021", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.3572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4170497bfe10bb000017"} flags=[] limit=0 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7071ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000013"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000024", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6630ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000015"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4170497bfe10bb000013"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000013"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000027", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6170ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000017"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4170497bfe10bb000015"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000015"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00002a", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.4399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.4902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7260ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000013"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}, "503b4170497bfe10bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00002d", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2303ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7071ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000015"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000013"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4170497bfe10bb000013"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000030", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6292ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4170497bfe10bb000017"} update={"$set"=>{"acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}, "503b4170497bfe10bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4170497bfe10bb000015"=>"r"}, "invited"=>"503b4170497bfe10bb000011", "at"=>2012-08-27 11:44:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4170497bfe10bb000015"], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:44:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000033", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4561ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000035", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000011"}]}] flags=[] (0.1438ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4170497bfe10bb000034"} update={"$push"=>{:label_ids=>"503b4170497bfe10bb000013"}} flags=[:multi] (0.0789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2599ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1640ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dec0", "confirmation_key"=>"139ac6473aaa82bae645"}] flags=[] (0.0832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3822ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"06d6", "confirmation_key"=>"244d5b76ca8f20900740"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3562ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4170497bfe10bb000039", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000036"}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00003d", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000036"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4170497bfe10bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4170497bfe10bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4170497bfe10bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:44:16 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4170497bfe10bb00003f", "at"=>2012-08-27 09:44:16 UTC, "changes"=>{}, "user_id"=>"503b4170497bfe10bb000036"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4170497bfe10bb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4072ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4170497bfe10bb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4170497bfe10bb000038"} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6534", "confirmation_key"=>"3f28b0d766c7c8e81432"}] flags=[] (0.0961ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4508ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"315d", "confirmation_key"=>"914056ac64141d7fab48"}] flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4170497bfe10bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4170497bfe10bb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"6abd", "confirmation_key"=>"06b659d7b1e571617bf5"}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4170497bfe10bb000044", "user_ids"=>["503b4170497bfe10bb000043"], "name"=>"g1"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4170497bfe10bb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4170497bfe10bb000044"}} flags=[:multi] (0.0911ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4170497bfe10bb000044"]}}]}} (0.3242ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.3771ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2058ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2220ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8cf4", "confirmation_key"=>"99ab7c0b37bb7ce2411a"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"18d0", "confirmation_key"=>"4d441afbc579527c07a4"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000004", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000001"}]}] flags=[] (0.1769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6928ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000003"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}, "503b41f4497bfe11bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b41f4497bfe11bb000001", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000007", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000001"}]}]}} flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000001.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b41f4497bfe11bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5281ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b41f4497bfe11bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3090ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2100ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0517ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2507", "confirmation_key"=>"b3b13d975ae80b2e20f4"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00000c", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb00000a"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00000e", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb00000a"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000010", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb00000a"}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.5412ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b41f4497bfe11bb00000d"} update={"$push"=>{:label_ids=>"503b41f4497bfe11bb00000b"}} flags=[:multi] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.5062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b41f4497bfe11bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.7939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.6118ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b41f4497bfe11bb00000f"} update={"$push"=>{:label_ids=>"503b41f4497bfe11bb00000d"}} flags=[:multi] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1838ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1869ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"efa1", "confirmation_key"=>"3f5bbee316578e1135d9"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5047ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4894", "confirmation_key"=>"16d0b2caeacc09a7b558"}] flags=[] (0.1023ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000014", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}] flags=[] (0.1502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000015", "version"=>1, "label_ids"=>["503b41f4497bfe11bb000013"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000016", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000017", "version"=>1, "label_ids"=>["503b41f4497bfe11bb000015"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000018", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000011.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb000013"} flags=[] limit=0 skip=0 fields=nil (0.5748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000011.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb000015"} flags=[] limit=0 skip=0 fields=nil (0.4747ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6189ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000013"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00001b", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5021ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000015"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000013"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b41f4497bfe11bb000013"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00001e", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000011.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb000015"} flags=[] limit=0 skip=0 fields=nil (0.4861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000017"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000015"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b41f4497bfe11bb000015"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000021", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000011.privileges"=>/r\w*/, "label_ids"=>"503b41f4497bfe11bb000017"} flags=[] limit=0 skip=0 fields=nil (0.3672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.2739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6940ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000013"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000024", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000015"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b41f4497bfe11bb000013"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000013"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000027", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5779ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000017"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b41f4497bfe11bb000015"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000015"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00002a", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3757ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000013"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}, "503b41f4497bfe11bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00002d", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6201ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000015"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000013"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b41f4497bfe11bb000013"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000030", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6070ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b41f4497bfe11bb000017"} update={"$set"=>{"acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}, "503b41f4497bfe11bb000012"=>{"privileges"=>"r", "inherited"=>{"503b41f4497bfe11bb000015"=>"r"}, "invited"=>"503b41f4497bfe11bb000011", "at"=>2012-08-27 11:46:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b41f4497bfe11bb000015"], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000033", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}]}} flags=[] (0.2189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (20.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000035", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000011"}]}] flags=[] (0.4010ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b41f4497bfe11bb000034"} update={"$push"=>{:label_ids=>"503b41f4497bfe11bb000013"}} flags=[:multi] (0.1278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3147ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2151ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5019ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6eda", "confirmation_key"=>"20eef8999f9f4caa2bb2"}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"464d", "confirmation_key"=>"b965a1921f8c41854324"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb000039", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000036"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00003d", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000036"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b41f4497bfe11bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b41f4497bfe11bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b41f4497bfe11bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:28 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b41f4497bfe11bb00003f", "at"=>2012-08-27 09:46:28 UTC, "changes"=>{}, "user_id"=>"503b41f4497bfe11bb000036"}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b41f4497bfe11bb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3798ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b41f4497bfe11bb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b41f4497bfe11bb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3941ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"da16", "confirmation_key"=>"afd2c9b752c0315aa147"}] flags=[] (0.1061ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"e69e", "confirmation_key"=>"ad884e75f0cd8c61107c"}] flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b41f4497bfe11bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b41f4497bfe11bb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"640e", "confirmation_key"=>"92916dcaa43821d1a57b"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b41f4497bfe11bb000044", "user_ids"=>["503b41f4497bfe11bb000043"], "name"=>"g1"}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b41f4497bfe11bb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b41f4497bfe11bb000044"}} flags=[:multi] (0.0918ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b41f4497bfe11bb000044"]}}]}} (0.3421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3487ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5322ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8680", "confirmation_key"=>"b1e4ce6b8d7ca8f7fc8e"}] flags=[] (0.1020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c14d", "confirmation_key"=>"20ccdd59ce87246e5986"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000004", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000001"}]}] flags=[] (0.2201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5591ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000003"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}, "503b4205497bfe12bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4205497bfe12bb000001", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000007", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000001"}]}]}} flags=[] (0.2723ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4205497bfe12bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4205497bfe12bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6588ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3710ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1912ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"aeac", "confirmation_key"=>"43569281fa2f2c0ab269"}] flags=[] (0.1040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00000c", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb00000a"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3049ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00000e", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb00000a"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2701ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000010", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb00000a"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4205497bfe12bb00000d"} update={"$push"=>{:label_ids=>"503b4205497bfe12bb00000b"}} flags=[:multi] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4205497bfe12bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4205497bfe12bb00000f"} update={"$push"=>{:label_ids=>"503b4205497bfe12bb00000d"}} flags=[:multi] (0.1202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3011ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2508ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7463", "confirmation_key"=>"c61adce67a87d709ca4d"}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"251e", "confirmation_key"=>"918f8641c4ac45d10d5b"}] flags=[] (0.0827ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3037ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000014", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000015", "version"=>1, "label_ids"=>["503b4205497bfe12bb000013"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000016", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}] flags=[] (0.1831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000017", "version"=>1, "label_ids"=>["503b4205497bfe12bb000015"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000018", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb000013"} flags=[] limit=0 skip=0 fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb000015"} flags=[] limit=0 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000013"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00001b", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5231ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000015"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000013"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4205497bfe12bb000013"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00001e", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb000015"} flags=[] limit=0 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000017"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000015"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4205497bfe12bb000015"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000021", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4205497bfe12bb000017"} flags=[] limit=0 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6747ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000013"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000024", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6080ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000015"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4205497bfe12bb000013"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000013"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000027", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000017"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4205497bfe12bb000015"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000015"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00002a", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2377ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6788ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000013"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}, "503b4205497bfe12bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00002d", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6230ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000015"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000013"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4205497bfe12bb000013"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000030", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4205497bfe12bb000017"} update={"$set"=>{"acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}, "503b4205497bfe12bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4205497bfe12bb000015"=>"r"}, "invited"=>"503b4205497bfe12bb000011", "at"=>2012-08-27 11:46:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4205497bfe12bb000015"], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:46:45 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000033", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}]}} flags=[] (0.2129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000035", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000011"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4205497bfe12bb000034"} update={"$push"=>{:label_ids=>"503b4205497bfe12bb000013"}} flags=[:multi] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2589ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1659ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"16b3", "confirmation_key"=>"e8cb57f77c0d8ff8deb0"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"700f", "confirmation_key"=>"1ce03e93d35db2a7a9fa"}] flags=[] (0.1042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4205497bfe12bb000039", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000036"}]}] flags=[] (0.1671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00003d", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000036"}]}] flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4205497bfe12bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4205497bfe12bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4205497bfe12bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:46:45 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4205497bfe12bb00003f", "at"=>2012-08-27 09:46:45 UTC, "changes"=>{}, "user_id"=>"503b4205497bfe12bb000036"}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4205497bfe12bb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4592ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4205497bfe12bb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4205497bfe12bb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"16a9", "confirmation_key"=>"bef362acef4c1af34cd6"}] flags=[] (0.0823ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"43d8", "confirmation_key"=>"357ff3128e579fb4a4ac"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5102ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4205497bfe12bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4983ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4205497bfe12bb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"07f6", "confirmation_key"=>"beacca54aed8d379ab39"}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4592ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4205497bfe12bb000044", "user_ids"=>["503b4205497bfe12bb000043"], "name"=>"g1"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4205497bfe12bb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4205497bfe12bb000044"}} flags=[:multi] (0.0920ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4205497bfe12bb000044"]}}]}} (0.4230ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (19.0120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2341ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.5008ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a1de", "confirmation_key"=>"97f897fe50336606dd10"}] flags=[] (0.1013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6fca", "confirmation_key"=>"373eef629d3dd7ec38ad"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000004", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000001"}]}] flags=[] (0.1671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000003"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}, "503b4231497bfe13bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4231497bfe13bb000001", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000007", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000001"}]}]}} flags=[] (0.2491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4231497bfe13bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6092ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5469ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4231497bfe13bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6433ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2732ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"cda9", "confirmation_key"=>"3c74909fb0a055c53d86"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00000c", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb00000a"}]}] flags=[] (0.1373ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00000e", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb00000a"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000010", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb00000a"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4231497bfe13bb00000d"} update={"$push"=>{:label_ids=>"503b4231497bfe13bb00000b"}} flags=[:multi] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4231497bfe13bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2911ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4231497bfe13bb00000f"} update={"$push"=>{:label_ids=>"503b4231497bfe13bb00000d"}} flags=[:multi] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.2708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3171ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0899ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2179ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4351ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f458", "confirmation_key"=>"8d175e42818feb265eb3"}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4e6b", "confirmation_key"=>"66750ef5d0f0cac71143"}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3440ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000014", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000015", "version"=>1, "label_ids"=>["503b4231497bfe13bb000013"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000016", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000017", "version"=>1, "label_ids"=>["503b4231497bfe13bb000015"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000018", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb000013"} flags=[] limit=0 skip=0 fields=nil (0.5279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb000015"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5348ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000013"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00001b", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4916ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000015"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000013"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4231497bfe13bb000013"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00001e", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb000015"} flags=[] limit=0 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7212ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000017"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000015"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4231497bfe13bb000015"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000021", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4231497bfe13bb000017"} flags=[] limit=0 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8090ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000013"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000024", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2513ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6149ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000015"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4231497bfe13bb000013"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000013"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000027", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2367ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5581ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000017"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4231497bfe13bb000015"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000015"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00002a", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.6208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6762ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000013"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}, "503b4231497bfe13bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00002d", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2167ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000015"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000013"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4231497bfe13bb000013"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000030", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6201ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4231497bfe13bb000017"} update={"$set"=>{"acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}, "503b4231497bfe13bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4231497bfe13bb000015"=>"r"}, "invited"=>"503b4231497bfe13bb000011", "at"=>2012-08-27 11:47:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4231497bfe13bb000015"], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:47:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000033", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}]}} flags=[] (0.2079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3021ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000035", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000011"}]}] flags=[] (0.1709ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4231497bfe13bb000034"} update={"$push"=>{:label_ids=>"503b4231497bfe13bb000013"}} flags=[:multi] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2763ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2468ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1559ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"c381", "confirmation_key"=>"adc2995dd58d24b89b12"}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3202ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"3b82", "confirmation_key"=>"da219102b4d442730aae"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3641ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4231497bfe13bb000039", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000036"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00003d", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000036"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4231497bfe13bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4231497bfe13bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4231497bfe13bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:47:29 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4231497bfe13bb00003f", "at"=>2012-08-27 09:47:29 UTC, "changes"=>{}, "user_id"=>"503b4231497bfe13bb000036"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4231497bfe13bb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4231497bfe13bb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4231497bfe13bb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3667ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4432ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"b76b", "confirmation_key"=>"e0c347ff1d93bb3f9286"}] flags=[] (0.0761ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3858ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8c9b", "confirmation_key"=>"2d14a8f52e23beb8d5c5"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4231497bfe13bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4231497bfe13bb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"a3be", "confirmation_key"=>"18c02f2425eb0f4e8bd5"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4231497bfe13bb000044", "user_ids"=>["503b4231497bfe13bb000043"], "name"=>"g1"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4231497bfe13bb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4231497bfe13bb000044"}} flags=[:multi] (0.0930ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4231497bfe13bb000044"]}}]}} (0.3431ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (19.0208ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2420ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f997", "confirmation_key"=>"808fb35f7fb5c530fb3d"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ebc3", "confirmation_key"=>"73ebd659465ba946610d"}] flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000004", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000001"}]}] flags=[] (0.1848ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000003"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}, "503b4251497bfe14bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4251497bfe14bb000001", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000007", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4003ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4251497bfe14bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4251497bfe14bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6757ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3109ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1640ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4988ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d16c", "confirmation_key"=>"3f83d6c45f0d18674a35"}] flags=[] (0.1032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00000c", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb00000a"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00000e", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb00000a"}]}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000010", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb00000a"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4251497bfe14bb00000d"} update={"$push"=>{:label_ids=>"503b4251497bfe14bb00000b"}} flags=[:multi] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.3061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4251497bfe14bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.5393ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4251497bfe14bb00000f"} update={"$push"=>{:label_ids=>"503b4251497bfe14bb00000d"}} flags=[:multi] (0.1121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.3378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2356ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2310ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8647", "confirmation_key"=>"1193fb4a7175d6b17188"}] flags=[] (0.1130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4ff9", "confirmation_key"=>"d170d22d6704de99325a"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000014", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3221ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000015", "version"=>1, "label_ids"=>["503b4251497bfe14bb000013"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000016", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5512ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000017", "version"=>1, "label_ids"=>["503b4251497bfe14bb000015"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000018", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}] flags=[] (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb000013"} flags=[] limit=0 skip=0 fields=nil (0.6962ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb000015"} flags=[] limit=0 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6483ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000013"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00001b", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5789ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000015"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000013"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4251497bfe14bb000013"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00001e", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb000015"} flags=[] limit=0 skip=0 fields=nil (0.5751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000017"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000015"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4251497bfe14bb000015"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000021", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000011.privileges"=>/r\w*/, "label_ids"=>"503b4251497bfe14bb000017"} flags=[] limit=0 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7019ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000013"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000024", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5708ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000015"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4251497bfe14bb000013"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000013"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000027", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000017"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4251497bfe14bb000015"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000015"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00002a", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7024ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000013"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}, "503b4251497bfe14bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00002d", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6042ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000015"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000013"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4251497bfe14bb000013"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000030", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6089ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4251497bfe14bb000017"} update={"$set"=>{"acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}, "503b4251497bfe14bb000012"=>{"privileges"=>"r", "inherited"=>{"503b4251497bfe14bb000015"=>"r"}, "invited"=>"503b4251497bfe14bb000011", "at"=>2012-08-27 11:48:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4251497bfe14bb000015"], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:48:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000033", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}]}} flags=[] (0.2160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000035", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000011"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4251497bfe14bb000034"} update={"$push"=>{:label_ids=>"503b4251497bfe14bb000013"}} flags=[:multi] (0.0646ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2258ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1528ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7710", "confirmation_key"=>"b00e63df96fb6c864ff5"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"3e8f", "confirmation_key"=>"84336dbf0ba6ca046ac4"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4251497bfe14bb000039", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000036"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4880ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00003d", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000036"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4251497bfe14bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4251497bfe14bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4251497bfe14bb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:48:01 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4251497bfe14bb00003f", "at"=>2012-08-27 09:48:01 UTC, "changes"=>{}, "user_id"=>"503b4251497bfe14bb000036"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4251497bfe14bb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4251497bfe14bb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4251497bfe14bb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"ea30", "confirmation_key"=>"98d619032abab7ae5f7a"}] flags=[] (0.1338ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"02e3", "confirmation_key"=>"03bf79516eb173d62a01"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4251497bfe14bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4251497bfe14bb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"b987", "confirmation_key"=>"2a54abb6b9cc1f418588"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4251497bfe14bb000044", "user_ids"=>["503b4251497bfe14bb000043"], "name"=>"g1"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4251497bfe14bb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4251497bfe14bb000044"}} flags=[:multi] (0.0918ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4251497bfe14bb000044"]}}]}} (0.4160ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7079ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1979ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5050ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3cf1", "confirmation_key"=>"236bcb8b948f6d5cb993"}] flags=[] (0.1018ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7de5", "confirmation_key"=>"0087fcde691e7d3edc89"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000004", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000001"}]}] flags=[] (0.1721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5827ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6351ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b42a2497bfe15bb000003"} update={"$set"=>{"acl"=>{"503b42a2497bfe15bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}, "503b42a2497bfe15bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b42a2497bfe15bb000001", "at"=>2012-08-27 11:49:22 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:49:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000007", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000001"}]}]}} flags=[] (0.2632ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6223ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b42a2497bfe15bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5398ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b42a2497bfe15bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6630ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3729ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3812ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5976", "confirmation_key"=>"b80977e87dc92eb10729"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4108ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb00000c", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb00000a"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3822ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb00000e", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb00000a"}]}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3698ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000010", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb00000a"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42a2497bfe15bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42a2497bfe15bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.2820ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2220ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1659ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"daa6", "confirmation_key"=>"cdfe10f1d6f46d7b5b0c"}] flags=[] (0.0772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"eb76", "confirmation_key"=>"47067d7f838c73f329d3"}] flags=[] (0.1264ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000014", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}] flags=[] (0.1700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5620ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000015", "version"=>1, "label_ids"=>["503b42a2497bfe15bb000013"], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000016", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}] flags=[] (0.1447ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000017", "version"=>1, "label_ids"=>["503b42a2497bfe15bb000015"], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000018", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}] flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5729ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b42a2497bfe15bb000013"} update={"$set"=>{"acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}, "503b42a2497bfe15bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b42a2497bfe15bb000011", "at"=>2012-08-27 11:49:22 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:49:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb00001b", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}]}} flags=[] (0.2367ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6330ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b42a2497bfe15bb000013"} update={"$set"=>{"version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:49:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb00001b", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}]}} flags=[] (0.1831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42a2497bfe15bb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42a2497bfe15bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7448ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b42a2497bfe15bb000013"} update={"$set"=>{"acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}, "503b42a2497bfe15bb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b42a2497bfe15bb000011", "at"=>2012-08-27 11:49:22 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:49:22 UTC}, "503b42a2497bfe15bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b42a2497bfe15bb000011", "at"=>2012-08-27 09:49:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000020", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}, {"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:49:22 UTC}, "503b42a2497bfe15bb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b42a2497bfe15bb000011", "at"=>2012-08-27 09:49:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000021", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000011"}]}]}} flags=[] (0.3979ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2182ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000022", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6f96", "confirmation_key"=>"3bf266dfcaf1d70d5328"}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4706ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb000023", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"430f", "confirmation_key"=>"626b8cd2b75c319476cd"}] flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3133ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000022"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000025", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000022"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb000028", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb000028", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000022"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb000029", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000022"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00002a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4587ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42a2497bfe15bb00002a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42a2497bfe15bb000022"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:22 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b42a2497bfe15bb00002b", "at"=>2012-08-27 09:49:22 UTC, "changes"=>{}, "user_id"=>"503b42a2497bfe15bb000022"}]}] flags=[] (0.1452ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000022.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b42a2497bfe15bb000023.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42a2497bfe15bb000022.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42a2497bfe15bb000024"} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00002c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb00002c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"9cdc", "confirmation_key"=>"a42d37092279be20a51f"}] flags=[] (0.0858ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00002d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5503ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb00002d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"03e5", "confirmation_key"=>"86d616a36a06a7ceb194"}] flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00002e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42a2497bfe15bb00002f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42a2497bfe15bb00002f", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"e620", "confirmation_key"=>"20dcbe9a6bf687cb9887"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3943ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b42a2497bfe15bb000030", "user_ids"=>["503b42a2497bfe15bb00002f"], "name"=>"g1"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b42a2497bfe15bb00002f"]}}]} update={"$addToSet"=>{"group_ids"=>"503b42a2497bfe15bb000030"}} flags=[:multi] (0.0992ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b42a2497bfe15bb000030"]}}]}} (0.4389ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7172ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1900ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42ac497bfe16bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42ac497bfe16bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ce79", "confirmation_key"=>"183656fe508222a4b011"}] flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42ac497bfe16bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42ac497bfe16bb000002", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42ac497bfe16bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:32 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42ac497bfe16bb000003", "at"=>2012-08-27 09:49:32 UTC, "changes"=>{}, "user_id"=>"503b42ac497bfe16bb000001"}]}] flags=[] (0.1929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42ac497bfe16bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42ac497bfe16bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42ac497bfe16bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:32 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b42ac497bfe16bb000005", "at"=>2012-08-27 09:49:32 UTC, "changes"=>{}, "user_id"=>"503b42ac497bfe16bb000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42ac497bfe16bb000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3803ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42ac497bfe16bb000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42ac497bfe16bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:32 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b42ac497bfe16bb000007", "at"=>2012-08-27 09:49:32 UTC, "changes"=>{}, "user_id"=>"503b42ac497bfe16bb000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42ac497bfe16bb000004"} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42ac497bfe16bb000006"} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7119ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1762ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42b5497bfe17bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42b5497bfe17bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e3be", "confirmation_key"=>"db5c29c9e16de5454fae"}] flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42b5497bfe17bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42b5497bfe17bb000002", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42b5497bfe17bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:41 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42b5497bfe17bb000003", "at"=>2012-08-27 09:49:41 UTC, "changes"=>{}, "user_id"=>"503b42b5497bfe17bb000001"}]}] flags=[] (0.1929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42b5497bfe17bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42b5497bfe17bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42b5497bfe17bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:41 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b42b5497bfe17bb000005", "at"=>2012-08-27 09:49:41 UTC, "changes"=>{}, "user_id"=>"503b42b5497bfe17bb000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42b5497bfe17bb000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42b5497bfe17bb000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42b5497bfe17bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:49:41 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b42b5497bfe17bb000007", "at"=>2012-08-27 09:49:41 UTC, "changes"=>{}, "user_id"=>"503b42b5497bfe17bb000001"}]}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42b5497bfe17bb000002"} flags=[] limit=0 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b42b5497bfe17bb000004"} update={"$push"=>{:label_ids=>"503b42b5497bfe17bb000002"}} flags=[:multi] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42b5497bfe17bb000002"} flags=[] limit=0 skip=0 fields=nil (0.4253ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42b5497bfe17bb000002"} flags=[] limit=0 skip=0 fields=nil (0.3221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42b5497bfe17bb000004"} flags=[] limit=-1 skip=0 fields=nil (0.2661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b42b5497bfe17bb000002"]}} flags=[] limit=0 skip=0 fields=nil (0.5283ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42b5497bfe17bb000002"} flags=[] limit=0 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3541ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b42b5497bfe17bb000006"} update={"$push"=>{:label_ids=>"503b42b5497bfe17bb000004"}} flags=[:multi] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42b5497bfe17bb000006"} flags=[] limit=-1 skip=0 fields=nil (0.5050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42b5497bfe17bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1819ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b42d4497bfe18bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b42d4497bfe18bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"40a4", "confirmation_key"=>"b47a50a6b50957bf36b9"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42d4497bfe18bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42d4497bfe18bb000002", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42d4497bfe18bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b42d4497bfe18bb000003", "at"=>2012-08-27 09:50:12 UTC, "changes"=>{}, "user_id"=>"503b42d4497bfe18bb000001"}]}] flags=[] (0.1791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42d4497bfe18bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42d4497bfe18bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42d4497bfe18bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b42d4497bfe18bb000005", "at"=>2012-08-27 09:50:12 UTC, "changes"=>{}, "user_id"=>"503b42d4497bfe18bb000001"}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b42d4497bfe18bb000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b42d4497bfe18bb000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b42d4497bfe18bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:12 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b42d4497bfe18bb000007", "at"=>2012-08-27 09:50:12 UTC, "changes"=>{}, "user_id"=>"503b42d4497bfe18bb000001"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42d4497bfe18bb000002"} flags=[] limit=0 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b42d4497bfe18bb000004"} update={"$push"=>{:label_ids=>"503b42d4497bfe18bb000002"}} flags=[:multi] (0.0803ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42d4497bfe18bb000002"} flags=[] limit=0 skip=0 fields=nil (0.4492ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42d4497bfe18bb000002"} flags=[] limit=0 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42d4497bfe18bb000004"} flags=[] limit=-1 skip=0 fields=nil (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b42d4497bfe18bb000002"]}} flags=[] limit=0 skip=0 fields=nil (0.5732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b42d4497bfe18bb000002"]}} flags=[] limit=0 skip=0 fields=nil (0.4258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42d4497bfe18bb000002"} flags=[] limit=0 skip=0 fields=nil (0.3812ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "label_ids"=>"503b42d4497bfe18bb000002"} flags=[] limit=0 skip=0 fields=nil (0.3111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2470ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b42d4497bfe18bb000006"} update={"$push"=>{:label_ids=>"503b42d4497bfe18bb000004"}} flags=[:multi] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b42d4497bfe18bb000006"} flags=[] limit=-1 skip=0 fields=nil (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b42d4497bfe18bb000004"]}} flags=[] limit=0 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b42d4497bfe18bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b42d4497bfe18bb000004"]}} flags=[] limit=0 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6838ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2012ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1638ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4300497bfe19bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4300497bfe19bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"84cf", "confirmation_key"=>"a4a4b564f76fb87732aa"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4300497bfe19bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4300497bfe19bb000002", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4300497bfe19bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4300497bfe19bb000003", "at"=>2012-08-27 09:50:56 UTC, "changes"=>{}, "user_id"=>"503b4300497bfe19bb000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4300497bfe19bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4300497bfe19bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4300497bfe19bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:56 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4300497bfe19bb000005", "at"=>2012-08-27 09:50:56 UTC, "changes"=>{}, "user_id"=>"503b4300497bfe19bb000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4300497bfe19bb000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4300497bfe19bb000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4300497bfe19bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:50:56 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4300497bfe19bb000007", "at"=>2012-08-27 09:50:56 UTC, "changes"=>{}, "user_id"=>"503b4300497bfe19bb000001"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4300497bfe19bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4300497bfe19bb000002"} flags=[] limit=0 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4300497bfe19bb000004"} update={"$push"=>{:label_ids=>"503b4300497bfe19bb000002"}} flags=[:multi] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4300497bfe19bb000004"} flags=[] limit=-1 skip=0 fields=nil (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4300497bfe19bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4300497bfe19bb000002"]}} flags=[] limit=0 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4300497bfe19bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3080ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4300497bfe19bb000006"} update={"$push"=>{:label_ids=>"503b4300497bfe19bb000004"}} flags=[:multi] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4300497bfe19bb000006"} flags=[] limit=-1 skip=0 fields=nil (0.2789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.4031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2048ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"509f", "confirmation_key"=>"b14cdf87cd3633ea4443"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4205", "confirmation_key"=>"3959c400aa02edf5cbed"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000004", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000001"}]}] flags=[] (0.1781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5157ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000003"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}, "503b4305497bfe1abb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4305497bfe1abb000001", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000007", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000001"}]}]}} flags=[] (0.2761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb000003"} flags=[] limit=0 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4305497bfe1abb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5589ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4305497bfe1abb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5529ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d3c5", "confirmation_key"=>"dded5f90aceddb30ebc7"}] flags=[] (0.1478ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00000c", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb00000a"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00000e", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb00000a"}]}] flags=[] (0.1230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000010", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb00000a"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4086ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4305497bfe1abb00000d"} update={"$push"=>{:label_ids=>"503b4305497bfe1abb00000b"}} flags=[:multi] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4305497bfe1abb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3848ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4305497bfe1abb00000f"} update={"$push"=>{:label_ids=>"503b4305497bfe1abb00000d"}} flags=[:multi] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.4733ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2890ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2418ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000011", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a8f4", "confirmation_key"=>"6a1281e0fc04b20e989c"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000012", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b5a1", "confirmation_key"=>"f64ffde82af6415b748e"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3083ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000014", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000015", "version"=>1, "label_ids"=>["503b4305497bfe1abb000013"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000016", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000017", "version"=>1, "label_ids"=>["503b4305497bfe1abb000015"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000018", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000011.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb000013"} flags=[] limit=0 skip=0 fields=nil (0.4938ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000011.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb000015"} flags=[] limit=0 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000013"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00001b", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.3259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000015"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000013"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4305497bfe1abb000013"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00001e", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000011.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb000015"} flags=[] limit=0 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8671ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000017"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000015"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4305497bfe1abb000015"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000021", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.3102ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000011.privileges"=>/r\w*/, "label_ids"=>"503b4305497bfe1abb000017"} flags=[] limit=0 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb000015"} flags=[] limit=-1 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb000017"} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000013", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5748ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000013"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000024", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000015", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6468ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000015"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4305497bfe1abb000013"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000013"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000027", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6702ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000017"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4305497bfe1abb000015"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000015"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00002a", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb000015"} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb000017"} flags=[] limit=-1 skip=0 fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000013", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7367ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000013"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}, "503b4305497bfe1abb000012"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00002d", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000015", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6437ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000015"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000013"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4305497bfe1abb000013"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000030", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6099ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4305497bfe1abb000017"} update={"$set"=>{"acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}, "503b4305497bfe1abb000012"=>{"privileges"=>"r", "inherited"=>{"503b4305497bfe1abb000015"=>"r"}, "invited"=>"503b4305497bfe1abb000011", "at"=>2012-08-27 11:51:01 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4305497bfe1abb000015"], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:01 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000033", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}]}} flags=[] (0.3171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000034", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000011"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000035", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000011"}]}] flags=[] (0.1557ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4305497bfe1abb000034"} update={"$push"=>{:label_ids=>"503b4305497bfe1abb000013"}} flags=[:multi] (0.0882ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000011.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3588ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2480ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000036", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3488ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000036", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"db76", "confirmation_key"=>"943b394f917347ba0760"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000037", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"36a6", "confirmation_key"=>"1362553b1d8e9e8da9cf"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4305497bfe1abb000039", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000036"}]}] flags=[] (0.1297ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb00003c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00003d", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000036"}]}] flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4305497bfe1abb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4289ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4305497bfe1abb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4305497bfe1abb000036"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:01 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4305497bfe1abb00003f", "at"=>2012-08-27 09:51:01 UTC, "changes"=>{}, "user_id"=>"503b4305497bfe1abb000036"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000036.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4305497bfe1abb000037.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4305497bfe1abb000036.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1988ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4305497bfe1abb000038"} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000040", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"62d2", "confirmation_key"=>"32058232023f6dbbbe25"}] flags=[] (0.0882ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000041", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7738", "confirmation_key"=>"088ac9b232aac60d2821"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4305497bfe1abb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5019ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4305497bfe1abb000043", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"4a4e", "confirmation_key"=>"2574e28c047531e4ed75"}] flags=[] (0.0932ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3209ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4305497bfe1abb000044", "user_ids"=>["503b4305497bfe1abb000043"], "name"=>"g1"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4305497bfe1abb000043"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4305497bfe1abb000044"}} flags=[:multi] (0.0949ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4305497bfe1abb000044"]}}]}} (0.3548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1771ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b430b497bfe1bbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"16a8", "confirmation_key"=>"e01ec88165857d8947d0"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4034ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b430b497bfe1bbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"010c", "confirmation_key"=>"7cdde6649d66cf62d4ce"}] flags=[] (0.0677ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b430b497bfe1bbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000004", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b430b497bfe1bbb000005", "version"=>1, "label_ids"=>["503b430b497bfe1bbb000003"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000006", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b430b497bfe1bbb000007", "version"=>1, "label_ids"=>["503b430b497bfe1bbb000005"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000008", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}] flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b430b497bfe1bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b430b497bfe1bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b430b497bfe1bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b430b497bfe1bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000003"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb00000b", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000005"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000003"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b430b497bfe1bbb000003"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb00000e", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b430b497bfe1bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b430b497bfe1bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000007"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000005"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b430b497bfe1bbb000005"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000011", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b430b497bfe1bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b430b497bfe1bbb000007"} flags=[] limit=0 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b430b497bfe1bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5996ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b430b497bfe1bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6919ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8950ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000003"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000014", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.4289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8430ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000005"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b430b497bfe1bbb000003"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000003"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000017", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4911ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000007"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b430b497bfe1bbb000005"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000005"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb00001a", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.6552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b430b497bfe1bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b430b497bfe1bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7460ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000003"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}, "503b430b497bfe1bbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb00001d", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000005"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000003"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b430b497bfe1bbb000003"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000020", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2217ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6101ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b430b497bfe1bbb000007"} update={"$set"=>{"acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}, "503b430b497bfe1bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b430b497bfe1bbb000005"=>"r"}, "invited"=>"503b430b497bfe1bbb000001", "at"=>2012-08-27 11:51:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b430b497bfe1bbb000005"], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000023", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b430b497bfe1bbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b430b497bfe1bbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b430b497bfe1bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:07 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b430b497bfe1bbb000025", "at"=>2012-08-27 09:51:07 UTC, "changes"=>{}, "user_id"=>"503b430b497bfe1bbb000001"}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b430b497bfe1bbb000024"} update={"$push"=>{:label_ids=>"503b430b497bfe1bbb000003"}} flags=[:multi] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b430b497bfe1bbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3150ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6437ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1721ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4339497bfe1cbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"cb20", "confirmation_key"=>"02d8aad52b9dd700d65b"}] flags=[] (0.0978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3977ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4339497bfe1cbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5774", "confirmation_key"=>"afb8ed027595395e782b"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4172ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4339497bfe1cbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000004", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}] flags=[] (0.1948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3483ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4339497bfe1cbb000005", "version"=>1, "label_ids"=>["503b4339497bfe1cbb000003"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000006", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3347ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4339497bfe1cbb000007", "version"=>1, "label_ids"=>["503b4339497bfe1cbb000005"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000008", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}] flags=[] (0.1209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4339497bfe1cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4339497bfe1cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4339497bfe1cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4339497bfe1cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5429ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000003"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb00000b", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5162ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000005"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000003"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4339497bfe1cbb000003"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb00000e", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4339497bfe1cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4339497bfe1cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000007"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000005"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4339497bfe1cbb000005"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000011", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4339497bfe1cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4339497bfe1cbb000007"} flags=[] limit=0 skip=0 fields=nil (0.2887ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4339497bfe1cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4339497bfe1cbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8812ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000003"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000014", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5083ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000005"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4339497bfe1cbb000003"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000003"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000017", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000007"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4339497bfe1cbb000005"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000005"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb00001a", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4339497bfe1cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4339497bfe1cbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6702ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000003"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}, "503b4339497bfe1cbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb00001d", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000005"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000003"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4339497bfe1cbb000003"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000020", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.3371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4339497bfe1cbb000007"} update={"$set"=>{"acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}, "503b4339497bfe1cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4339497bfe1cbb000005"=>"r"}, "invited"=>"503b4339497bfe1cbb000001", "at"=>2012-08-27 11:51:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4339497bfe1cbb000005"], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:51:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000023", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}]}} flags=[] (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4339497bfe1cbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4606ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4339497bfe1cbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4339497bfe1cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:51:53 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4339497bfe1cbb000025", "at"=>2012-08-27 09:51:53 UTC, "changes"=>{}, "user_id"=>"503b4339497bfe1cbb000001"}]}] flags=[] (0.1538ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4339497bfe1cbb000024"} update={"$push"=>{:label_ids=>"503b4339497bfe1cbb000003"}} flags=[:multi] (0.0672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4339497bfe1cbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6781ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1829ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4060ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4368497bfe1dbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"48e9", "confirmation_key"=>"e22bbbd7702c914fae5b"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4368497bfe1dbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1c28", "confirmation_key"=>"919b750d47cf142bf628"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4301ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4368497bfe1dbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000004", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}] flags=[] (0.1671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4368497bfe1dbb000005", "version"=>1, "label_ids"=>["503b4368497bfe1dbb000003"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000006", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4368497bfe1dbb000007", "version"=>1, "label_ids"=>["503b4368497bfe1dbb000005"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000008", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4368497bfe1dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4368497bfe1dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4368497bfe1dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4368497bfe1dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3862ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000003"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb00000b", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5143ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000005"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000003"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4368497bfe1dbb000003"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb00000e", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4368497bfe1dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4368497bfe1dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000007"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000005"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4368497bfe1dbb000005"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000011", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4368497bfe1dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b4368497bfe1dbb000007"} flags=[] limit=0 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4368497bfe1dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4368497bfe1dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8788ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000003"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000014", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.5012ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7830ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000005"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4368497bfe1dbb000003"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000003"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000017", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000007"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4368497bfe1dbb000005"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000005"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb00001a", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4368497bfe1dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4368497bfe1dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7570ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000003"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}, "503b4368497bfe1dbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb00001d", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6382ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000005"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000003"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4368497bfe1dbb000003"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000020", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6969ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4368497bfe1dbb000007"} update={"$set"=>{"acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}, "503b4368497bfe1dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b4368497bfe1dbb000005"=>"r"}, "invited"=>"503b4368497bfe1dbb000001", "at"=>2012-08-27 11:52:40 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4368497bfe1dbb000005"], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:52:40 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000023", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}]}} flags=[] (0.2768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4368497bfe1dbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4368497bfe1dbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4368497bfe1dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:52:40 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4368497bfe1dbb000025", "at"=>2012-08-27 09:52:40 UTC, "changes"=>{}, "user_id"=>"503b4368497bfe1dbb000001"}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4368497bfe1dbb000024"} update={"$push"=>{:label_ids=>"503b4368497bfe1dbb000003"}} flags=[:multi] (0.0670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4368497bfe1dbb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5600ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6568ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1709ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4398497bfe1ebb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c7f8", "confirmation_key"=>"834663db0941c83e494f"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4398497bfe1ebb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8473", "confirmation_key"=>"613727826148f1c64608"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4398497bfe1ebb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000004", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4398497bfe1ebb000005", "version"=>1, "label_ids"=>["503b4398497bfe1ebb000003"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000006", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4398497bfe1ebb000007", "version"=>1, "label_ids"=>["503b4398497bfe1ebb000005"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000008", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4398497bfe1ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4398497bfe1ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4398497bfe1ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4398497bfe1ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6049ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000003"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb00000b", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5071ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000005"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000003"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4398497bfe1ebb000003"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb00000e", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4398497bfe1ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4398497bfe1ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000007"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000005"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4398497bfe1ebb000005"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000011", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4398497bfe1ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4398497bfe1ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4398497bfe1ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.7203ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4398497bfe1ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8609ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000003"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000014", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.4351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6380ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000005"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4398497bfe1ebb000003"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000003"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000017", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000007"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4398497bfe1ebb000005"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000005"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb00001a", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.3021ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4398497bfe1ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4398497bfe1ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9820ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000003"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}, "503b4398497bfe1ebb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb00001d", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6740ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000005"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000003"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4398497bfe1ebb000003"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000020", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5498ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4398497bfe1ebb000007"} update={"$set"=>{"acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}, "503b4398497bfe1ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4398497bfe1ebb000005"=>"r"}, "invited"=>"503b4398497bfe1ebb000001", "at"=>2012-08-27 11:53:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4398497bfe1ebb000005"], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:53:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000023", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}]}} flags=[] (0.2081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4398497bfe1ebb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4398497bfe1ebb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4398497bfe1ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:53:28 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4398497bfe1ebb000025", "at"=>2012-08-27 09:53:28 UTC, "changes"=>{}, "user_id"=>"503b4398497bfe1ebb000001"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4398497bfe1ebb000024"} update={"$push"=>{:label_ids=>"503b4398497bfe1ebb000003"}} flags=[:multi] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4398497bfe1ebb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1953ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1690ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b43cb497bfe1fbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3587", "confirmation_key"=>"b01dcf28298c87fb172d"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b43cb497bfe1fbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b05c", "confirmation_key"=>"5cdc15b34f631136e91c"}] flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4189ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b43cb497bfe1fbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000004", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4563ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b43cb497bfe1fbb000005", "version"=>1, "label_ids"=>["503b43cb497bfe1fbb000003"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000006", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}] flags=[] (0.1264ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b43cb497bfe1fbb000007", "version"=>1, "label_ids"=>["503b43cb497bfe1fbb000005"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000008", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}] flags=[] (0.1202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b43cb497bfe1fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b43cb497bfe1fbb000003"} flags=[] limit=0 skip=0 fields=nil (0.6559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b43cb497bfe1fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b43cb497bfe1fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6042ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000003"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb00000b", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.2630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000005"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000003"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b43cb497bfe1fbb000003"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb00000e", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.2089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b43cb497bfe1fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b43cb497bfe1fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000007"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000005"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b43cb497bfe1fbb000005"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000011", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b43cb497bfe1fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b43cb497bfe1fbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b43cb497bfe1fbb000005"} flags=[] limit=-1 skip=0 fields=nil (12.8551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b43cb497bfe1fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0180ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000003"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000014", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.3078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6700ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000005"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b43cb497bfe1fbb000003"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000003"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000017", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.4148ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8390ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000007"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b43cb497bfe1fbb000005"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000005"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb00001a", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b43cb497bfe1fbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b43cb497bfe1fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9117ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000003"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb00001d", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000005"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000003"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b43cb497bfe1fbb000003"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000020", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.3808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8380ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b43cb497bfe1fbb000007"} update={"$set"=>{"acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}, "503b43cb497bfe1fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b43cb497bfe1fbb000005"=>"r"}, "invited"=>"503b43cb497bfe1fbb000001", "at"=>2012-08-27 11:54:19 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b43cb497bfe1fbb000005"], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:54:19 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000023", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}]}} flags=[] (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b43cb497bfe1fbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4880ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b43cb497bfe1fbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b43cb497bfe1fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:54:19 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b43cb497bfe1fbb000025", "at"=>2012-08-27 09:54:19 UTC, "changes"=>{}, "user_id"=>"503b43cb497bfe1fbb000001"}]}] flags=[] (0.3030ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b43cb497bfe1fbb000024"} update={"$push"=>{:label_ids=>"503b43cb497bfe1fbb000003"}} flags=[:multi] (0.1211ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1981ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b440d497bfe21bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b440d497bfe21bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"124e", "confirmation_key"=>"7a580c1e65297408c581"}] flags=[] (0.0942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b440d497bfe21bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b440d497bfe21bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"bdc9", "confirmation_key"=>"2eb1c3fd4f9c1864728d"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b440d497bfe21bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000004", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}] flags=[] (0.1802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3221ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b440d497bfe21bb000005", "version"=>1, "label_ids"=>["503b440d497bfe21bb000003"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000006", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b440d497bfe21bb000007", "version"=>1, "label_ids"=>["503b440d497bfe21bb000005"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000008", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b440d497bfe21bb000001.privileges"=>/r\w*/, "label_ids"=>"503b440d497bfe21bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b440d497bfe21bb000001.privileges"=>/r\w*/, "label_ids"=>"503b440d497bfe21bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000003"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b440d497bfe21bb00000b", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000005"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000003"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b440d497bfe21bb000003"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b440d497bfe21bb00000e", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b440d497bfe21bb000001.privileges"=>/r\w*/, "label_ids"=>"503b440d497bfe21bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000007"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000005"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b440d497bfe21bb000005"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000011", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b440d497bfe21bb000001.privileges"=>/r\w*/, "label_ids"=>"503b440d497bfe21bb000007"} flags=[] limit=0 skip=0 fields=nil (0.5860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b440d497bfe21bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b440d497bfe21bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8678ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000003"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000014", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.4120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000005"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b440d497bfe21bb000003"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000003"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000017", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2723ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5670ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000007"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b440d497bfe21bb000005"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000005"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b440d497bfe21bb00001a", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b440d497bfe21bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6571ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b440d497bfe21bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7796ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000003"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}, "503b440d497bfe21bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b440d497bfe21bb00001d", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6068ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000005"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000003"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b440d497bfe21bb000003"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000020", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b440d497bfe21bb000007"} update={"$set"=>{"acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}, "503b440d497bfe21bb000002"=>{"privileges"=>"r", "inherited"=>{"503b440d497bfe21bb000005"=>"r"}, "invited"=>"503b440d497bfe21bb000001", "at"=>2012-08-27 11:55:25 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b440d497bfe21bb000005"], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:55:25 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000023", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}]}} flags=[] (0.2358ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b440d497bfe21bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b440d497bfe21bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b440d497bfe21bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:55:25 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b440d497bfe21bb000025", "at"=>2012-08-27 09:55:25 UTC, "changes"=>{}, "user_id"=>"503b440d497bfe21bb000001"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b440d497bfe21bb000024"} update={"$push"=>{:label_ids=>"503b440d497bfe21bb000003"}} flags=[:multi] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b440d497bfe21bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7088ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2112ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4437497bfe25bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4437497bfe25bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2878", "confirmation_key"=>"ee436d1610b04f8317ee"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4437497bfe25bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4437497bfe25bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3679", "confirmation_key"=>"5ad3996861ed2418fb8d"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4437497bfe25bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000004", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4437497bfe25bb000005", "version"=>1, "label_ids"=>["503b4437497bfe25bb000003"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000006", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2708ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4437497bfe25bb000007", "version"=>1, "label_ids"=>["503b4437497bfe25bb000005"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000008", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4437497bfe25bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4437497bfe25bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4437497bfe25bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4437497bfe25bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5269ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000003"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4437497bfe25bb00000b", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4852ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000005"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000003"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4437497bfe25bb000003"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4437497bfe25bb00000e", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4437497bfe25bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4437497bfe25bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000007"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000005"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4437497bfe25bb000005"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000011", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4437497bfe25bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4437497bfe25bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4437497bfe25bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4437497bfe25bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5407ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000003"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000014", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6201ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000005"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4437497bfe25bb000003"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000003"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000017", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5121ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000007"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4437497bfe25bb000005"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000005"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4437497bfe25bb00001a", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4437497bfe25bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4437497bfe25bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8180ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000003"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}, "503b4437497bfe25bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4437497bfe25bb00001d", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5701ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000005"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000003"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4437497bfe25bb000003"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000020", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6053ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4437497bfe25bb000007"} update={"$set"=>{"acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}, "503b4437497bfe25bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4437497bfe25bb000005"=>"r"}, "invited"=>"503b4437497bfe25bb000001", "at"=>2012-08-27 11:56:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4437497bfe25bb000005"], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:56:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000023", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}]}} flags=[] (0.2167ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4437497bfe25bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4437497bfe25bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4437497bfe25bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:56:07 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4437497bfe25bb000025", "at"=>2012-08-27 09:56:07 UTC, "changes"=>{}, "user_id"=>"503b4437497bfe25bb000001"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4437497bfe25bb000024"} update={"$push"=>{:label_ids=>"503b4437497bfe25bb000003"}} flags=[:multi] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4437497bfe25bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7250ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2129ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4473497bfe28bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4473497bfe28bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f089", "confirmation_key"=>"9e886366972142cdfa46"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4473497bfe28bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4473497bfe28bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f80b", "confirmation_key"=>"21e7d7952af92f0954b4"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4473497bfe28bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000004", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}] flags=[] (0.1612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4473497bfe28bb000005", "version"=>1, "label_ids"=>["503b4473497bfe28bb000003"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000006", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3738ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4473497bfe28bb000007", "version"=>1, "label_ids"=>["503b4473497bfe28bb000005"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000008", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}] flags=[] (0.1223ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4473497bfe28bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4473497bfe28bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4473497bfe28bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4473497bfe28bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5260ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000003"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4473497bfe28bb00000b", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000005"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000003"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4473497bfe28bb000003"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4473497bfe28bb00000e", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4473497bfe28bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4473497bfe28bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000007"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000005"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4473497bfe28bb000005"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000011", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.3541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4473497bfe28bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4473497bfe28bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4473497bfe28bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4473497bfe28bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7823ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000003"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000014", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5260ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000005"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4473497bfe28bb000003"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000003"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000017", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7000ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000007"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4473497bfe28bb000005"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000005"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4473497bfe28bb00001a", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.3932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4473497bfe28bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4473497bfe28bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7699ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000003"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}, "503b4473497bfe28bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4473497bfe28bb00001d", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7460ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000005"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000003"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4473497bfe28bb000003"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000020", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7081ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4473497bfe28bb000007"} update={"$set"=>{"acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}, "503b4473497bfe28bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4473497bfe28bb000005"=>"r"}, "invited"=>"503b4473497bfe28bb000001", "at"=>2012-08-27 11:57:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4473497bfe28bb000005"], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000023", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4473497bfe28bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4473497bfe28bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4473497bfe28bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:07 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4473497bfe28bb000025", "at"=>2012-08-27 09:57:07 UTC, "changes"=>{}, "user_id"=>"503b4473497bfe28bb000001"}]}] flags=[] (0.1373ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4473497bfe28bb000024"} update={"$push"=>{:label_ids=>"503b4473497bfe28bb000003"}} flags=[:multi] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4473497bfe28bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2398ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6609ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1559ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4482497bfe29bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4482497bfe29bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ba06", "confirmation_key"=>"2657a1d29e82180cf327"}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4482497bfe29bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4482497bfe29bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2c92", "confirmation_key"=>"727a857ef11c1fa1dd17"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4482497bfe29bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000004", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4482497bfe29bb000005", "version"=>1, "label_ids"=>["503b4482497bfe29bb000003"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000006", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4482497bfe29bb000007", "version"=>1, "label_ids"=>["503b4482497bfe29bb000005"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000008", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4482497bfe29bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4482497bfe29bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4482497bfe29bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4482497bfe29bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6013ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000003"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4482497bfe29bb00000b", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5147ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000005"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000003"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4482497bfe29bb000003"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4482497bfe29bb00000e", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4482497bfe29bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4482497bfe29bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000007"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000005"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4482497bfe29bb000005"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000011", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2823ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4482497bfe29bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4482497bfe29bb000007"} flags=[] limit=0 skip=0 fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4482497bfe29bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4482497bfe29bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8228ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000003"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000014", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.5183ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5877ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000005"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4482497bfe29bb000003"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000003"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000017", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000007"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4482497bfe29bb000005"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000005"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4482497bfe29bb00001a", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4482497bfe29bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4482497bfe29bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7780ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000003"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}, "503b4482497bfe29bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4482497bfe29bb00001d", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7160ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000005"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000003"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4482497bfe29bb000003"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000020", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7410ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4482497bfe29bb000007"} update={"$set"=>{"acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}, "503b4482497bfe29bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4482497bfe29bb000005"=>"r"}, "invited"=>"503b4482497bfe29bb000001", "at"=>2012-08-27 11:57:22 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4482497bfe29bb000005"], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:22 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000023", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}]}} flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4482497bfe29bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4072ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4482497bfe29bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4482497bfe29bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:22 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4482497bfe29bb000025", "at"=>2012-08-27 09:57:22 UTC, "changes"=>{}, "user_id"=>"503b4482497bfe29bb000001"}]}] flags=[] (0.1578ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4482497bfe29bb000024"} update={"$push"=>{:label_ids=>"503b4482497bfe29bb000003"}} flags=[:multi] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4482497bfe29bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2451ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6618ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4489497bfe2abb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4489497bfe2abb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4877", "confirmation_key"=>"e1ef6b5a0bdf0c5f5d82"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4489497bfe2abb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4489497bfe2abb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3f3b", "confirmation_key"=>"e59cf6f47b517cb5698b"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4489497bfe2abb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000004", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}] flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4489497bfe2abb000005", "version"=>1, "label_ids"=>["503b4489497bfe2abb000003"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000006", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4489497bfe2abb000007", "version"=>1, "label_ids"=>["503b4489497bfe2abb000005"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000008", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4489497bfe2abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4489497bfe2abb000003"} flags=[] limit=0 skip=0 fields=nil (0.6220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4489497bfe2abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4489497bfe2abb000005"} flags=[] limit=0 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4938ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000003"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4489497bfe2abb00000b", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4530ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000005"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000003"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4489497bfe2abb000003"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4489497bfe2abb00000e", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2728ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4489497bfe2abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4489497bfe2abb000005"} flags=[] limit=0 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5467ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000007"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000005"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4489497bfe2abb000005"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000011", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.4330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4489497bfe2abb000001.privileges"=>/r\w*/, "label_ids"=>"503b4489497bfe2abb000007"} flags=[] limit=0 skip=0 fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4489497bfe2abb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4489497bfe2abb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6933ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000003"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000014", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2553ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8361ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000005"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4489497bfe2abb000003"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000003"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000017", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.3009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6013ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000007"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4489497bfe2abb000005"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000005"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4489497bfe2abb00001a", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4489497bfe2abb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4489497bfe2abb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1141ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000003"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}, "503b4489497bfe2abb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4489497bfe2abb00001d", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6588ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000005"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000003"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4489497bfe2abb000003"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000020", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4489497bfe2abb000007"} update={"$set"=>{"acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}, "503b4489497bfe2abb000002"=>{"privileges"=>"r", "inherited"=>{"503b4489497bfe2abb000005"=>"r"}, "invited"=>"503b4489497bfe2abb000001", "at"=>2012-08-27 11:57:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4489497bfe2abb000005"], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:57:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000023", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}]}} flags=[] (0.2909ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4489497bfe2abb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4489497bfe2abb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4489497bfe2abb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:57:29 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4489497bfe2abb000025", "at"=>2012-08-27 09:57:29 UTC, "changes"=>{}, "user_id"=>"503b4489497bfe2abb000001"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4489497bfe2abb000024"} update={"$push"=>{:label_ids=>"503b4489497bfe2abb000003"}} flags=[:multi] (0.1013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4489497bfe2abb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7050ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1922ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44c7497bfe2bbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1a18", "confirmation_key"=>"91d6aa844be62fbfaa26"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44c7497bfe2bbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9986", "confirmation_key"=>"179b7182e2453d7ff3b9"}] flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44c7497bfe2bbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000004", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}] flags=[] (0.1881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44c7497bfe2bbb000005", "version"=>1, "label_ids"=>["503b44c7497bfe2bbb000003"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000006", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44c7497bfe2bbb000007", "version"=>1, "label_ids"=>["503b44c7497bfe2bbb000005"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000008", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}] flags=[] (0.1230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44c7497bfe2bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44c7497bfe2bbb000003"} flags=[] limit=0 skip=0 fields=nil (0.6599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44c7497bfe2bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44c7497bfe2bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4971ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000003"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb00000b", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4461ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000005"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000003"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44c7497bfe2bbb000003"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb00000e", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44c7497bfe2bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44c7497bfe2bbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000007"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000005"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44c7497bfe2bbb000005"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000011", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44c7497bfe2bbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44c7497bfe2bbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44c7497bfe2bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44c7497bfe2bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6819ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000003"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000014", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6330ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000005"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44c7497bfe2bbb000003"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000003"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000017", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.3140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6449ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000007"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44c7497bfe2bbb000005"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000005"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb00001a", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44c7497bfe2bbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44c7497bfe2bbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6680ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000003"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb00001d", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2522ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6433ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000005"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000003"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44c7497bfe2bbb000003"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000020", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6239ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44c7497bfe2bbb000007"} update={"$set"=>{"acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}, "503b44c7497bfe2bbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44c7497bfe2bbb000005"=>"r"}, "invited"=>"503b44c7497bfe2bbb000001", "at"=>2012-08-27 11:58:31 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44c7497bfe2bbb000005"], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:31 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000023", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}]}} flags=[] (0.2129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44c7497bfe2bbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4072ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44c7497bfe2bbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44c7497bfe2bbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:31 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b44c7497bfe2bbb000025", "at"=>2012-08-27 09:58:31 UTC, "changes"=>{}, "user_id"=>"503b44c7497bfe2bbb000001"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b44c7497bfe2bbb000024"} update={"$push"=>{:label_ids=>"503b44c7497bfe2bbb000003"}} flags=[:multi] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44c7497bfe2bbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2449ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6511ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44de497bfe2cbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b5e0", "confirmation_key"=>"563597ce78caa49501bf"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44de497bfe2cbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cb7b", "confirmation_key"=>"70345f1c5e7444213542"}] flags=[] (0.0701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44de497bfe2cbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000004", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44de497bfe2cbb000005", "version"=>1, "label_ids"=>["503b44de497bfe2cbb000003"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000006", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44de497bfe2cbb000007", "version"=>1, "label_ids"=>["503b44de497bfe2cbb000005"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000008", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44de497bfe2cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44de497bfe2cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.6230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44de497bfe2cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44de497bfe2cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3457ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000003"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb00000b", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5121ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000005"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000003"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44de497bfe2cbb000003"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb00000e", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44de497bfe2cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44de497bfe2cbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000007"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000005"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44de497bfe2cbb000005"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000011", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.4158ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44de497bfe2cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44de497bfe2cbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3798ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44de497bfe2cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6158ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44de497bfe2cbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6082ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000003"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000014", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000005"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44de497bfe2cbb000003"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000003"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000017", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5729ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000007"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44de497bfe2cbb000005"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000005"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb00001a", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44de497bfe2cbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44de497bfe2cbb000007"} flags=[] limit=-1 skip=0 fields=nil (22.5961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7379ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000003"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}, "503b44de497bfe2cbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb00001d", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6208ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000005"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000003"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44de497bfe2cbb000003"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000020", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.2451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (14.3631ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44de497bfe2cbb000007"} update={"$set"=>{"acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}, "503b44de497bfe2cbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44de497bfe2cbb000005"=>"r"}, "invited"=>"503b44de497bfe2cbb000001", "at"=>2012-08-27 11:58:54 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44de497bfe2cbb000005"], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:58:54 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000023", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}]}} flags=[] (0.4342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44de497bfe2cbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44de497bfe2cbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44de497bfe2cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:58:54 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b44de497bfe2cbb000025", "at"=>2012-08-27 09:58:54 UTC, "changes"=>{}, "user_id"=>"503b44de497bfe2cbb000001"}]}] flags=[] (0.1869ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b44de497bfe2cbb000024"} update={"$push"=>{:label_ids=>"503b44de497bfe2cbb000003"}} flags=[:multi] (0.0880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44de497bfe2cbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b44de497bfe2cbb000024"]}} flags=[] limit=0 skip=0 fields=nil (0.6230ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6828ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0536ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4213ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44f0497bfe2dbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3c9e", "confirmation_key"=>"82b507668b67c466b13c"}] flags=[] (0.1099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b44f0497bfe2dbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a418", "confirmation_key"=>"d1b503167629d7ce9f91"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44f0497bfe2dbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000004", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}] flags=[] (0.1783ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44f0497bfe2dbb000005", "version"=>1, "label_ids"=>["503b44f0497bfe2dbb000003"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000006", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44f0497bfe2dbb000007", "version"=>1, "label_ids"=>["503b44f0497bfe2dbb000005"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000008", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44f0497bfe2dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44f0497bfe2dbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44f0497bfe2dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44f0497bfe2dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5393ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000003"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb00000b", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5140ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000005"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000003"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44f0497bfe2dbb000003"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb00000e", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44f0497bfe2dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44f0497bfe2dbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000007"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000005"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b44f0497bfe2dbb000005"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000011", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b44f0497bfe2dbb000001.privileges"=>/r\w*/, "label_ids"=>"503b44f0497bfe2dbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44f0497bfe2dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44f0497bfe2dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9160ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000003"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000014", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.4239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8490ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000005"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44f0497bfe2dbb000003"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000003"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000017", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5622ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000007"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b44f0497bfe2dbb000005"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000005"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb00001a", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2508ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44f0497bfe2dbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b44f0497bfe2dbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0538ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000003"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb00001d", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2933ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0471ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000005"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000003"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44f0497bfe2dbb000003"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000020", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6452ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b44f0497bfe2dbb000007"} update={"$set"=>{"acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}, "503b44f0497bfe2dbb000002"=>{"privileges"=>"r", "inherited"=>{"503b44f0497bfe2dbb000005"=>"r"}, "invited"=>"503b44f0497bfe2dbb000001", "at"=>2012-08-27 11:59:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b44f0497bfe2dbb000005"], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 09:59:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000023", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b44f0497bfe2dbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b44f0497bfe2dbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b44f0497bfe2dbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:59:12 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b44f0497bfe2dbb000025", "at"=>2012-08-27 09:59:12 UTC, "changes"=>{}, "user_id"=>"503b44f0497bfe2dbb000001"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b44f0497bfe2dbb000024"} update={"$push"=>{:label_ids=>"503b44f0497bfe2dbb000003"}} flags=[:multi] (0.0651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b44f0497bfe2dbb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6731ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6881ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2301ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4543497bfe2ebb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f78a", "confirmation_key"=>"67c13430def518ee6c15"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4543497bfe2ebb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"50e4", "confirmation_key"=>"6cb0e4e46ebd1575f465"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4543497bfe2ebb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000004", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4543497bfe2ebb000005", "version"=>1, "label_ids"=>["503b4543497bfe2ebb000003"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000006", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3757ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4543497bfe2ebb000007", "version"=>1, "label_ids"=>["503b4543497bfe2ebb000005"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000008", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4543497bfe2ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4543497bfe2ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4543497bfe2ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4543497bfe2ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5410ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000003"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb00000b", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5114ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000005"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000003"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4543497bfe2ebb000003"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb00000e", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4543497bfe2ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4543497bfe2ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000007"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000005"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4543497bfe2ebb000005"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000011", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4543497bfe2ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b4543497bfe2ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.4487ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4543497bfe2ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4543497bfe2ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5672ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000003"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000014", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6762ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000005"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4543497bfe2ebb000003"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000003"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000017", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000007"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4543497bfe2ebb000005"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000005"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb00001a", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4543497bfe2ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4543497bfe2ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6921ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000003"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}, "503b4543497bfe2ebb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb00001d", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5171ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000005"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000003"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4543497bfe2ebb000003"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000020", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4543497bfe2ebb000007"} update={"$set"=>{"acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}, "503b4543497bfe2ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b4543497bfe2ebb000005"=>"r"}, "invited"=>"503b4543497bfe2ebb000001", "at"=>2012-08-27 12:00:35 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4543497bfe2ebb000005"], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:00:35 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000023", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}]}} flags=[] (0.2999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4543497bfe2ebb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4543497bfe2ebb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4543497bfe2ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:00:35 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4543497bfe2ebb000025", "at"=>2012-08-27 10:00:35 UTC, "changes"=>{}, "user_id"=>"503b4543497bfe2ebb000001"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4543497bfe2ebb000024"} update={"$push"=>{:label_ids=>"503b4543497bfe2ebb000003"}} flags=[:multi] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4543497bfe2ebb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1900ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4678ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b455e497bfe2fbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"71bd", "confirmation_key"=>"6385bd90f7fde07eb9d6"}] flags=[] (0.1051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b455e497bfe2fbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d922", "confirmation_key"=>"332dea4aeb455ef6e510"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4299ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b455e497bfe2fbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000004", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}] flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b455e497bfe2fbb000005", "version"=>1, "label_ids"=>["503b455e497bfe2fbb000003"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000006", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b455e497bfe2fbb000007", "version"=>1, "label_ids"=>["503b455e497bfe2fbb000005"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000008", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b455e497bfe2fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b455e497bfe2fbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b455e497bfe2fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b455e497bfe2fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6220ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000003"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb00000b", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2654ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000005"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000003"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b455e497bfe2fbb000003"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb00000e", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b455e497bfe2fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b455e497bfe2fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000007"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000005"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b455e497bfe2fbb000005"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000011", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b455e497bfe2fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b455e497bfe2fbb000007"} flags=[] limit=0 skip=0 fields=nil (0.3378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b455e497bfe2fbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b455e497bfe2fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8519ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000003"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000014", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.4499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8600ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000005"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b455e497bfe2fbb000003"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000003"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000017", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000007"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b455e497bfe2fbb000005"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000005"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb00001a", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b455e497bfe2fbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4437ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b455e497bfe2fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000003"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}, "503b455e497bfe2fbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb00001d", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.4399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7002ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000005"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000003"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b455e497bfe2fbb000003"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000020", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b455e497bfe2fbb000007"} update={"$set"=>{"acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}, "503b455e497bfe2fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b455e497bfe2fbb000005"=>"r"}, "invited"=>"503b455e497bfe2fbb000001", "at"=>2012-08-27 12:01:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b455e497bfe2fbb000005"], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:02 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000023", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b455e497bfe2fbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4177ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b455e497bfe2fbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b455e497bfe2fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:02 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b455e497bfe2fbb000025", "at"=>2012-08-27 10:01:02 UTC, "changes"=>{}, "user_id"=>"503b455e497bfe2fbb000001"}]}] flags=[] (0.1347ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b455e497bfe2fbb000024"} update={"$push"=>{:label_ids=>"503b455e497bfe2fbb000003"}} flags=[:multi] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b455e497bfe2fbb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6127ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6742ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4579497bfe30bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4579497bfe30bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0253", "confirmation_key"=>"be99406e78df425fa737"}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4579497bfe30bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4579497bfe30bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"db4f", "confirmation_key"=>"8082778e435e6ebf64f3"}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4579497bfe30bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000004", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4579497bfe30bb000005", "version"=>1, "label_ids"=>["503b4579497bfe30bb000003"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000006", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4579497bfe30bb000007", "version"=>1, "label_ids"=>["503b4579497bfe30bb000005"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000008", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4579497bfe30bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4579497bfe30bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4579497bfe30bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4579497bfe30bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000003"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4579497bfe30bb00000b", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5081ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000005"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000003"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4579497bfe30bb000003"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4579497bfe30bb00000e", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4579497bfe30bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4579497bfe30bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000007"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000005"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4579497bfe30bb000005"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000011", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4579497bfe30bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4579497bfe30bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4579497bfe30bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3638ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4579497bfe30bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7422ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000003"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000014", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.4852ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6170ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000005"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4579497bfe30bb000003"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000003"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000017", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000007"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4579497bfe30bb000005"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000005"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4579497bfe30bb00001a", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4579497bfe30bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4423ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4579497bfe30bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5751ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000003"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}, "503b4579497bfe30bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4579497bfe30bb00001d", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2217ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000005"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000003"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4579497bfe30bb000003"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000020", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5267ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4579497bfe30bb000007"} update={"$set"=>{"acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}, "503b4579497bfe30bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4579497bfe30bb000005"=>"r"}, "invited"=>"503b4579497bfe30bb000001", "at"=>2012-08-27 12:01:29 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4579497bfe30bb000005"], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:29 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000023", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}]}} flags=[] (0.3490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4579497bfe30bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3877ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4579497bfe30bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4579497bfe30bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:29 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4579497bfe30bb000025", "at"=>2012-08-27 10:01:29 UTC, "changes"=>{}, "user_id"=>"503b4579497bfe30bb000001"}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4579497bfe30bb000024"} update={"$push"=>{:label_ids=>"503b4579497bfe30bb000003"}} flags=[:multi] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4579497bfe30bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6859ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0618ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0463ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b458a497bfe31bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b458a497bfe31bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d04b", "confirmation_key"=>"97a9c8541a286bb79306"}] flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b458a497bfe31bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b458a497bfe31bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ef5e", "confirmation_key"=>"a7d2b262447e500e107b"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b458a497bfe31bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000004", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b458a497bfe31bb000005", "version"=>1, "label_ids"=>["503b458a497bfe31bb000003"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000006", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b458a497bfe31bb000007", "version"=>1, "label_ids"=>["503b458a497bfe31bb000005"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000008", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}] flags=[] (0.1199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b458a497bfe31bb000001.privileges"=>/r\w*/, "label_ids"=>"503b458a497bfe31bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5388ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b458a497bfe31bb000001.privileges"=>/r\w*/, "label_ids"=>"503b458a497bfe31bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5469ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000003"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b458a497bfe31bb00000b", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000005"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000003"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b458a497bfe31bb000003"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b458a497bfe31bb00000e", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b458a497bfe31bb000001.privileges"=>/r\w*/, "label_ids"=>"503b458a497bfe31bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000007"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000005"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b458a497bfe31bb000005"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000011", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2067ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b458a497bfe31bb000001.privileges"=>/r\w*/, "label_ids"=>"503b458a497bfe31bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b458a497bfe31bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b458a497bfe31bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6618ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000003"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000014", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6981ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000005"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b458a497bfe31bb000003"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000003"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000017", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5720ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000007"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b458a497bfe31bb000005"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000005"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b458a497bfe31bb00001a", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b458a497bfe31bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b458a497bfe31bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5689ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000003"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}, "503b458a497bfe31bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b458a497bfe31bb00001d", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2553ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7031ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000005"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000003"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b458a497bfe31bb000003"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000020", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b458a497bfe31bb000007"} update={"$set"=>{"acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}, "503b458a497bfe31bb000002"=>{"privileges"=>"r", "inherited"=>{"503b458a497bfe31bb000005"=>"r"}, "invited"=>"503b458a497bfe31bb000001", "at"=>2012-08-27 12:01:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b458a497bfe31bb000005"], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:01:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000023", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}]}} flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b458a497bfe31bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b458a497bfe31bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b458a497bfe31bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:01:46 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b458a497bfe31bb000025", "at"=>2012-08-27 10:01:46 UTC, "changes"=>{}, "user_id"=>"503b458a497bfe31bb000001"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b458a497bfe31bb000024"} update={"$push"=>{:label_ids=>"503b458a497bfe31bb000003"}} flags=[:multi] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b458a497bfe31bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6399ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6611ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1721ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1979ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b45a8497bfe33bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9c39", "confirmation_key"=>"6651d37854d36251eee3"}] flags=[] (0.1161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b45a8497bfe33bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"853b", "confirmation_key"=>"8a0126174c81e31ffde5"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45a8497bfe33bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000004", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}] flags=[] (0.1643ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45a8497bfe33bb000005", "version"=>1, "label_ids"=>["503b45a8497bfe33bb000003"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000006", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45a8497bfe33bb000007", "version"=>1, "label_ids"=>["503b45a8497bfe33bb000005"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000008", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}] flags=[] (0.1230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45a8497bfe33bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45a8497bfe33bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45a8497bfe33bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45a8497bfe33bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000003"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb00000b", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2677ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6011ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000005"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000003"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b45a8497bfe33bb000003"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb00000e", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45a8497bfe33bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45a8497bfe33bb000005"} flags=[] limit=0 skip=0 fields=nil (0.5062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000007"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000005"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b45a8497bfe33bb000005"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000011", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45a8497bfe33bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45a8497bfe33bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45a8497bfe33bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45a8497bfe33bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8461ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000003"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000014", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.4878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8237ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000005"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b45a8497bfe33bb000003"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000003"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000017", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7207ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000007"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b45a8497bfe33bb000005"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000005"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb00001a", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45a8497bfe33bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45a8497bfe33bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7720ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000003"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}, "503b45a8497bfe33bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb00001d", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7172ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000005"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000003"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b45a8497bfe33bb000003"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000020", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45a8497bfe33bb000007"} update={"$set"=>{"acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}, "503b45a8497bfe33bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45a8497bfe33bb000005"=>"r"}, "invited"=>"503b45a8497bfe33bb000001", "at"=>2012-08-27 12:02:16 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b45a8497bfe33bb000005"], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:02:16 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000023", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}]}} flags=[] (0.2389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45a8497bfe33bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45a8497bfe33bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45a8497bfe33bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:16 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b45a8497bfe33bb000025", "at"=>2012-08-27 10:02:16 UTC, "changes"=>{}, "user_id"=>"503b45a8497bfe33bb000001"}]}] flags=[] (0.1471ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b45a8497bfe33bb000024"} update={"$push"=>{:label_ids=>"503b45a8497bfe33bb000003"}} flags=[:multi] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b45a8497bfe33bb000001.privileges"=>/r\w*/, "name"=>"doc4"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6571ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b45ec497bfe34bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"038f", "confirmation_key"=>"3e643dad7a89ccede03c"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4067ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b45ec497bfe34bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"366f", "confirmation_key"=>"2c5614ff4cfeae944566"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45ec497bfe34bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000004", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45ec497bfe34bb000005", "version"=>1, "label_ids"=>["503b45ec497bfe34bb000003"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000006", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45ec497bfe34bb000007", "version"=>1, "label_ids"=>["503b45ec497bfe34bb000005"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000008", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45ec497bfe34bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5603ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45ec497bfe34bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5438ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000003"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb00000b", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5140ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000005"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000003"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b45ec497bfe34bb000003"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb00000e", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45ec497bfe34bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4423ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3941ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000007"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000005"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b45ec497bfe34bb000005"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000011", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/, "label_ids"=>"503b45ec497bfe34bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45ec497bfe34bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6888ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45ec497bfe34bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8121ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000003"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000014", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.4358ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7200ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000005"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b45ec497bfe34bb000003"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000003"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000017", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2737ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5462ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000007"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b45ec497bfe34bb000005"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000005"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb00001a", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45ec497bfe34bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b45ec497bfe34bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8271ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000003"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}, "503b45ec497bfe34bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb00001d", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6068ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000005"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000003"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b45ec497bfe34bb000003"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000020", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6170ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b45ec497bfe34bb000007"} update={"$set"=>{"acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}, "503b45ec497bfe34bb000002"=>{"privileges"=>"r", "inherited"=>{"503b45ec497bfe34bb000005"=>"r"}, "invited"=>"503b45ec497bfe34bb000001", "at"=>2012-08-27 12:03:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b45ec497bfe34bb000005"], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:03:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000023", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b45ec497bfe34bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b45ec497bfe34bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b45ec497bfe34bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:24 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b45ec497bfe34bb000025", "at"=>2012-08-27 10:03:24 UTC, "changes"=>{}, "user_id"=>"503b45ec497bfe34bb000001"}]}] flags=[] (0.1378ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b45ec497bfe34bb000024"} update={"$push"=>{:label_ids=>"503b45ec497bfe34bb000003"}} flags=[:multi] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b45ec497bfe34bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b45ec497bfe34bb000003"]}} flags=[] limit=0 skip=0 fields=nil (0.5822ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1771ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b462c497bfe45bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b462c497bfe45bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a7fd", "confirmation_key"=>"42eb0cdf7397c5c784a5"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b462c497bfe45bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b462c497bfe45bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a72c", "confirmation_key"=>"23acd18eeed628d3e4b2"}] flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b462c497bfe45bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000004", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}] flags=[] (0.1619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b462c497bfe45bb000005", "version"=>1, "label_ids"=>["503b462c497bfe45bb000003"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000006", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}] flags=[] (0.1478ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2608ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b462c497bfe45bb000007", "version"=>1, "label_ids"=>["503b462c497bfe45bb000005"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000008", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}] flags=[] (0.1202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/, "label_ids"=>"503b462c497bfe45bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/, "label_ids"=>"503b462c497bfe45bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000003"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b462c497bfe45bb00000b", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5019ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000005"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000003"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b462c497bfe45bb000003"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b462c497bfe45bb00000e", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/, "label_ids"=>"503b462c497bfe45bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3583ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000007"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000005"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b462c497bfe45bb000005"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000011", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/, "label_ids"=>"503b462c497bfe45bb000007"} flags=[] limit=0 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b462c497bfe45bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.6919ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b462c497bfe45bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8471ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000003"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000014", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6299ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000005"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b462c497bfe45bb000003"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000003"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000017", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6371ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000007"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b462c497bfe45bb000005"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000005"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b462c497bfe45bb00001a", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2277ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b462c497bfe45bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b462c497bfe45bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7162ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000003"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}, "503b462c497bfe45bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b462c497bfe45bb00001d", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6220ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000005"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000003"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b462c497bfe45bb000003"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000020", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2313ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6039ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b462c497bfe45bb000007"} update={"$set"=>{"acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}, "503b462c497bfe45bb000002"=>{"privileges"=>"r", "inherited"=>{"503b462c497bfe45bb000005"=>"r"}, "invited"=>"503b462c497bfe45bb000001", "at"=>2012-08-27 12:04:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b462c497bfe45bb000005"], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:04:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000023", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}]}} flags=[] (0.2141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b462c497bfe45bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3469ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b462c497bfe45bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b462c497bfe45bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:04:28 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b462c497bfe45bb000025", "at"=>2012-08-27 10:04:28 UTC, "changes"=>{}, "user_id"=>"503b462c497bfe45bb000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b462c497bfe45bb000024"} update={"$push"=>{:label_ids=>"503b462c497bfe45bb000003"}} flags=[:multi] (0.0648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b462c497bfe45bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b462c497bfe45bb000003"]}} flags=[] limit=0 skip=0 fields=nil (0.6421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6652ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1853ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1628ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47d6497bfe47bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d530", "confirmation_key"=>"a3b0c017fcf523e81076"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47d6497bfe47bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4c7d", "confirmation_key"=>"9eeb767ffb2199461c40"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4241ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47d6497bfe47bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000004", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}] flags=[] (0.1738ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47d6497bfe47bb000005", "version"=>1, "label_ids"=>["503b47d6497bfe47bb000003"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000006", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3932ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47d6497bfe47bb000007", "version"=>1, "label_ids"=>["503b47d6497bfe47bb000005"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000008", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47d6497bfe47bb000001.privileges"=>/r\w*/, "label_ids"=>"503b47d6497bfe47bb000003"} flags=[] limit=0 skip=0 fields=nil (0.6499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47d6497bfe47bb000001.privileges"=>/r\w*/, "label_ids"=>"503b47d6497bfe47bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000003"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb00000b", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000005"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000003"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47d6497bfe47bb000003"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb00000e", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47d6497bfe47bb000001.privileges"=>/r\w*/, "label_ids"=>"503b47d6497bfe47bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000007"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000005"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47d6497bfe47bb000005"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000011", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.3519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47d6497bfe47bb000001.privileges"=>/r\w*/, "label_ids"=>"503b47d6497bfe47bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47d6497bfe47bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47d6497bfe47bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6499ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000003"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000014", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6342ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000005"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47d6497bfe47bb000003"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000003"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000017", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5710ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000007"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47d6497bfe47bb000005"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000005"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb00001a", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47d6497bfe47bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47d6497bfe47bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6757ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7181ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000003"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}, "503b47d6497bfe47bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb00001d", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2248ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5643ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000005"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000003"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47d6497bfe47bb000003"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000020", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7932ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47d6497bfe47bb000007"} update={"$set"=>{"acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}, "503b47d6497bfe47bb000002"=>{"privileges"=>"r", "inherited"=>{"503b47d6497bfe47bb000005"=>"r"}, "invited"=>"503b47d6497bfe47bb000001", "at"=>2012-08-27 12:11:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47d6497bfe47bb000005"], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000023", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47d6497bfe47bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47d6497bfe47bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47d6497bfe47bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:34 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47d6497bfe47bb000025", "at"=>2012-08-27 10:11:34 UTC, "changes"=>{}, "user_id"=>"503b47d6497bfe47bb000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4009ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47e3497bfe4ebb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"174b", "confirmation_key"=>"67672c50d7a6c742ac9a"}] flags=[] (0.1028ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47e3497bfe4ebb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7e51", "confirmation_key"=>"ced4d3fccc9b2fb33e5a"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47e3497bfe4ebb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000004", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47e3497bfe4ebb000005", "version"=>1, "label_ids"=>["503b47e3497bfe4ebb000003"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000006", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2928ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47e3497bfe4ebb000007", "version"=>1, "label_ids"=>["503b47e3497bfe4ebb000005"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000008", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47e3497bfe4ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b47e3497bfe4ebb000003"} flags=[] limit=0 skip=0 fields=nil (0.5240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47e3497bfe4ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b47e3497bfe4ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5393ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000003"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb00000b", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000005"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000003"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47e3497bfe4ebb000003"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb00000e", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47e3497bfe4ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b47e3497bfe4ebb000005"} flags=[] limit=0 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000007"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000005"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47e3497bfe4ebb000005"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000011", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.4253ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47e3497bfe4ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b47e3497bfe4ebb000007"} flags=[] limit=0 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47e3497bfe4ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47e3497bfe4ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.6351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8569ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000003"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000014", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.5231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8030ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000005"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47e3497bfe4ebb000003"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000003"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000017", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5732ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000007"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47e3497bfe4ebb000005"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000005"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb00001a", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47e3497bfe4ebb000005"} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47e3497bfe4ebb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0130ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000003"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb00001d", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6800ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000005"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000003"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47e3497bfe4ebb000003"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000020", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6568ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000007"} update={"$set"=>{"acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"r", "inherited"=>{"503b47e3497bfe4ebb000005"=>"r"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47e3497bfe4ebb000005"], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000023", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.2222ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47e3497bfe4ebb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000025", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47e3497bfe4ebb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5629ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47e3497bfe4ebb000024"} update={"$set"=>{"label_ids"=>["503b47e3497bfe4ebb000024"], "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{"503b47e3497bfe4ebb000003"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:11:47 +0200}, "503b47e3497bfe4ebb000002"=>{"privileges"=>"rw", "inherited"=>{"503b47e3497bfe4ebb000003"=>"rw"}, "invited"=>"503b47e3497bfe4ebb000001", "at"=>2012-08-27 12:11:47 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47e3497bfe4ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:11:47 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47e3497bfe4ebb000028", "at"=>2012-08-27 10:11:47 UTC, "changes"=>{}, "user_id"=>"503b47e3497bfe4ebb000001"}]}]}} flags=[] (0.4129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47e3497bfe4ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b47e3497bfe4ebb000024"} flags=[] limit=0 skip=0 fields=nil (0.6077ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6812ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1748ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1643ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47f5497bfe4fbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8bec", "confirmation_key"=>"f74e4aaffc44ab436f03"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b47f5497bfe4fbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"18fc", "confirmation_key"=>"7f58e67b722b24632991"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47f5497bfe4fbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000004", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47f5497bfe4fbb000005", "version"=>1, "label_ids"=>["503b47f5497bfe4fbb000003"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000006", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47f5497bfe4fbb000007", "version"=>1, "label_ids"=>["503b47f5497bfe4fbb000005"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000008", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}] flags=[] (0.1230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000003"} flags=[] limit=0 skip=0 fields=nil (0.5441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000003"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb00000b", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000005"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000003"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47f5497bfe4fbb000003"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb00000e", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2272ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000005"} flags=[] limit=0 skip=0 fields=nil (0.4671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000007"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000005"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b47f5497bfe4fbb000005"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000011", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000007"} flags=[] limit=0 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47f5497bfe4fbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.5281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47f5497bfe4fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4153ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6731ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000003"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000014", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6063ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000005"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47f5497bfe4fbb000003"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000003"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000017", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5853ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000007"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47f5497bfe4fbb000005"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000005"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb00001a", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47f5497bfe4fbb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b47f5497bfe4fbb000007"} flags=[] limit=-1 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9232ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000003"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb00001d", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7029ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000005"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000003"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47f5497bfe4fbb000003"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000020", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2272ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7000ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000007"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"r", "inherited"=>{"503b47f5497bfe4fbb000005"=>"r"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b47f5497bfe4fbb000005"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000023", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b47f5497bfe4fbb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000025", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5050ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000024"} update={"$set"=>{"label_ids"=>["503b47f5497bfe4fbb000024"], "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:12:05 +0200}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"rw", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rw"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 12:12:05 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb000028", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.3328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000024"} flags=[] limit=0 skip=0 fields=nil (0.6411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b47f5497bfe4fbb000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b47f5497bfe4fbb000024"} update={"$set"=>{"acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"rw", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rw", "503b47f5497bfe4fbb000024"=>"rw"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 10:12:05 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b47f5497bfe4fbb000024"], "pos"=>99, "acl"=>{"503b47f5497bfe4fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 10:12:05 UTC}, "503b47f5497bfe4fbb000002"=>{"privileges"=>"rw", "inherited"=>{"503b47f5497bfe4fbb000003"=>"rw"}, "invited"=>"503b47f5497bfe4fbb000001", "at"=>2012-08-27 10:12:05 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b47f5497bfe4fbb00002b", "at"=>2012-08-27 10:12:05 UTC, "changes"=>{}, "user_id"=>"503b47f5497bfe4fbb000001"}]}]}} flags=[] (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b47f5497bfe4fbb000024"} flags=[] limit=0 skip=0 fields=nil (0.6373ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b47f5497bfe4fbb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b47f5497bfe4fbb000024"]}} flags=[] limit=0 skip=0 fields=nil (0.8681ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6688ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1538ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4827497bfe50bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4827497bfe50bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"930a", "confirmation_key"=>"77f408b8c53f2ff896dc"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4827497bfe50bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4827497bfe50bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6b65", "confirmation_key"=>"acc03688a93b2fcda0e9"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4532ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4827497bfe50bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000004", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4827497bfe50bb000005", "version"=>1, "label_ids"=>["503b4827497bfe50bb000003"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000006", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4827497bfe50bb000007", "version"=>1, "label_ids"=>["503b4827497bfe50bb000005"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000008", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4827497bfe50bb000003"} flags=[] limit=0 skip=0 fields=nil (0.5372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4827497bfe50bb000005"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000003"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4827497bfe50bb00000b", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000005"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000003"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4827497bfe50bb000003"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4827497bfe50bb00000e", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4827497bfe50bb000005"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4044ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000007"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000005"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4827497bfe50bb000005"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000011", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4827497bfe50bb000007"} flags=[] limit=0 skip=0 fields=nil (0.4187ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4827497bfe50bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4827497bfe50bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4158ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8218ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000003"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000014", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.4380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000005", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7808ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000005"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4827497bfe50bb000003"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000003"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000017", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.4580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000007", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5999ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000007"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4827497bfe50bb000005"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000005"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4827497bfe50bb00001a", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4827497bfe50bb000005"} flags=[] limit=-1 skip=0 fields=nil (0.4437ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4827497bfe50bb000007"} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000003", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6123ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000003"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}, "503b4827497bfe50bb000002"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4827497bfe50bb00001d", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.3052ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000005", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000005"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000003"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4827497bfe50bb000003"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000020", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000007", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6902ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000007"} update={"$set"=>{"acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}, "503b4827497bfe50bb000002"=>{"privileges"=>"r", "inherited"=>{"503b4827497bfe50bb000005"=>"r"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4827497bfe50bb000005"], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000023", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4683ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4827497bfe50bb000024", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000025", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4827497bfe50bb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5701ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4827497bfe50bb000024"} update={"$set"=>{"label_ids"=>["503b4827497bfe50bb000003"], "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{"503b4827497bfe50bb000003"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:12:55 +0200}, "503b4827497bfe50bb000002"=>{"privileges"=>"rw", "inherited"=>{"503b4827497bfe50bb000003"=>"rw"}, "invited"=>"503b4827497bfe50bb000001", "at"=>2012-08-27 12:12:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4827497bfe50bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:12:55 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4827497bfe50bb000028", "at"=>2012-08-27 10:12:55 UTC, "changes"=>{}, "user_id"=>"503b4827497bfe50bb000001"}]}]}} flags=[] (0.3381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4827497bfe50bb000024"} flags=[] limit=0 skip=0 fields=nil (1.0812ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4827497bfe50bb000001.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4827497bfe50bb000003"]}} flags=[] limit=0 skip=0 fields=nil (0.6740ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7870ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2072ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"581f", "confirmation_key"=>"e39b142e0ba379db7e16"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3922ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a19d", "confirmation_key"=>"47d4fe04be45238166f4"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4258ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000004", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000001"}]}] flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5431ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000003"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}, "503b4830497bfe51bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4830497bfe51bb000001", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000007", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000001"}]}]}} flags=[] (0.2542ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4830497bfe51bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4830497bfe51bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6809ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3710ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1931ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4807ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7646", "confirmation_key"=>"ceab9a992107d3855682"}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00000c", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00000a"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00000e", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00000a"}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3738ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000010", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00000a"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "_id"=>"503b4830497bfe51bb00000d"} update={"$push"=>{:label_ids=>"503b4830497bfe51bb00000b"}} flags=[:multi] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4830497bfe51bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb00000f"} update={"$set"=>{"label_ids"=>["503b4830497bfe51bb00000d"], "acl"=>{"503b4830497bfe51bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4830497bfe51bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000013", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00000a"}]}]}} flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.4551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2291ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3488ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e043", "confirmation_key"=>"818be062f3eaf1e4256a"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000015", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"46e4", "confirmation_key"=>"2c490d0b5960667860f8"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3667ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000017", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000018", "version"=>1, "label_ids"=>["503b4830497bfe51bb000016"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000019", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb00001a", "version"=>1, "label_ids"=>["503b4830497bfe51bb000018"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00001b", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}] flags=[] (0.1559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb000016"} flags=[] limit=0 skip=0 fields=nil (0.6928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb000018"} flags=[] limit=0 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000016"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00001e", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2542ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5701ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000018"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000016"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4830497bfe51bb000016"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000021", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb000018"} flags=[] limit=0 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb00001a"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000018"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4830497bfe51bb000018"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000024", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb00001a"} flags=[] limit=0 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb000018"} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb00001a"} flags=[] limit=-1 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000016", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000016"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000027", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000018", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000018"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4830497bfe51bb000016"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000016"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00002a", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00001a", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5422ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb00001a"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4830497bfe51bb000018"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000018"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00002d", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb000018"} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb00001a"} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000016", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5922ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000016"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}, "503b4830497bfe51bb000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000030", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.3340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000018", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6702ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000018"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000016"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4830497bfe51bb000016"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000033", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00001a", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb00001a"} update={"$set"=>{"acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}, "503b4830497bfe51bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4830497bfe51bb000018"=>"r"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4830497bfe51bb000018"], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000036", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000037", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000038", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5369ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4830497bfe51bb000037"} update={"$set"=>{"label_ids"=>["503b4830497bfe51bb000016"], "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b4830497bfe51bb000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}, "503b4830497bfe51bb000015"=>{"privileges"=>"rw", "inherited"=>{"503b4830497bfe51bb000016"=>"rw"}, "invited"=>"503b4830497bfe51bb000014", "at"=>2012-08-27 12:13:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:13:04 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00003b", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb000014"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4830497bfe51bb000037"} flags=[] limit=0 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb000014.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4830497bfe51bb000016"]}} flags=[] limit=0 skip=0 fields=nil (0.6371ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2708ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1838ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2828ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb00003c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"a500", "confirmation_key"=>"326fc10f1733110026e7"}] flags=[] (0.0758ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb00003d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb00003d", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"ca67", "confirmation_key"=>"d3d46b19a0c7af2c345d"}] flags=[] (0.0744ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2439ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4830497bfe51bb00003f", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00003c"}]}] flags=[] (0.1192ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000042", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000043", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00003c"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4830497bfe51bb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4830497bfe51bb000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4830497bfe51bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:13:04 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4830497bfe51bb000045", "at"=>2012-08-27 10:13:04 UTC, "changes"=>{}, "user_id"=>"503b4830497bfe51bb00003c"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb00003c.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4830497bfe51bb00003d.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4830497bfe51bb00003c.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4830497bfe51bb00003e"} flags=[] limit=-1 skip=0 fields=nil (0.3011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5062ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000046", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2197", "confirmation_key"=>"7b4ae8128e8ec096228c"}] flags=[] (0.0861ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000047", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"87c0", "confirmation_key"=>"9995fa0cff2d2a0f6777"}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000048", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4830497bfe51bb000049", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4830497bfe51bb000049", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"fceb", "confirmation_key"=>"e4d681189a774e2398be"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4830497bfe51bb00004a", "user_ids"=>["503b4830497bfe51bb000049"], "name"=>"g1"}] flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4830497bfe51bb000049"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4830497bfe51bb00004a"}} flags=[:multi] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4830497bfe51bb00004a"]}}]}} (0.4380ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (19.0411ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2408ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5357ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3921", "confirmation_key"=>"8715d61e9589c5714997"}] flags=[] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7cdc", "confirmation_key"=>"221ec97b2c70e0552a1d"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000004", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000001"}]}] flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5951ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000003"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}, "503b4905497bfe52bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4905497bfe52bb000001", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000007", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000001"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4905497bfe52bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4905497bfe52bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4370ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"762d", "confirmation_key"=>"9a09a3061edd54948df3"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00000c", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00000a"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00000e", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00000a"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000010", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00000a"}]}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.2806ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb00000f"} update={"$set"=>{"label_ids"=>["503b4905497bfe52bb00000d"], "acl"=>{"503b4905497bfe52bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4905497bfe52bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000013", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00000a"}]}]}} flags=[] (0.4048ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3178ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2501ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0632ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4099", "confirmation_key"=>"d96ce5945ed4cccf6add"}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000015", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c1aa", "confirmation_key"=>"0e111ca06fd435479615"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3247ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000017", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000018", "version"=>1, "label_ids"=>["503b4905497bfe52bb000016"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000019", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3922ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb00001a", "version"=>1, "label_ids"=>["503b4905497bfe52bb000018"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00001b", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb000016"} flags=[] limit=0 skip=0 fields=nil (0.5322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb000018"} flags=[] limit=0 skip=0 fields=nil (0.3831ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5562ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000016"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00001e", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2232ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000018"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000016"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4905497bfe52bb000016"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000021", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb000018"} flags=[] limit=0 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5329ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb00001a"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000018"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4905497bfe52bb000018"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000024", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.3812ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb00001a"} flags=[] limit=0 skip=0 fields=nil (0.3901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb000018"} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb00001a"} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000016", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6893ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000016"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000027", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000018", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6452ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000018"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4905497bfe52bb000016"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000016"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00002a", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00001a", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6208ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb00001a"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4905497bfe52bb000018"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000018"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00002d", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb000018"} flags=[] limit=-1 skip=0 fields=nil (0.4902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb00001a"} flags=[] limit=-1 skip=0 fields=nil (0.3488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000016", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6979ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000016"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}, "503b4905497bfe52bb000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000030", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000018", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6123ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000018"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000016"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4905497bfe52bb000016"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000033", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00001a", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5991ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb00001a"} update={"$set"=>{"acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}, "503b4905497bfe52bb000015"=>{"privileges"=>"r", "inherited"=>{"503b4905497bfe52bb000018"=>"r"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4905497bfe52bb000018"], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000036", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3078ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000037", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000038", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}] flags=[] (0.2060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000037", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4905497bfe52bb000037"} update={"$set"=>{"label_ids"=>["503b4905497bfe52bb000016"], "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b4905497bfe52bb000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}, "503b4905497bfe52bb000015"=>{"privileges"=>"rw", "inherited"=>{"503b4905497bfe52bb000016"=>"rw"}, "invited"=>"503b4905497bfe52bb000014", "at"=>2012-08-27 12:16:37 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:37 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00003b", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb000014"}]}]}} flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "label_ids"=>"503b4905497bfe52bb000037"} flags=[] limit=0 skip=0 fields=nil (0.4652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb000014.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4905497bfe52bb000016"]}} flags=[] limit=0 skip=0 fields=nil (0.6416ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1988ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb00003c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb00003c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"362c", "confirmation_key"=>"73487d354929865d039d"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb00003d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3572ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb00003d", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"254e", "confirmation_key"=>"e5691084b66896312c31"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb00003e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4905497bfe52bb00003f", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00003c"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000042", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000043", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00003c"}]}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4905497bfe52bb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4905497bfe52bb000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4905497bfe52bb00003c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:37 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4905497bfe52bb000045", "at"=>2012-08-27 10:16:37 UTC, "changes"=>{}, "user_id"=>"503b4905497bfe52bb00003c"}]}] flags=[] (0.1407ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb00003c.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4905497bfe52bb00003d.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5500ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4905497bfe52bb00003c.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4905497bfe52bb00003e"} flags=[] limit=-1 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000046", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"e3d9", "confirmation_key"=>"651dc075622b06aae4d2"}] flags=[] (0.0792ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000047", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"35f3", "confirmation_key"=>"33298e38640dd84233ba"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000048", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4905497bfe52bb000049", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4905497bfe52bb000049", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"65f4", "confirmation_key"=>"d9438f33d67aaa129e85"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4905497bfe52bb00004a", "user_ids"=>["503b4905497bfe52bb000049"], "name"=>"g1"}] flags=[] (0.1130ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4905497bfe52bb000049"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4905497bfe52bb00004a"}} flags=[:multi] (0.0913ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4905497bfe52bb00004a"]}}]}} (0.4060ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6979ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4913497bfe53bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4913497bfe53bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a473", "confirmation_key"=>"16da99e1446efb768265"}] flags=[] (0.0978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4913497bfe53bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4913497bfe53bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e1b0", "confirmation_key"=>"f39bfb65ef3090de216a"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000004", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000001"}]}] flags=[] (0.1652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4913497bfe53bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4913497bfe53bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000003"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}, "503b4913497bfe53bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4913497bfe53bb000001", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000007", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000001"}]}]}} flags=[] (0.2587ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4913497bfe53bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4913497bfe53bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4913497bfe53bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6232ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5498ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4913497bfe53bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6757ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3729ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4913497bfe53bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4913497bfe53bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4119", "confirmation_key"=>"251378f7a1a1da603530"}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3097ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4913497bfe53bb00000c", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb00000a"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4913497bfe53bb00000e", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb00000a"}]}] flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3672ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000010", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb00000a"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3967ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4289ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb00000f"} update={"$set"=>{"label_ids"=>["503b4913497bfe53bb00000d"], "acl"=>{"503b4913497bfe53bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4913497bfe53bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000014", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb00000a"}]}]}} flags=[] (0.2692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2549ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3107ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4913497bfe53bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4913497bfe53bb000015", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1720", "confirmation_key"=>"c42cdf6357ea0a4f9410"}] flags=[] (0.0858ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4913497bfe53bb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4913497bfe53bb000016", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2740", "confirmation_key"=>"3de1584dca1c4e68617e"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4551ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000018", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb000019", "version"=>1, "label_ids"=>["503b4913497bfe53bb000017"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4913497bfe53bb00001a", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3552ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4913497bfe53bb00001b", "version"=>1, "label_ids"=>["503b4913497bfe53bb000019"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4913497bfe53bb00001c", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb000017"} flags=[] limit=0 skip=0 fields=nil (0.4418ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb000019"} flags=[] limit=0 skip=0 fields=nil (0.3629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000017"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4913497bfe53bb00001f", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6630ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000019"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000017"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4913497bfe53bb000017"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000022", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb000019"} flags=[] limit=0 skip=0 fields=nil (1.3487ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4492ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb00001b"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000019"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4913497bfe53bb000019"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4913497bfe53bb000025", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "label_ids"=>"503b4913497bfe53bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb000019"} flags=[] limit=-1 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000017", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000017"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000028", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000019", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000019"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4913497bfe53bb000017"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000017"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4914497bfe53bb00002b", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5519ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb00001b"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4913497bfe53bb000019"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000019"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4914497bfe53bb00002e", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb000019"} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4913497bfe53bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000017", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7660ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000017"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:51 +0200}, "503b4913497bfe53bb000016"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:52 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000031", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb000019", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5212ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb000019"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000017"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4913497bfe53bb000017"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000034", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.3190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4913497bfe53bb00001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4913497bfe53bb00001b"} update={"$set"=>{"acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}, "503b4913497bfe53bb000016"=>{"privileges"=>"r", "inherited"=>{"503b4913497bfe53bb000019"=>"r"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:51 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4913497bfe53bb000019"], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000037", "at"=>2012-08-27 10:16:51 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4914497bfe53bb000038", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:52 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000039", "at"=>2012-08-27 10:16:52 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}] flags=[] (0.1552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb000038", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4914497bfe53bb000038"} update={"$set"=>{"label_ids"=>["503b4913497bfe53bb000017"], "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{"503b4913497bfe53bb000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:52 +0200}, "503b4913497bfe53bb000016"=>{"privileges"=>"rw", "inherited"=>{"503b4913497bfe53bb000017"=>"rw"}, "invited"=>"503b4913497bfe53bb000015", "at"=>2012-08-27 12:16:52 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4913497bfe53bb000015"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:52 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4914497bfe53bb00003c", "at"=>2012-08-27 10:16:52 UTC, "changes"=>{}, "user_id"=>"503b4913497bfe53bb000015"}]}]}} flags=[] (0.2213ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "label_ids"=>"503b4914497bfe53bb000038"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4913497bfe53bb000015.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4913497bfe53bb000017"]}} flags=[] limit=0 skip=0 fields=nil (0.6928ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb00003d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4914497bfe53bb00003d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6478", "confirmation_key"=>"c70dadc7b36bad70fb0e"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb00003e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4914497bfe53bb00003e", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"4baa", "confirmation_key"=>"57f0877141b24d29327d"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb00003f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3588ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4914497bfe53bb00003f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4914497bfe53bb00003d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:52 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000040", "at"=>2012-08-27 10:16:52 UTC, "changes"=>{}, "user_id"=>"503b4914497bfe53bb00003d"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4778ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4914497bfe53bb000043", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4914497bfe53bb00003d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:52 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000044", "at"=>2012-08-27 10:16:52 UTC, "changes"=>{}, "user_id"=>"503b4914497bfe53bb00003d"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4914497bfe53bb000045", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4914497bfe53bb000045", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4914497bfe53bb00003d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:52 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4914497bfe53bb000046", "at"=>2012-08-27 10:16:52 UTC, "changes"=>{}, "user_id"=>"503b4914497bfe53bb00003d"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4914497bfe53bb00003d.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4914497bfe53bb00003e.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4914497bfe53bb00003d.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4914497bfe53bb00003f"} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4914497bfe53bb000047", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"08fc", "confirmation_key"=>"0160d2e086d60127eb1c"}] flags=[] (0.1550ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb000048", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4914497bfe53bb000048", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3dc8", "confirmation_key"=>"b2658756449a59a3f024"}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb000049", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4914497bfe53bb00004a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4914497bfe53bb00004a", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"08f6", "confirmation_key"=>"3e1a755987dfc905f547"}] flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4914497bfe53bb00004b", "user_ids"=>["503b4914497bfe53bb00004a"], "name"=>"g1"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4914497bfe53bb00004a"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4914497bfe53bb00004b"}} flags=[:multi] (0.0980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4914497bfe53bb00004b"]}}]}} (0.3510ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1950ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c435", "confirmation_key"=>"36af5c6ef5a2296bf787"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f18c", "confirmation_key"=>"69e81589a6efecb956b1"}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000004", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000001"}]}] flags=[] (0.1771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5498ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb000003"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}, "503b491b497bfe54bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b491b497bfe54bb000001", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000007", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000001"}]}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000001.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5248ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b491b497bfe54bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b491b497bfe54bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6757ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3731ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1571ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2b03", "confirmation_key"=>"fd9e106b9f54b32b4da7"}] flags=[] (0.1230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00000c", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00000a"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00000e", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00000a"}]}] flags=[] (0.1211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000010", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00000a"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00000d"} update={"$set"=>{"label_ids"=>["503b491b497bfe54bb00000b"], "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b491b497bfe54bb00000b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000013", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00000a"}]}]}} flags=[] (0.2210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.4809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b491b497bfe54bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5341ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00000f"} update={"$set"=>{"label_ids"=>["503b491b497bfe54bb00000d"], "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b491b497bfe54bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000016", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00000a"}]}]}} flags=[] (0.2680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2759ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1659ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000017", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2559", "confirmation_key"=>"5e5b3303077d0ca2777b"}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000018", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cdcd", "confirmation_key"=>"77cdd20bd281a67f2b4a"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00001a", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2689ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00001b", "version"=>1, "label_ids"=>["503b491b497bfe54bb000019"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00001c", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}] flags=[] (0.1571ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00001d", "version"=>1, "label_ids"=>["503b491b497bfe54bb00001b"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00001e", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}] flags=[] (0.2949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb000019"} flags=[] limit=0 skip=0 fields=nil (0.6909ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6537ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb000019"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000021", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2513ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5717ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001b"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb000019"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b491b497bfe54bb000019"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000024", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001d"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb00001b"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b491b497bfe54bb00001b"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000027", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb00001d"} flags=[] limit=0 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.3240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.3970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000019", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7179ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb000019"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00002a", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001b"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b491b497bfe54bb000019"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb000019"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00002d", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5858ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001d"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b491b497bfe54bb00001b"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb00001b"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000030", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000019", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6802ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb000019"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}, "503b491b497bfe54bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000033", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001b"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb000019"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b491b497bfe54bb000019"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000036", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6428ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00001d"} update={"$set"=>{"acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}, "503b491b497bfe54bb000018"=>{"privileges"=>"r", "inherited"=>{"503b491b497bfe54bb00001b"=>"r"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b491b497bfe54bb00001b"], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000039", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb00003a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00003b", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}] flags=[] (0.1388ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b491b497bfe54bb00003a"} update={"$set"=>{"label_ids"=>["503b491b497bfe54bb000019"], "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b491b497bfe54bb000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}, "503b491b497bfe54bb000018"=>{"privileges"=>"rw", "inherited"=>{"503b491b497bfe54bb000019"=>"rw"}, "invited"=>"503b491b497bfe54bb000017", "at"=>2012-08-27 12:16:59 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:16:59 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b491b497bfe54bb00003e", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb000017"}]}]}} flags=[] (0.2298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "label_ids"=>"503b491b497bfe54bb00003a"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb000017.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b491b497bfe54bb000019"]}} flags=[] limit=0 skip=0 fields=nil (0.6251ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2942ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1462ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb00003f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3338ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb00003f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6c10", "confirmation_key"=>"2b94facd10a3f2b4ab9e"}] flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000040", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000040", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"a97d", "confirmation_key"=>"5974b49bec549b2fbff6"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000041", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb000041", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00003f"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000042", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00003f"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000043", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000045", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4637ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb000045", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00003f"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000046", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00003f"}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b491b497bfe54bb000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b491b497bfe54bb000047", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b491b497bfe54bb00003f"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:16:59 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b491b497bfe54bb000048", "at"=>2012-08-27 10:16:59 UTC, "changes"=>{}, "user_id"=>"503b491b497bfe54bb00003f"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb00003f.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b491b497bfe54bb000040.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b491b497bfe54bb00003f.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b491b497bfe54bb000041"} flags=[] limit=-1 skip=0 fields=nil (0.3588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb000049", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb000049", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2c0a", "confirmation_key"=>"c754da0696a46633902e"}] flags=[] (0.0851ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb00004a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb00004a", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"d0e3", "confirmation_key"=>"a0fddc31df9d86ea7e40"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb00004b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b491b497bfe54bb00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b491b497bfe54bb00004c", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"9652", "confirmation_key"=>"ecf0f03cc71296d6be40"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3128ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b491b497bfe54bb00004d", "user_ids"=>["503b491b497bfe54bb00004c"], "name"=>"g1"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b491b497bfe54bb00004c"]}}]} update={"$addToSet"=>{"group_ids"=>"503b491b497bfe54bb00004d"}} flags=[:multi] (0.1042ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b491b497bfe54bb00004d"]}}]}} (0.4408ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.9550ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1979ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4703ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b1a0", "confirmation_key"=>"8dd5f5f945321c243f5b"}] flags=[] (0.1030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7566", "confirmation_key"=>"ec2ee80b37e6e8e4d468"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000004", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000001"}]}] flags=[] (0.1872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000003"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000001", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000007", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000001"}]}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb000003"} flags=[] limit=0 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4967497bfe55bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5863ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4967497bfe55bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6483ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2391ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0508ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2f64", "confirmation_key"=>"8decc91358ef2ccb41ec"}] flags=[] (0.0918ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00000c", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00000a"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00000e", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00000a"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000010", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00000a"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3347ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00000d"} update={"$set"=>{"label_ids"=>["503b4967497bfe55bb00000b"], "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4967497bfe55bb00000b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000013", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00000a"}]}]}} flags=[] (0.2139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4967497bfe55bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.5734ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3119ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4332ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00000f"} update={"$set"=>{"label_ids"=>["503b4967497bfe55bb00000d"], "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4967497bfe55bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000016", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00000a"}]}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.5157ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3181ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2229ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0467ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000017", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ff38", "confirmation_key"=>"9cc05fbe5216a7189201"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000018", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e2d3", "confirmation_key"=>"219623461977ef04ec34"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00001a", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3648ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00001b", "version"=>1, "label_ids"=>["503b4967497bfe55bb000019"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00001c", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}] flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5162ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00001d", "version"=>1, "label_ids"=>["503b4967497bfe55bb00001b"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00001e", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb000019"} flags=[] limit=0 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6351ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000019"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000021", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5476ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001b"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb000019"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4967497bfe55bb000019"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000024", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001d"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb00001b"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4967497bfe55bb00001b"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000027", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb00001d"} flags=[] limit=0 skip=0 fields=nil (0.2558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.3002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000019", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000019"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00002a", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4768ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001b"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4967497bfe55bb000019"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb000019"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00002d", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001d"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4967497bfe55bb00001b"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb00001b"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000030", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.5021ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000019", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7401ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000019"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000033", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6340ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001b"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb000019"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4967497bfe55bb000019"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000036", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5872ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001d"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb00001b"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4967497bfe55bb00001b"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000039", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3967ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00003a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00003b", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}] flags=[] (0.1502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5741ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00003a"} update={"$set"=>{"label_ids"=>["503b4967497bfe55bb000019"], "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b4967497bfe55bb000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000018"=>{"privileges"=>"rw", "inherited"=>{"503b4967497bfe55bb000019"=>"rw"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00003e", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2413ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb00003a"} flags=[] limit=0 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4967497bfe55bb000019"]}} flags=[] limit=0 skip=0 fields=nil (0.6692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000019", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6962ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000019"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000041", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00001b", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb00001b"} update={"$set"=>{"acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb00001b"=>"r", "503b4967497bfe55bb000019"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b4967497bfe55bb000019"], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}, "503b4967497bfe55bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4967497bfe55bb000019"=>"r"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000044", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb000046", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000047", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}] flags=[] (0.1447ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4737ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4967497bfe55bb000046"} update={"$set"=>{"label_ids"=>["503b4967497bfe55bb000019"], "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b4967497bfe55bb000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}, "503b4967497bfe55bb000018"=>{"privileges"=>"rw", "inherited"=>{"503b4967497bfe55bb000019"=>"rw"}, "invited"=>"503b4967497bfe55bb000017", "at"=>2012-08-27 12:18:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:15 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00004a", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb000017"}]}]}} flags=[] (0.2217ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4967497bfe55bb000046"} flags=[] limit=0 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "acl.503b4967497bfe55bb000017.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5322ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3090ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0517ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb00004b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb00004b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"5c2f", "confirmation_key"=>"64971232367b7d881963"}] flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3736ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb00004c", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"67d8", "confirmation_key"=>"8111e1f17a676618adad"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00004d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb00004d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4967497bfe55bb00004e", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00004b"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb00004f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000051", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb000051", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000052", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00004b"}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4967497bfe55bb000053", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4967497bfe55bb000053", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4967497bfe55bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:15 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4967497bfe55bb000054", "at"=>2012-08-27 10:18:15 UTC, "changes"=>{}, "user_id"=>"503b4967497bfe55bb00004b"}]}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb00004b.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6142ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4967497bfe55bb00004c.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4967497bfe55bb00004b.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1462ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4967497bfe55bb00004d"} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1faf", "confirmation_key"=>"d239f70cd066d5e52f4e"}] flags=[] (0.0870ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000056", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"763c", "confirmation_key"=>"23fdafa60115b96c6b96"}] flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4967497bfe55bb000058", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4432ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4967497bfe55bb000058", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"0ac2", "confirmation_key"=>"b5bcd7feb5ef465218bd"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4967497bfe55bb000059", "user_ids"=>["503b4967497bfe55bb000058"], "name"=>"g1"}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4967497bfe55bb000058"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4967497bfe55bb000059"}} flags=[:multi] (0.0877ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4967497bfe55bb000059"]}}]}} (0.3641ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.7202ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2427ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0658ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d161", "confirmation_key"=>"17ac7579589df8894dcf"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"08dc", "confirmation_key"=>"c9f3ec0fed593ac0f796"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3588ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000004", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000001"}]}] flags=[] (0.1869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5534ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000003"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000001", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000007", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000001"}]}]}} flags=[] (0.2513ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000001.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4970497bfe56bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5519ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b4970497bfe56bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7470ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3431ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1881ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"37ed", "confirmation_key"=>"378e957c0329c3020c1d"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00000c", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00000a"}]}] flags=[] (0.1709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00000e", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00000a"}]}] flags=[] (0.1552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000010", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00000a"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb00000a.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb00000b"} flags=[] limit=0 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00000d"} update={"$set"=>{"label_ids"=>["503b4970497bfe56bb00000b"], "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4970497bfe56bb00000b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000013", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00000a"}]}]}} flags=[] (0.2518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00000d"} flags=[] limit=-1 skip=0 fields=nil (0.5200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4970497bfe56bb00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.8099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb00000a.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3548ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6959ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00000f"} update={"$set"=>{"label_ids"=>["503b4970497bfe56bb00000d"], "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b4970497bfe56bb00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000016", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00000a"}]}]}} flags=[] (0.2351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00000f"} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2100ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000017", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d440", "confirmation_key"=>"8f9043fb5b6b28e0bddb"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000018", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"26e9", "confirmation_key"=>"b19ae44043b3589e5d6e"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00001a", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}] flags=[] (0.1333ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00001b", "version"=>1, "label_ids"=>["503b4970497bfe56bb000019"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00001c", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3028ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00001d", "version"=>1, "label_ids"=>["503b4970497bfe56bb00001b"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00001e", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}] flags=[] (0.1211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb000019"} flags=[] limit=0 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.3469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5610ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000019"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000021", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001b"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb000019"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4970497bfe56bb000019"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000024", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb00001b"} flags=[] limit=0 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5379ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001d"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb00001b"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b4970497bfe56bb00001b"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000027", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb00001d"} flags=[] limit=0 skip=0 fields=nil (0.2940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.3142ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000019", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000019"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00002a", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6602ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001b"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4970497bfe56bb000019"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb000019"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00002d", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6530ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001d"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b4970497bfe56bb00001b"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb00001b"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000030", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00001b"} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00001d"} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000019", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6781ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000019"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000033", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6189ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001b"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb000019"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4970497bfe56bb000019"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000036", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7112ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001d"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb00001b"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b4970497bfe56bb00001b"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000039", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (9.0091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00003a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00003b", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}] flags=[] (0.2611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8299ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00003a"} update={"$set"=>{"label_ids"=>["503b4970497bfe56bb000019"], "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b4970497bfe56bb000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000018"=>{"privileges"=>"rw", "inherited"=>{"503b4970497bfe56bb000019"=>"rw"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00003e", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb00003a"} flags=[] limit=0 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4970497bfe56bb000019"]}} flags=[] limit=0 skip=0 fields=nil (0.8829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000019", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8080ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000019"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000041", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00001b", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2422ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb00001b"} update={"$set"=>{"acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb00001b"=>"r", "503b4970497bfe56bb000019"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b4970497bfe56bb000019"], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}, "503b4970497bfe56bb000018"=>{"privileges"=>"r", "inherited"=>{"503b4970497bfe56bb000019"=>"r"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000044", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb000046", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000047", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}] flags=[] (0.1378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4749ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b4970497bfe56bb000046"} update={"$set"=>{"label_ids"=>["503b4970497bfe56bb000019"], "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b4970497bfe56bb000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}, "503b4970497bfe56bb000018"=>{"privileges"=>"rw", "inherited"=>{"503b4970497bfe56bb000019"=>"rw"}, "invited"=>"503b4970497bfe56bb000017", "at"=>2012-08-27 12:18:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 10:18:24 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00004a", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb000017"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "label_ids"=>"503b4970497bfe56bb000046"} flags=[] limit=0 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb000017.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b4970497bfe56bb000019"]}} flags=[] limit=0 skip=0 fields=nil (0.6599ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1979ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1640ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb00004b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb00004b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"a8d6", "confirmation_key"=>"5622015ec505d2333ebe"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2620ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb00004c", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"1a69", "confirmation_key"=>"407853e84a26384952bc"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00004d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3622ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb00004d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b4970497bfe56bb00004e", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00004b"}]}] flags=[] (0.1233ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb00004f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000051", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb000051", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000052", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00004b"}]}] flags=[] (0.1581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b4970497bfe56bb000053", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b4970497bfe56bb000053", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b4970497bfe56bb00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:18:24 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b4970497bfe56bb000054", "at"=>2012-08-27 10:18:24 UTC, "changes"=>{}, "user_id"=>"503b4970497bfe56bb00004b"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb00004b.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b4970497bfe56bb00004c.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5302ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b4970497bfe56bb00004b.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b4970497bfe56bb00004d"} flags=[] limit=-1 skip=0 fields=nil (0.3541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"319d", "confirmation_key"=>"3ab1fc11c48f1b558c8d"}] flags=[] (0.0832ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000056", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"b911", "confirmation_key"=>"47264ab3663c54132af1"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b4970497bfe56bb000058", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4451ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b4970497bfe56bb000058", "version"=>1, "group_ids"=>[], "email"=>"u1@test.com", "salt"=>"801c", "confirmation_key"=>"88639a420233a03875b5"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b4970497bfe56bb000059", "user_ids"=>["503b4970497bfe56bb000058"], "name"=>"g1"}] flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b4970497bfe56bb000058"]}}]} update={"$addToSet"=>{"group_ids"=>"503b4970497bfe56bb000059"}} flags=[:multi] (0.0951ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b4970497bfe56bb000059"]}}]}} (0.3440ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b52d7497bfe94bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b52d7497bfe94bb000001", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"fdf9", "confirmation_key"=>"2717f4b75b2b0b80f171"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b52d7497bfe94bb000002", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4301ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b52d7497bfe94bb000001"} update={"$addToSet"=>{"group_ids"=>"503b52d7497bfe94bb000002"}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b52d7497bfe94bb000002"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b52d7497bfe94bb000001"]}}} flags=[] (0.0856ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b52d7497bfe94bb000002"]}}]}} (0.5090ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1731ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b52ef497bfe95bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b52ef497bfe95bb000001", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"c007", "confirmation_key"=>"53bd15993911c8c672a7"}] flags=[] (0.1051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b52ef497bfe95bb000002", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0877ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3619ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b52ef497bfe95bb000001"} update={"$addToSet"=>{"group_ids"=>"503b52ef497bfe95bb000002"}} flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b52ef497bfe95bb000002"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b52ef497bfe95bb000001"]}}} flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b52ef497bfe95bb000002"]}}]}} (0.3140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b52ef497bfe95bb000001"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b52ef497bfe95bb000001"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3080ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7901ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b535f497bfe96bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b535f497bfe96bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b442", "confirmation_key"=>"873cf21e727a76cc0722"}] flags=[] (0.1042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b535f497bfe96bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b535f497bfe96bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"df9e", "confirmation_key"=>"7c73c136253a1e92e9de"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b535f497bfe96bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b535f497bfe96bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (67.0602ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b535f497bfe96bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b535f497bfe96bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:00:47 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b535f497bfe96bb000005", "at"=>2012-08-27 11:00:47 UTC, "changes"=>{}, "user_id"=>"503b535f497bfe96bb000001"}]}] flags=[] (0.3040ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.4238ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2601ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5379497bfe97bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5379497bfe97bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8c14", "confirmation_key"=>"4b8293d29d073dbd403a"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5379497bfe97bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5379497bfe97bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3bd0", "confirmation_key"=>"631e32e12a0226086c17"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5379497bfe97bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5379497bfe97bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5379497bfe97bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5379497bfe97bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:01:13 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5379497bfe97bb000005", "at"=>2012-08-27 11:01:13 UTC, "changes"=>{}, "user_id"=>"503b5379497bfe97bb000001"}]}] flags=[] (0.1593ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2048ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0463ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5381497bfe98bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5381497bfe98bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a974", "confirmation_key"=>"caa672d1bee235824348"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5381497bfe98bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5381497bfe98bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c46a", "confirmation_key"=>"328a115a4e6b54498306"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5381497bfe98bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5381497bfe98bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5381497bfe98bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5381497bfe98bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:01:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5381497bfe98bb000005", "at"=>2012-08-27 11:01:21 UTC, "changes"=>{}, "user_id"=>"503b5381497bfe98bb000001"}]}] flags=[] (0.1941ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2019ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0622ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1643ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0482ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b541c497bfe99bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b541c497bfe99bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f687", "confirmation_key"=>"45a0ce52a14f7bf5a0d4"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b541c497bfe99bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b541c497bfe99bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7869", "confirmation_key"=>"ebd88335714770b89523"}] flags=[] (0.0732ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b541c497bfe99bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b541c497bfe99bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b541c497bfe99bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b541c497bfe99bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:03:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b541c497bfe99bb000005", "at"=>2012-08-27 11:03:56 UTC, "changes"=>{}, "user_id"=>"503b541c497bfe99bb000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b541c497bfe99bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5388ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b541c497bfe99bb000004"} update={"$set"=>{"acl"=>{"503b541c497bfe99bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:03:56 +0200}, "503b541c497bfe99bb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b541c497bfe99bb000001", "at"=>2012-08-27 13:03:56 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b541c497bfe99bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:03:56 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b541c497bfe99bb000008", "at"=>2012-08-27 11:03:56 UTC, "changes"=>{}, "user_id"=>"503b541c497bfe99bb000001"}]}]}} flags=[] (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b541c497bfe99bb000001.privileges"=>/r\w*/, "label_ids"=>"503b541c497bfe99bb000004"} flags=[] limit=0 skip=0 fields=nil (0.4108ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.4128ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1988ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4773ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1b62", "confirmation_key"=>"de841bd91e235efbd0af"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3693ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e890", "confirmation_key"=>"778f1b5fc42b55e6a487"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000004", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000001"}]}] flags=[] (0.1867ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000001.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4778ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000003"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000001", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000007", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000001"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000001.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000003"} flags=[] limit=0 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5283ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b5428497bfe9cbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "acl.503b5428497bfe9cbb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2470ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2072ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb00000a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"5cdd", "confirmation_key"=>"16b63e7bc397b89cb0b1"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb00000b", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"759b", "confirmation_key"=>"13c9037b58ef0de0d2dc"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5428497bfe9cbb00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00000e", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb00000a"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5300ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb00000d"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb00000c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb00000a", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000011", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb00000a"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb00000a.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb00000d"} flags=[] limit=0 skip=0 fields=nil (0.4017ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2050ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1538ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0436ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000012", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"7ee0", "confirmation_key"=>"ea9c40d536d6d52a508b"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5428497bfe9cbb000013", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4592ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b5428497bfe9cbb000012"} update={"$addToSet"=>{"group_ids"=>"503b5428497bfe9cbb000013"}} flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b5428497bfe9cbb000013"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b5428497bfe9cbb000012"]}}} flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b5428497bfe9cbb000013"]}}]}} (0.5329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b5428497bfe9cbb000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b5428497bfe9cbb000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3111ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2868ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3cea", "confirmation_key"=>"758a044313cd0b5fd107"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000015", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000016", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000014"}]}] flags=[] (0.1299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3912ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000018", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000014"}]}] flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3867ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00001a", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000014"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000014.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000015"} flags=[] limit=0 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000017"} update={"$set"=>{"label_ids"=>["503b5428497bfe9cbb000015"], "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b5428497bfe9cbb000015"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00001d", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000014"}]}]}} flags=[] (0.2577ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000017"} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000014.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b5428497bfe9cbb000015"]}} flags=[] limit=0 skip=0 fields=nil (1.0488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000014.privileges"=>/r\w*/, "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5369ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000019"} update={"$set"=>{"label_ids"=>["503b5428497bfe9cbb000017"], "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b5428497bfe9cbb000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000020", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000014"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000019"} flags=[] limit=-1 skip=0 fields=nil (0.4880ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3171ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000021", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"90fe", "confirmation_key"=>"91e7f78861535fd9ad39"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000022", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"93ff", "confirmation_key"=>"77f31c92ff98a03cdcd7"}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000023", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000024", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000025", "version"=>1, "label_ids"=>["503b5428497bfe9cbb000023"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000026", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}] flags=[] (0.2019ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000027", "version"=>1, "label_ids"=>["503b5428497bfe9cbb000025"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000028", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000023"} flags=[] limit=0 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000025"} flags=[] limit=0 skip=0 fields=nil (0.4778ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5720ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000023"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00002b", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2418ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5434ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000025"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000023"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b5428497bfe9cbb000023"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00002e", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000025"} flags=[] limit=0 skip=0 fields=nil (0.6070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000027"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000025"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b5428497bfe9cbb000025"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000031", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000027"} flags=[] limit=0 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000025"} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000027"} flags=[] limit=-1 skip=0 fields=nil (0.3138ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000023", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000023"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000034", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000025", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5863ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000025"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b5428497bfe9cbb000023"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000023"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000037", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000027", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000027"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b5428497bfe9cbb000025"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000025"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00003a", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000025"} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000027"} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000023", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6931ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000023"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00003d", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000025", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000025"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000023"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b5428497bfe9cbb000023"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000040", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000027", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6490ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000027"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000025"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b5428497bfe9cbb000025"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000043", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2313ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000045", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4642ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000044"} update={"$set"=>{"label_ids"=>["503b5428497bfe9cbb000023"], "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b5428497bfe9cbb000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000022"=>{"privileges"=>"rw", "inherited"=>{"503b5428497bfe9cbb000023"=>"rw"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000048", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000044"} flags=[] limit=0 skip=0 fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b5428497bfe9cbb000023"]}} flags=[] limit=0 skip=0 fields=nil (0.6552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000023", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7279ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000023"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00004b", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000025", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6618ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000025"} update={"$set"=>{"acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000025"=>"r", "503b5428497bfe9cbb000023"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b5428497bfe9cbb000023"], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}, "503b5428497bfe9cbb000022"=>{"privileges"=>"r", "inherited"=>{"503b5428497bfe9cbb000023"=>"r"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00004e", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2627ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000050", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000051", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4849ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5428497bfe9cbb000050"} update={"$set"=>{"label_ids"=>["503b5428497bfe9cbb000023"], "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b5428497bfe9cbb000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}, "503b5428497bfe9cbb000022"=>{"privileges"=>"rw", "inherited"=>{"503b5428497bfe9cbb000023"=>"rw"}, "invited"=>"503b5428497bfe9cbb000021", "at"=>2012-08-27 13:04:08 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:08 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000054", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000021"}]}]}} flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "label_ids"=>"503b5428497bfe9cbb000050"} flags=[] limit=0 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000021.privileges"=>/r\w*/, "_id"=>{"$in"=>["503b5428497bfe9cbb000023"]}} flags=[] limit=0 skip=0 fields=nil (0.7329ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2060ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1512ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3321ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"0a03", "confirmation_key"=>"a9126e2e36009010fce1"}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000056", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"4698", "confirmation_key"=>"0960a009d139bf99a167"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3488ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb000058", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000055"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb00005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00005c", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000055"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5428497bfe9cbb00005d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5428497bfe9cbb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:08 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b5428497bfe9cbb00005e", "at"=>2012-08-27 11:04:08 UTC, "changes"=>{}, "user_id"=>"503b5428497bfe9cbb000055"}]}] flags=[] (0.1779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000055.privileges"=>/r\w*/, "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5428497bfe9cbb000056.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5428497bfe9cbb000055.privileges"=>/r\w*/, "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b5428497bfe9cbb000057"} flags=[] limit=-1 skip=0 fields=nil (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb00005f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1961", "confirmation_key"=>"ab26f36f82ef776d54ea"}] flags=[] (0.0930ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5012ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5428497bfe9cbb000060", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"67c7", "confirmation_key"=>"ed3d69178596ee6a8c25"}] flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5428497bfe9cbb000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4363ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7260ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0494ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1559ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5458497bfe9ebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5458497bfe9ebb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ab08", "confirmation_key"=>"35d8b3c03d1ffe73b74f"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5458497bfe9ebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5458497bfe9ebb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b01e", "confirmation_key"=>"fda12c88c333fb54ca80"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5458497bfe9ebb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5458497bfe9ebb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5458497bfe9ebb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5458497bfe9ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5458497bfe9ebb000005", "at"=>2012-08-27 11:04:56 UTC, "changes"=>{}, "user_id"=>"503b5458497bfe9ebb000001"}]}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5458497bfe9ebb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5458497bfe9ebb000004"} update={"$set"=>{"acl"=>{"503b5458497bfe9ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:04:56 +0200}, "503b5458497bfe9ebb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5458497bfe9ebb000001", "at"=>2012-08-27 13:04:56 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5458497bfe9ebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:04:56 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5458497bfe9ebb000008", "at"=>2012-08-27 11:04:56 UTC, "changes"=>{}, "user_id"=>"503b5458497bfe9ebb000001"}]}]}} flags=[] (0.2558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5458497bfe9ebb000001.privileges"=>/r\w*/, "label_ids"=>"503b5458497bfe9ebb000004"} flags=[] limit=0 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8137ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1829ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.3738ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.3140ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0463ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b54e2497bfe9fbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b54e2497bfe9fbb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"df7c", "confirmation_key"=>"e9d53c15d8b2bdbb0151"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b54e2497bfe9fbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b54e2497bfe9fbb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"cfdb", "confirmation_key"=>"3959c6404e761ebc8970"}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b54e2497bfe9fbb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b54e2497bfe9fbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4351ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b54e2497bfe9fbb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b54e2497bfe9fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:07:14 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b54e2497bfe9fbb000005", "at"=>2012-08-27 11:07:14 UTC, "changes"=>{}, "user_id"=>"503b54e2497bfe9fbb000001"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b54e2497bfe9fbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b54e2497bfe9fbb000004"} update={"$set"=>{"acl"=>{"503b54e2497bfe9fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:07:14 +0200}, "503b54e2497bfe9fbb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b54e2497bfe9fbb000001", "at"=>2012-08-27 13:07:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b54e2497bfe9fbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b54e2497bfe9fbb000008", "at"=>2012-08-27 11:07:14 UTC, "changes"=>{}, "user_id"=>"503b54e2497bfe9fbb000001"}]}]}} flags=[] (0.2439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b54e2497bfe9fbb000001.privileges"=>/r\w*/, "label_ids"=>"503b54e2497bfe9fbb000004"} flags=[] limit=0 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1900ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1597ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5507497bfea0bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3932ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5507497bfea0bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e691", "confirmation_key"=>"6b29d3b9d3f613845ee3"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5507497bfea0bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5507497bfea0bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c00c", "confirmation_key"=>"e31ed8e393ab25175ef0"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5507497bfea0bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5507497bfea0bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5507497bfea0bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5507497bfea0bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:07:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5507497bfea0bb000005", "at"=>2012-08-27 11:07:51 UTC, "changes"=>{}, "user_id"=>"503b5507497bfea0bb000001"}]}] flags=[] (0.1819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5507497bfea0bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4451ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5507497bfea0bb000004"} update={"$set"=>{"acl"=>{"503b5507497bfea0bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:07:51 +0200}, "503b5507497bfea0bb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5507497bfea0bb000001", "at"=>2012-08-27 13:07:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5507497bfea0bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:07:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5507497bfea0bb000008", "at"=>2012-08-27 11:07:51 UTC, "changes"=>{}, "user_id"=>"503b5507497bfea0bb000001"}]}]}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5507497bfea0bb000001.privileges"=>/r\w*/, "label_ids"=>"503b5507497bfea0bb000004"} flags=[] limit=0 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7181ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1948ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1602ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5523497bfea1bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5523497bfea1bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"286e", "confirmation_key"=>"5f441cc4e30ec07c27c9"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5523497bfea1bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5523497bfea1bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"26e8", "confirmation_key"=>"4ab59143e752aff18080"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5523497bfea1bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7112ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1652ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5540497bfea2bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5540497bfea2bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6600", "confirmation_key"=>"b3a7d13933758dbc6c2b"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5540497bfea2bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5540497bfea2bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"cb91", "confirmation_key"=>"f36b6a22f9dce1a9fc3c"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5540497bfea2bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3247ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6499ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1562ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1488ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b554d497bfea3bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b554d497bfea3bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"0938", "confirmation_key"=>"f16112bb3a4641b3d3fc"}] flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b554d497bfea3bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3059ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b554d497bfea3bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c7af", "confirmation_key"=>"ff7a307fddf1235bc5e6"}] flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b554d497bfea3bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b554d497bfea3bb000001"} update={"$addToSet"=>{"group_ids"=>"503b554d497bfea3bb000003"}} flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b554d497bfea3bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b554d497bfea3bb000001"]}}} flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b554d497bfea3bb000002"} update={"$addToSet"=>{"group_ids"=>"503b554d497bfea3bb000003"}} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b554d497bfea3bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b554d497bfea3bb000002"]}}} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b554d497bfea3bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b554d497bfea3bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b554d497bfea3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:09:01 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b554d497bfea3bb000005", "at"=>2012-08-27 11:09:01 UTC, "changes"=>{}, "user_id"=>"503b554d497bfea3bb000001"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b554d497bfea3bb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b554d497bfea3bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5400ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b554d497bfea3bb000004"} update={"$set"=>{"acl"=>{"503b554d497bfea3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:09:01 +0200}, "503b554d497bfea3bb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b554d497bfea3bb000001", "at"=>2012-08-27 13:09:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b554d497bfea3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:09:01 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b554d497bfea3bb000008", "at"=>2012-08-27 11:09:01 UTC, "changes"=>{}, "user_id"=>"503b554d497bfea3bb000001"}]}]}} flags=[] (0.2723ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b554d497bfea3bb000001.privileges"=>/r\w*/, "label_ids"=>"503b554d497bfea3bb000004"} flags=[] limit=0 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6711ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1838ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1602ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1428ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0436ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b559a497bfea4bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b559a497bfea4bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e0d1", "confirmation_key"=>"fce30fe0817552f1d9d2"}] flags=[] (0.1078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b559a497bfea4bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b559a497bfea4bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0ade", "confirmation_key"=>"d5413c3dfc4edf9c77ec"}] flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b559a497bfea4bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b559a497bfea4bb000001"} update={"$addToSet"=>{"group_ids"=>"503b559a497bfea4bb000003"}} flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b559a497bfea4bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b559a497bfea4bb000001"]}}} flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b559a497bfea4bb000002"} update={"$addToSet"=>{"group_ids"=>"503b559a497bfea4bb000003"}} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b559a497bfea4bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b559a497bfea4bb000002"]}}} flags=[] (0.0648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b559a497bfea4bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b559a497bfea4bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b559a497bfea4bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:10:18 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b559a497bfea4bb000005", "at"=>2012-08-27 11:10:18 UTC, "changes"=>{}, "user_id"=>"503b559a497bfea4bb000001"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b559a497bfea4bb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b559a497bfea4bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b559a497bfea4bb000004"} update={"$set"=>{"acl"=>{"503b559a497bfea4bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:10:18 +0200}, "503b559a497bfea4bb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b559a497bfea4bb000001", "at"=>2012-08-27 13:10:18 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b559a497bfea4bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:10:18 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b559a497bfea4bb000008", "at"=>2012-08-27 11:10:18 UTC, "changes"=>{}, "user_id"=>"503b559a497bfea4bb000001"}]}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b559a497bfea4bb000001.privileges"=>/r\w*/, "label_ids"=>"503b559a497bfea4bb000004"} flags=[] limit=0 skip=0 fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b559a497bfea4bb000002.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8631ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2010ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1709ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1719ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0477ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b57f8497bfeabbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b57f8497bfeabbb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"20d4", "confirmation_key"=>"d77528f3ea3f7effeb32"}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b57f8497bfeabbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b57f8497bfeabbb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3746", "confirmation_key"=>"2dd02e2477beaf857ca2"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b57f8497bfeabbb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0899ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b57f8497bfeabbb000001"} update={"$addToSet"=>{"group_ids"=>"503b57f8497bfeabbb000003"}} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b57f8497bfeabbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b57f8497bfeabbb000001"]}}} flags=[] (0.0913ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b57f8497bfeabbb000002"} update={"$addToSet"=>{"group_ids"=>"503b57f8497bfeabbb000003"}} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b57f8497bfeabbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b57f8497bfeabbb000002"]}}} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b57f8497bfeabbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b57f8497bfeabbb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b57f8497bfeabbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:20:24 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b57f8497bfeabbb000005", "at"=>2012-08-27 11:20:24 UTC, "changes"=>{}, "user_id"=>"503b57f8497bfeabbb000001"}]}] flags=[] (0.1929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b57f8497bfeabbb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b57f8497bfeabbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5178ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b57f8497bfeabbb000004"} update={"$set"=>{"acl"=>{"503b57f8497bfeabbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:20:24 +0200}, "503b57f8497bfeabbb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b57f8497bfeabbb000001", "at"=>2012-08-27 13:20:24 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b57f8497bfeabbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:20:24 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b57f8497bfeabbb000008", "at"=>2012-08-27 11:20:24 UTC, "changes"=>{}, "user_id"=>"503b57f8497bfeabbb000001"}]}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6769ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1709ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1626ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0477ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5818497bfeadbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4861ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5818497bfeadbb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a22c", "confirmation_key"=>"0f0a7a03d2df0b5107a6"}] flags=[] (0.1090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5818497bfeadbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5818497bfeadbb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c2ba", "confirmation_key"=>"733d54ceffe31c650899"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5818497bfeadbb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b5818497bfeadbb000001"} update={"$addToSet"=>{"group_ids"=>"503b5818497bfeadbb000003"}} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b5818497bfeadbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b5818497bfeadbb000001"]}}} flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b5818497bfeadbb000002"} update={"$addToSet"=>{"group_ids"=>"503b5818497bfeadbb000003"}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b5818497bfeadbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b5818497bfeadbb000002"]}}} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5818497bfeadbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5818497bfeadbb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5818497bfeadbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:20:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5818497bfeadbb000005", "at"=>2012-08-27 11:20:56 UTC, "changes"=>{}, "user_id"=>"503b5818497bfeadbb000001"}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b5818497bfeadbb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5818497bfeadbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5818497bfeadbb000004"} update={"$set"=>{"acl"=>{"503b5818497bfeadbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:20:56 +0200}, "503b5818497bfeadbb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5818497bfeadbb000001", "at"=>2012-08-27 13:20:56 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5818497bfeadbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:20:56 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5818497bfeadbb000008", "at"=>2012-08-27 11:20:56 UTC, "changes"=>{}, "user_id"=>"503b5818497bfeadbb000001"}]}]}} flags=[] (0.2711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b5818497bfeadbb000001.privileges"=>/r\w*/, "acl.503b5818497bfeadbb000003.privileges"=>/r\w*/, "label_ids"=>"503b5818497bfeadbb000004"} flags=[] limit=0 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b5818497bfeadbb000002.privileges"=>/r\w*/, "acl.503b5818497bfeadbb000003.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1781ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1450ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b582a497bfeaebb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b582a497bfeaebb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a939", "confirmation_key"=>"c15e4cfacb5a0d4dbb2b"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b582a497bfeaebb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b582a497bfeaebb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6970", "confirmation_key"=>"2f4cffd13f0ae805d12a"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b582a497bfeaebb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b582a497bfeaebb000001"} update={"$addToSet"=>{"group_ids"=>"503b582a497bfeaebb000003"}} flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b582a497bfeaebb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b582a497bfeaebb000001"]}}} flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b582a497bfeaebb000002"} update={"$addToSet"=>{"group_ids"=>"503b582a497bfeaebb000003"}} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b582a497bfeaebb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b582a497bfeaebb000002"]}}} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b582a497bfeaebb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4323ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b582a497bfeaebb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b582a497bfeaebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:21:14 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b582a497bfeaebb000005", "at"=>2012-08-27 11:21:14 UTC, "changes"=>{}, "user_id"=>"503b582a497bfeaebb000001"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b582a497bfeaebb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b582a497bfeaebb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4818ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b582a497bfeaebb000004"} update={"$set"=>{"acl"=>{"503b582a497bfeaebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:21:14 +0200}, "503b582a497bfeaebb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b582a497bfeaebb000001", "at"=>2012-08-27 13:21:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b582a497bfeaebb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b582a497bfeaebb000008", "at"=>2012-08-27 11:21:14 UTC, "changes"=>{}, "user_id"=>"503b582a497bfeaebb000001"}]}]}} flags=[] (0.2618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "acl.503b582a497bfeaebb000001.privileges"=>/r\w*/, "acl.503b582a497bfeaebb000003.privileges"=>/r\w*/, "label_ids"=>"503b582a497bfeaebb000004"} flags=[] limit=0 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "acl.503b582a497bfeaebb000002.privileges"=>/r\w*/, "acl.503b582a497bfeaebb000003.privileges"=>/r\w*/}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3703ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6871ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5843497bfeafbb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5843497bfeafbb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c989", "confirmation_key"=>"1aafb98a34b6f4851532"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5843497bfeafbb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5843497bfeafbb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b42a", "confirmation_key"=>"50580a06ef1916e770c2"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b5843497bfeafbb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b5843497bfeafbb000001"} update={"$addToSet"=>{"group_ids"=>"503b5843497bfeafbb000003"}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b5843497bfeafbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b5843497bfeafbb000001"]}}} flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b5843497bfeafbb000002"} update={"$addToSet"=>{"group_ids"=>"503b5843497bfeafbb000003"}} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b5843497bfeafbb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b5843497bfeafbb000002"]}}} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5843497bfeafbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5843497bfeafbb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5843497bfeafbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:21:39 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5843497bfeafbb000005", "at"=>2012-08-27 11:21:39 UTC, "changes"=>{}, "user_id"=>"503b5843497bfeafbb000001"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b5843497bfeafbb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5843497bfeafbb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5843497bfeafbb000004"} update={"$set"=>{"acl"=>{"503b5843497bfeafbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:21:39 +0200}, "503b5843497bfeafbb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5843497bfeafbb000001", "at"=>2012-08-27 13:21:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5843497bfeafbb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:21:39 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5843497bfeafbb000008", "at"=>2012-08-27 11:21:39 UTC, "changes"=>{}, "user_id"=>"503b5843497bfeafbb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6580ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1729ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b588d497bfeb2bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b588d497bfeb2bb000001", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"0e6d", "confirmation_key"=>"fc3db094c83f8e5e3ae3"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b588d497bfeb2bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b588d497bfeb2bb000002", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"33ed", "confirmation_key"=>"56510117b36344736dca"}] flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b588d497bfeb2bb000003", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b588d497bfeb2bb000001"} update={"$addToSet"=>{"group_ids"=>"503b588d497bfeb2bb000003"}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b588d497bfeb2bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b588d497bfeb2bb000001"]}}} flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b588d497bfeb2bb000002"} update={"$addToSet"=>{"group_ids"=>"503b588d497bfeb2bb000003"}} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b588d497bfeb2bb000003"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b588d497bfeb2bb000002"]}}} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b588d497bfeb2bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b588d497bfeb2bb000004", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b588d497bfeb2bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:22:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b588d497bfeb2bb000005", "at"=>2012-08-27 11:22:53 UTC, "changes"=>{}, "user_id"=>"503b588d497bfeb2bb000001"}]}] flags=[] (0.1869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b588d497bfeb2bb000003"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b588d497bfeb2bb000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b588d497bfeb2bb000004"} update={"$set"=>{"acl"=>{"503b588d497bfeb2bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:22:53 +0200}, "503b588d497bfeb2bb000003"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b588d497bfeb2bb000001", "at"=>2012-08-27 13:22:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b588d497bfeb2bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:22:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b588d497bfeb2bb000008", "at"=>2012-08-27 11:22:53 UTC, "changes"=>{}, "user_id"=>"503b588d497bfeb2bb000001"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b588d497bfeb2bb000001.privileges"=>/r\w*/}, {"acl.503b588d497bfeb2bb000003.privileges"=>/r\w*/}], "label_ids"=>"503b588d497bfeb2bb000004"} flags=[] limit=0 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b588d497bfeb2bb000002.privileges"=>/r\w*/}, {"acl.503b588d497bfeb2bb000003.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.3928ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2029ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5899497bfeb3bb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5899497bfeb3bb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"caa3", "confirmation_key"=>"c9bef6aca8d8ef47a695"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b5899497bfeb3bb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4153ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b5899497bfeb3bb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d27a", "confirmation_key"=>"6fa2bd0eff8d931daec6"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5899497bfeb3bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b5899497bfeb3bb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5899497bfeb3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:05 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b5899497bfeb3bb000004", "at"=>2012-08-27 11:23:05 UTC, "changes"=>{}, "user_id"=>"503b5899497bfeb3bb000001"}]}] flags=[] (0.1781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b5899497bfeb3bb000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b5899497bfeb3bb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5899497bfeb3bb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b5899497bfeb3bb000003"} update={"$set"=>{"acl"=>{"503b5899497bfeb3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:05 +0200}, "503b5899497bfeb3bb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b5899497bfeb3bb000001", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b5899497bfeb3bb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:05 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000007", "at"=>2012-08-27 11:23:05 UTC, "changes"=>{}, "user_id"=>"503b5899497bfeb3bb000001"}]}]}} flags=[] (0.2508ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b5899497bfeb3bb000001.privileges"=>/r\w*/}], "label_ids"=>"503b5899497bfeb3bb000003"} flags=[] limit=0 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b5899497bfeb3bb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b5899497bfeb3bb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b5899497bfeb3bb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b5899497bfeb3bb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7281ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b5899497bfeb3bb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9890ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3302ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2131ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1562ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb00000a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"02e2", "confirmation_key"=>"99fba980c6c30c777a54"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb00000b", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0a66", "confirmation_key"=>"cac3a694a8ff0b6a6e25"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b589a497bfeb3bb00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b589a497bfeb3bb00000a"} update={"$addToSet"=>{"group_ids"=>"503b589a497bfeb3bb00000c"}} flags=[] (0.0668ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b589a497bfeb3bb00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b589a497bfeb3bb00000a"]}}} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b589a497bfeb3bb00000b"} update={"$addToSet"=>{"group_ids"=>"503b589a497bfeb3bb00000c"}} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b589a497bfeb3bb00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b589a497bfeb3bb00000b"]}}} flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4838ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00000e", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb00000a"}]}] flags=[] (0.2279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503b589a497bfeb3bb00000c"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5341ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb00000d"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb00000c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb00000a", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000011", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb00000a"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb00000a.privileges"=>/r\w*/}, {"acl.503b589a497bfeb3bb00000c.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb00000d"} flags=[] limit=0 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb00000b.privileges"=>/r\w*/}, {"acl.503b589a497bfeb3bb00000c.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5512ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2329ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2077ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000012", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"e50f", "confirmation_key"=>"e7443463cf416b3e54d0"}] flags=[] (0.0899ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503b589a497bfeb3bb000013", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3493ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503b589a497bfeb3bb000012"} update={"$addToSet"=>{"group_ids"=>"503b589a497bfeb3bb000013"}} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503b589a497bfeb3bb000013"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b589a497bfeb3bb000012"]}}} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b589a497bfeb3bb000013"]}}]}} (0.3190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b589a497bfeb3bb000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b589a497bfeb3bb000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1888ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3302ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0364", "confirmation_key"=>"988764ff0a077bb3c411"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3440ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000015", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000016", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000014"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3641ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000018", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000014"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00001a", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000014"}]}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000014.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000015"} flags=[] limit=0 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000017"} update={"$set"=>{"label_ids"=>["503b589a497bfeb3bb000015"], "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b589a497bfeb3bb000015"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00001d", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000014"}]}]}} flags=[] (0.2458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000017"} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b589a497bfeb3bb000015"]}} flags=[] limit=0 skip=0 fields=nil (0.5898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000019"} update={"$set"=>{"label_ids"=>["503b589a497bfeb3bb000017"], "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b589a497bfeb3bb000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000020", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000014"}]}]}} flags=[] (0.2167ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000019"} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2310ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4277ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000021", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9312", "confirmation_key"=>"a87bfdfbc4d241c1543f"}] flags=[] (0.0772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000022", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"645a", "confirmation_key"=>"6e4f52ddf50d1cf52ba5"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000023", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000024", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3080ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000025", "version"=>1, "label_ids"=>["503b589a497bfeb3bb000023"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000026", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000027", "version"=>1, "label_ids"=>["503b589a497bfeb3bb000025"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000028", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000023"} flags=[] limit=0 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000025"} flags=[] limit=0 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5341ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000023"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00002b", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5550ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000025"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000023"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b589a497bfeb3bb000023"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00002e", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000025"} flags=[] limit=0 skip=0 fields=nil (0.5431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000027"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000025"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b589a497bfeb3bb000025"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000031", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000027"} flags=[] limit=0 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000025"} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000027"} flags=[] limit=-1 skip=0 fields=nil (0.2768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000023", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6359ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000023"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000034", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000025", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5591ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000025"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b589a497bfeb3bb000023"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000023"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000037", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000027", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000027"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b589a497bfeb3bb000025"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000025"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00003a", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000025"} flags=[] limit=-1 skip=0 fields=nil (0.5078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000027"} flags=[] limit=-1 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000023", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7620ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000023"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00003d", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2453ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000025", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7238ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000025"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000023"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b589a497bfeb3bb000023"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000040", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000027", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5322ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000027"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000025"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b589a497bfeb3bb000025"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000043", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3307ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000045", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}] flags=[] (0.1278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000044"} update={"$set"=>{"label_ids"=>["503b589a497bfeb3bb000023"], "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b589a497bfeb3bb000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb000022"=>{"privileges"=>"rw", "inherited"=>{"503b589a497bfeb3bb000023"=>"rw"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000048", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000044"} flags=[] limit=0 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b589a497bfeb3bb000023"]}} flags=[] limit=0 skip=0 fields=nil (0.5970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000023", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6859ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000023"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00004b", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000025", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6859ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000025"} update={"$set"=>{"acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000025"=>"r", "503b589a497bfeb3bb000023"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b589a497bfeb3bb000023"], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}, "503b589a497bfeb3bb000022"=>{"privileges"=>"r", "inherited"=>{"503b589a497bfeb3bb000023"=>"r"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00004e", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000050", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000051", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b589a497bfeb3bb000050"} update={"$set"=>{"label_ids"=>["503b589a497bfeb3bb000023"], "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b589a497bfeb3bb000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}, "503b589a497bfeb3bb000022"=>{"privileges"=>"rw", "inherited"=>{"503b589a497bfeb3bb000023"=>"rw"}, "invited"=>"503b589a497bfeb3bb000021", "at"=>2012-08-27 13:23:06 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 11:23:06 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000054", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000021"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "label_ids"=>"503b589a497bfeb3bb000050"} flags=[] limit=0 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b589a497bfeb3bb000023"]}} flags=[] limit=0 skip=0 fields=nil (0.6871ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3140ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3293ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"c171", "confirmation_key"=>"51c1603452da8849ab2d"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2754ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000056", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"6849", "confirmation_key"=>"62e634f6ccc7d52924c7"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb000058", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000055"}]}] flags=[] (0.1352ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4361ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb00005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00005c", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000055"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b589a497bfeb3bb00005d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b589a497bfeb3bb000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 13:23:06 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b589a497bfeb3bb00005e", "at"=>2012-08-27 11:23:06 UTC, "changes"=>{}, "user_id"=>"503b589a497bfeb3bb000055"}]}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000055.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000056.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4113ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b589a497bfeb3bb000055.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.2041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b589a497bfeb3bb000057"} flags=[] limit=-1 skip=0 fields=nil (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4361ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb00005f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1190", "confirmation_key"=>"84db06cb91d755189732"}] flags=[] (0.0901ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503b589a497bfeb3bb000060", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6857", "confirmation_key"=>"08f8ab372f3027f50fcf"}] flags=[] (0.0832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503b589a497bfeb3bb000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.5109ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (1.2999ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a86b", "confirmation_key"=>"6e366b35269c867cf9c9"}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (48.3370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1873", "confirmation_key"=>"a5a3779294934674a926"}] flags=[] (0.1478ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000004", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000001"}]}] flags=[] (0.2580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.8891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7041ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000003"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000001", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000007", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000001"}]}]}} flags=[] (0.3052ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000001.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc000003"} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b61eb497bfe4abc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5431ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b61eb497bfe4abc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6731ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3772ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2141ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2024ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2959ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8864", "confirmation_key"=>"065176355abc8a3125a5"}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00000b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00000c", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00000a"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00000e", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00000a"}]}] flags=[] (0.1242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000010", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00000a"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00000a.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc00000b"} flags=[] limit=0 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00000d"} update={"$set"=>{"label_ids"=>["503b61eb497bfe4abc00000b"], "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b61eb497bfe4abc00000b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000013", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00000a"}]}]}} flags=[] (0.4213ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00000d"} flags=[] limit=-1 skip=0 fields=nil (0.6330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00000a.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b61eb497bfe4abc00000b"]}} flags=[] limit=0 skip=0 fields=nil (0.7901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00000a.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5291ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00000f"} update={"$set"=>{"label_ids"=>["503b61eb497bfe4abc00000d"], "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{"503b61eb497bfe4abc00000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000016", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00000a"}]}]}} flags=[] (0.2372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00000f"} flags=[] limit=-1 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2289ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000017", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6f4f", "confirmation_key"=>"e013b6177a46c33de927"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000018", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2623", "confirmation_key"=>"dfc025d04a2d604410ed"}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00001a", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}] flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00001b", "version"=>1, "label_ids"=>["503b61eb497bfe4abc000019"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00001c", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}] flags=[] (0.1640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00001d", "version"=>1, "label_ids"=>["503b61eb497bfe4abc00001b"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00001e", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc000019"} flags=[] limit=0 skip=0 fields=nil (0.4983ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc00001b"} flags=[] limit=0 skip=0 fields=nil (0.5171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000019"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000021", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5820ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001b"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc000019"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b61eb497bfe4abc000019"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000024", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc00001b"} flags=[] limit=0 skip=0 fields=nil (0.6008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001d"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc00001b"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b61eb497bfe4abc00001b"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000027", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc00001d"} flags=[] limit=0 skip=0 fields=nil (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00001b"} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00001d"} flags=[] limit=-1 skip=0 fields=nil (0.2971ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000019", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5140ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000019"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00002a", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5648ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001b"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b61eb497bfe4abc000019"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc000019"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00002d", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6273ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001d"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b61eb497bfe4abc00001b"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc00001b"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000030", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00001b"} flags=[] limit=-1 skip=0 fields=nil (0.6089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00001d"} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000019", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7558ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000019"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000033", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001b"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc000019"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b61eb497bfe4abc000019"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000036", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (9.5689ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001d"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc00001b"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b61eb497bfe4abc00001b"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000039", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.4008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00003a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00003b", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}] flags=[] (0.1912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00003a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5488ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00003a"} update={"$set"=>{"label_ids"=>["503b61eb497bfe4abc000019"], "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b61eb497bfe4abc000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000018"=>{"privileges"=>"rw", "inherited"=>{"503b61eb497bfe4abc000019"=>"rw"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00003e", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc00003a"} flags=[] limit=0 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b61eb497bfe4abc000019"]}} flags=[] limit=0 skip=0 fields=nil (0.6840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000019", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6421ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000019"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000041", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00001b", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6490ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc00001b"} update={"$set"=>{"acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc00001b"=>"r", "503b61eb497bfe4abc000019"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b61eb497bfe4abc000019"], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}, "503b61eb497bfe4abc000018"=>{"privileges"=>"r", "inherited"=>{"503b61eb497bfe4abc000019"=>"r"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000044", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4187ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc000046", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000047", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000046", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4919ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b61eb497bfe4abc000046"} update={"$set"=>{"label_ids"=>["503b61eb497bfe4abc000019"], "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{"503b61eb497bfe4abc000019"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}, "503b61eb497bfe4abc000018"=>{"privileges"=>"rw", "inherited"=>{"503b61eb497bfe4abc000019"=>"rw"}, "invited"=>"503b61eb497bfe4abc000017", "at"=>2012-08-27 14:02:51 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc000017"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:02:51 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00004a", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc000017"}]}]}} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "label_ids"=>"503b61eb497bfe4abc000046"} flags=[] limit=0 skip=0 fields=nil (0.3517ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc000017.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b61eb497bfe4abc000019"]}} flags=[] limit=0 skip=0 fields=nil (0.6909ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1988ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1931ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00004b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc00004b", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8d6b", "confirmation_key"=>"7439a340e54e08529492"}] flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc00004c", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"23db", "confirmation_key"=>"8b6719083f75ad4ba963"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00004d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3757ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc00004d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc00004e", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00004b"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc00004f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000051", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc000051", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000052", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00004b"}]}] flags=[] (0.1879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000053", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b61eb497bfe4abc000053", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b61eb497bfe4abc00004b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:02:51 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b61eb497bfe4abc000054", "at"=>2012-08-27 12:02:51 UTC, "changes"=>{}, "user_id"=>"503b61eb497bfe4abc00004b"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00004b.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00004c.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b61eb497bfe4abc00004b.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b61eb497bfe4abc00004d"} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3600ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7ab7", "confirmation_key"=>"0beae1b651795a6286e3"}] flags=[] (0.0989ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b61eb497bfe4abc000056", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2cc6", "confirmation_key"=>"c424bed96ed89a6c617e"}] flags=[] (0.0920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b61eb497bfe4abc000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.6621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2372ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"daa1", "confirmation_key"=>"60b4ffb53ef80bf0e0ad"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d677", "confirmation_key"=>"2d17dce3f5a6e6e8b1a4"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6201497bfe50bc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6201497bfe50bc000004", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000001"}]}] flags=[] (0.1822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6201497bfe50bc000003"} update={"$set"=>{"acl"=>{"503b6201497bfe50bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}, "503b6201497bfe50bc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6201497bfe50bc000001", "at"=>2012-08-27 14:03:13 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:13 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6201497bfe50bc000007", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000001"}]}]}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000001.privileges"=>/r\w*/}], "label_ids"=>"503b6201497bfe50bc000003"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6201497bfe50bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6201497bfe50bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8028ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3977ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2282ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2329ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4053ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc00000a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e1bc", "confirmation_key"=>"0d2ce4342eaa88386016"}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3278ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc00000b", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2842", "confirmation_key"=>"7c65ffef5a51c81d58c6"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6201497bfe50bc00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0958ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6201497bfe50bc00000a"} update={"$addToSet"=>{"group_ids"=>"503b6201497bfe50bc00000c"}} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6201497bfe50bc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6201497bfe50bc00000a"]}}} flags=[] (0.0918ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6201497bfe50bc00000b"} update={"$addToSet"=>{"group_ids"=>"503b6201497bfe50bc00000c"}} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6201497bfe50bc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6201497bfe50bc00000b"]}}} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (66.7713ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6201497bfe50bc00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6201497bfe50bc00000e", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc00000a"}]}] flags=[] (0.4389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>["503b6201497bfe50bc00000c"]}}]} flags=[] limit=0 skip=0 fields=nil (0.8461ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7150ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6201497bfe50bc00000d"} update={"$set"=>{"acl"=>{"503b6201497bfe50bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}, "503b6201497bfe50bc00000c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6201497bfe50bc00000a", "at"=>2012-08-27 14:03:13 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:13 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6201497bfe50bc000011", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc00000a"}]}]}} flags=[] (0.3381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc00000a.privileges"=>/r\w*/}, {"acl.503b6201497bfe50bc00000c.privileges"=>/r\w*/}], "label_ids"=>"503b6201497bfe50bc00000d"} flags=[] limit=0 skip=0 fields=nil (0.6101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc00000b.privileges"=>/r\w*/}, {"acl.503b6201497bfe50bc00000c.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7949ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.4470ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0668ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1900ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc000012", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"d99c", "confirmation_key"=>"a686a1f41e40f277dd01"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6201497bfe50bc000013", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4520ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6201497bfe50bc000012"} update={"$addToSet"=>{"group_ids"=>"503b6201497bfe50bc000013"}} flags=[] (0.0813ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6201497bfe50bc000013"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6201497bfe50bc000012"]}}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b6201497bfe50bc000013"]}}]}} (0.4289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6201497bfe50bc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6201497bfe50bc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3181ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6201497bfe50bc000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3901ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6201497bfe50bc000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"70da", "confirmation_key"=>"c0bf27de82640abce0a6"}] flags=[] (0.0823ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6201497bfe50bc000015", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6201497bfe50bc000016", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000014"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6201497bfe50bc000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6201497bfe50bc000018", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000014"}]}] flags=[] (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6201497bfe50bc000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6201497bfe50bc00001a", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000014"}]}] flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000014.privileges"=>/r\w*/}], "label_ids"=>"503b6201497bfe50bc000015"} flags=[] limit=0 skip=0 fields=nil (0.4668ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6201497bfe50bc000017"} update={"$set"=>{"label_ids"=>["503b6201497bfe50bc000015"], "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b6201497bfe50bc000015"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:13 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00001d", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000014"}]}]}} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6201497bfe50bc000017"} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6201497bfe50bc000015"]}} flags=[] limit=0 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6201497bfe50bc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6201497bfe50bc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4361ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6201497bfe50bc000019"} update={"$set"=>{"label_ids"=>["503b6201497bfe50bc000017"], "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b6201497bfe50bc000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:13 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6201497bfe50bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:13 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000020", "at"=>2012-08-27 12:03:13 UTC, "changes"=>{}, "user_id"=>"503b6201497bfe50bc000014"}]}]}} flags=[] (0.2131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6201497bfe50bc000019"} flags=[] limit=-1 skip=0 fields=nil (0.5980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2079ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3250ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc000021", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"61aa", "confirmation_key"=>"cf907c77cccdf422b185"}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc000022", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a906", "confirmation_key"=>"dded9459a2571520b9c1"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000023", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000024", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3128ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000025", "version"=>1, "label_ids"=>["503b6202497bfe50bc000023"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000026", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3698ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000027", "version"=>1, "label_ids"=>["503b6202497bfe50bc000025"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000028", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}] flags=[] (0.1261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000023"} flags=[] limit=0 skip=0 fields=nil (0.5679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000025"} flags=[] limit=0 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6061ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000023"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00002b", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5481ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000025"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000023"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6202497bfe50bc000023"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00002e", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2248ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000025"} flags=[] limit=0 skip=0 fields=nil (0.6008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4098ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000027"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000025"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6202497bfe50bc000025"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000031", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000027"} flags=[] limit=0 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6202497bfe50bc000025"} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6202497bfe50bc000027"} flags=[] limit=-1 skip=0 fields=nil (0.3002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000023", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000023"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000034", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000025", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6609ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000025"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6202497bfe50bc000023"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000023"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000037", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2971ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000027", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000027"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6202497bfe50bc000025"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000025"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00003a", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6202497bfe50bc000025"} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6202497bfe50bc000027"} flags=[] limit=-1 skip=0 fields=nil (0.3712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000023", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6928ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000023"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}, "503b6202497bfe50bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00003d", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000025", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6399ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000025"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000023"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6202497bfe50bc000023"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000040", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2303ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000027", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6058ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000027"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000025"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6202497bfe50bc000025"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000043", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000045", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4663ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000044"} update={"$set"=>{"label_ids"=>["503b6202497bfe50bc000023"], "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b6202497bfe50bc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}, "503b6202497bfe50bc000022"=>{"privileges"=>"rw", "inherited"=>{"503b6202497bfe50bc000023"=>"rw"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000048", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000044"} flags=[] limit=0 skip=0 fields=nil (0.3040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6202497bfe50bc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.6340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000023", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7620ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000023"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}, "503b6202497bfe50bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00004b", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000025", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6897ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000025"} update={"$set"=>{"acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000025"=>"r", "503b6202497bfe50bc000023"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b6202497bfe50bc000023"], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}, "503b6202497bfe50bc000022"=>{"privileges"=>"r", "inherited"=>{"503b6202497bfe50bc000023"=>"r"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00004e", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000050", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000051", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6202497bfe50bc000050"} update={"$set"=>{"label_ids"=>["503b6202497bfe50bc000023"], "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b6202497bfe50bc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}, "503b6202497bfe50bc000022"=>{"privileges"=>"rw", "inherited"=>{"503b6202497bfe50bc000023"=>"rw"}, "invited"=>"503b6202497bfe50bc000021", "at"=>2012-08-27 14:03:14 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:14 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000054", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000021"}]}]}} flags=[] (0.2263ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6202497bfe50bc000050"} flags=[] limit=0 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6202497bfe50bc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.7138ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1960ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1533ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3de2", "confirmation_key"=>"06a9fc6fa88610c590eb"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc000056", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"e570", "confirmation_key"=>"d04e4ac0ab29431382ec"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6202497bfe50bc000058", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000055"}]}] flags=[] (0.1347ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc00005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc00005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00005c", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000055"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6202497bfe50bc00005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4563ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6202497bfe50bc00005d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6202497bfe50bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:14 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b6202497bfe50bc00005e", "at"=>2012-08-27 12:03:14 UTC, "changes"=>{}, "user_id"=>"503b6202497bfe50bc000055"}]}] flags=[] (0.1378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000055.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000056.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6202497bfe50bc000055.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6202497bfe50bc000057"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc00005f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"9526", "confirmation_key"=>"c9a673b57e11eec62026"}] flags=[] (0.1528ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6202497bfe50bc000060", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"97de", "confirmation_key"=>"ea5db07d4ece56e2839c"}] flags=[] (0.0887ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6202497bfe50bc000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.5579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2050ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1578ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d0ff", "confirmation_key"=>"c593e83b305d84664e64"}] flags=[] (0.0968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3986ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3d66", "confirmation_key"=>"1d9bc00777bb4a3c2527"}] flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000004", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000001"}]}] flags=[] (0.1688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000003"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000001", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000007", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000001"}]}]}} flags=[] (0.2518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000001.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000003"} flags=[] limit=0 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b621a497bfe52bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6471ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b621a497bfe52bc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7927ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3941ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2587ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2162ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc00000a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d062", "confirmation_key"=>"609bbf89bc3a16e53ad2"}] flags=[] (0.0823ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc00000b", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2e0a", "confirmation_key"=>"2d5e9354bb29d4cc27d2"}] flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b621a497bfe52bc00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1252ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b621a497bfe52bc00000a"} update={"$addToSet"=>{"group_ids"=>"503b621a497bfe52bc00000c"}} flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b621a497bfe52bc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b621a497bfe52bc00000a"]}}} flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b621a497bfe52bc00000b"} update={"$addToSet"=>{"group_ids"=>"503b621a497bfe52bc00000c"}} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b621a497bfe52bc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b621a497bfe52bc00000b"]}}} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00000e", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc00000a"}]}] flags=[] (0.1433ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>["503b621a497bfe52bc00000c"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5641ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc00000d"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc00000c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b621a497bfe52bc00000a", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000011", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc00000a"}]}]}} flags=[] (0.4251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc00000a.privileges"=>/r\w*/}, {"acl.503b621a497bfe52bc00000c.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc00000d"} flags=[] limit=0 skip=0 fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc00000b.privileges"=>/r\w*/}, {"acl.503b621a497bfe52bc00000c.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2542ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3352ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000012", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"3b09", "confirmation_key"=>"dd7b7703a567c0f61e89"}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b621a497bfe52bc000013", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.6058ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b621a497bfe52bc000012"} update={"$addToSet"=>{"group_ids"=>"503b621a497bfe52bc000013"}} flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b621a497bfe52bc000013"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b621a497bfe52bc000012"]}}} flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b621a497bfe52bc000013"]}}]}} (0.3622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b621a497bfe52bc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b621a497bfe52bc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3803ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2010ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9332", "confirmation_key"=>"09aef562ef9330c275a2"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000015", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000016", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000014"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2959ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000018", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000014"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00001a", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000014"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000014.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000015"} flags=[] limit=0 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000017"} update={"$set"=>{"label_ids"=>["503b621a497bfe52bc000015"], "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b621a497bfe52bc000015"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00001d", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000014"}]}]}} flags=[] (0.2289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000017"} flags=[] limit=-1 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b621a497bfe52bc000015"]}} flags=[] limit=0 skip=0 fields=nil (0.6049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5887ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000019"} update={"$set"=>{"label_ids"=>["503b621a497bfe52bc000017"], "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b621a497bfe52bc000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000020", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000014"}]}]}} flags=[] (0.2389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000019"} flags=[] limit=-1 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1616ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000021", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"336a", "confirmation_key"=>"8fdf2716fedab8d1eb83"}] flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000022", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7d4d", "confirmation_key"=>"8e7c02696d45dc238f6d"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000023", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000024", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3777ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000025", "version"=>1, "label_ids"=>["503b621a497bfe52bc000023"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000026", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000027", "version"=>1, "label_ids"=>["503b621a497bfe52bc000025"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000028", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000023"} flags=[] limit=0 skip=0 fields=nil (0.5562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000025"} flags=[] limit=0 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000023"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00002b", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000025"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000023"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b621a497bfe52bc000023"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00002e", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000025"} flags=[] limit=0 skip=0 fields=nil (0.5810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000027"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000025"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b621a497bfe52bc000025"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000031", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000027"} flags=[] limit=0 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000025"} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000027"} flags=[] limit=-1 skip=0 fields=nil (0.3181ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000023", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7041ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000023"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000034", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000025", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5889ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000025"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b621a497bfe52bc000023"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000023"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000037", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000027", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000027"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b621a497bfe52bc000025"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000025"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00003a", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000025"} flags=[] limit=-1 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000027"} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000023", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7031ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000023"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00003d", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000025", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000025"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000023"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b621a497bfe52bc000023"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000040", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000027", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7553ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000027"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000025"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b621a497bfe52bc000025"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000043", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000045", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4301ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000044"} update={"$set"=>{"label_ids"=>["503b621a497bfe52bc000023"], "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b621a497bfe52bc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000022"=>{"privileges"=>"rw", "inherited"=>{"503b621a497bfe52bc000023"=>"rw"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000048", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000044"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5047ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b621a497bfe52bc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.6371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000023", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8221ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000023"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00004b", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000025", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6769ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000025"} update={"$set"=>{"acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000025"=>"r", "503b621a497bfe52bc000023"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b621a497bfe52bc000023"], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}, "503b621a497bfe52bc000022"=>{"privileges"=>"r", "inherited"=>{"503b621a497bfe52bc000023"=>"r"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00004e", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000050", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000051", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4768ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b621a497bfe52bc000050"} update={"$set"=>{"label_ids"=>["503b621a497bfe52bc000023"], "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b621a497bfe52bc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}, "503b621a497bfe52bc000022"=>{"privileges"=>"rw", "inherited"=>{"503b621a497bfe52bc000023"=>"rw"}, "invited"=>"503b621a497bfe52bc000021", "at"=>2012-08-27 14:03:38 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:03:38 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000054", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000021"}]}]}} flags=[] (0.3240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "label_ids"=>"503b621a497bfe52bc000050"} flags=[] limit=0 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5019ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b621a497bfe52bc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.7050ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2310ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2019ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"249d", "confirmation_key"=>"091a3a3406c5be340ba6"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000056", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"4f27", "confirmation_key"=>"fabc08ab3a263a8b55d9"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3600ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b621a497bfe52bc000058", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000055"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc00005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc00005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00005c", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000055"}]}] flags=[] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b621a497bfe52bc00005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4508ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b621a497bfe52bc00005d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b621a497bfe52bc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:03:38 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b621a497bfe52bc00005e", "at"=>2012-08-27 12:03:38 UTC, "changes"=>{}, "user_id"=>"503b621a497bfe52bc000055"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000055.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000056.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b621a497bfe52bc000055.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b621a497bfe52bc000057"} flags=[] limit=-1 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc00005f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1270", "confirmation_key"=>"eb07b0a043c23c98bd72"}] flags=[] (0.0870ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4108ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b621a497bfe52bc000060", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"b436", "confirmation_key"=>"ecc4b42ecb77c04e5386"}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b621a497bfe52bc000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.1867ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.8271ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.4652ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7a45", "confirmation_key"=>"74ba8d94360aa6cca188"}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e4a7", "confirmation_key"=>"86c00f133e611eabad70"}] flags=[] (0.0978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000004", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000001"}]}] flags=[] (0.1812ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5398ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000003"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000001", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000007", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000001"}]}]}} flags=[] (0.2558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000001.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000003"} flags=[] limit=0 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6314497bfe7fbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5429ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6314497bfe7fbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6869ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2942ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1540ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1488ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3438ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc00000a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8015", "confirmation_key"=>"e422fd3f49506c1bfab2"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3698ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc00000b", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"933a", "confirmation_key"=>"6be6205ca3d5dfb7b274"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6314497bfe7fbc00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6314497bfe7fbc00000a"} update={"$addToSet"=>{"group_ids"=>"503b6314497bfe7fbc00000c"}} flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6314497bfe7fbc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6314497bfe7fbc00000a"]}}} flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6314497bfe7fbc00000b"} update={"$addToSet"=>{"group_ids"=>"503b6314497bfe7fbc00000c"}} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6314497bfe7fbc00000c"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6314497bfe7fbc00000b"]}}} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc00000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00000e", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc00000a"}]}] flags=[] (0.1471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>["503b6314497bfe7fbc00000c"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc00000d"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc00000c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc00000a", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc00000a"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000011", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc00000a"}]}]}} flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc00000a.privileges"=>/r\w*/}, {"acl.503b6314497bfe7fbc00000c.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc00000d"} flags=[] limit=0 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc00000b.privileges"=>/r\w*/}, {"acl.503b6314497bfe7fbc00000c.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2873ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2322ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0744ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4628ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000012", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"982f", "confirmation_key"=>"688a564386e2b2a1855a"}] flags=[] (0.1447ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6314497bfe7fbc000013", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3641ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6314497bfe7fbc000012"} update={"$addToSet"=>{"group_ids"=>"503b6314497bfe7fbc000013"}} flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6314497bfe7fbc000013"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6314497bfe7fbc000012"]}}} flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b6314497bfe7fbc000013"]}}]}} (0.3598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6314497bfe7fbc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6314497bfe7fbc000012"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2770ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000014", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e2f3", "confirmation_key"=>"d14f24d31d09494bb2fe"}] flags=[] (0.0827ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2561ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000015", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000016", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000014"}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000017", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000018", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000014"}]}] flags=[] (0.2060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000019", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00001a", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000014"}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000014.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000015"} flags=[] limit=0 skip=0 fields=nil (0.5393ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000017"} update={"$set"=>{"label_ids"=>["503b6314497bfe7fbc000015"], "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b6314497bfe7fbc000015"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00001d", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000014"}]}]}} flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000017"} flags=[] limit=-1 skip=0 fields=nil (0.4792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6314497bfe7fbc000015"]}} flags=[] limit=0 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000014.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5159ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000019"} update={"$set"=>{"label_ids"=>["503b6314497bfe7fbc000017"], "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{"503b6314497bfe7fbc000017"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000020", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000014"}]}]}} flags=[] (0.2367ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000019"} flags=[] limit=-1 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2422ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000021", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"f984", "confirmation_key"=>"e86ac2fe375bd629f3e5"}] flags=[] (0.0892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000022", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"14de", "confirmation_key"=>"03fe7e8d77154fd18df0"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000023", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000024", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000025", "version"=>1, "label_ids"=>["503b6314497bfe7fbc000023"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000026", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}] flags=[] (0.1616ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2892ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000027", "version"=>1, "label_ids"=>["503b6314497bfe7fbc000025"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000028", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000023"} flags=[] limit=0 skip=0 fields=nil (0.5822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000025"} flags=[] limit=0 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000023", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6039ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000023"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00002b", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000025", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4542ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000025"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000023"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6314497bfe7fbc000023"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00002e", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000025"} flags=[] limit=0 skip=0 fields=nil (0.4888ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000027", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4652ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000027"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000025"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6314497bfe7fbc000025"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000031", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000027"} flags=[] limit=0 skip=0 fields=nil (0.4232ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000025"} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000027"} flags=[] limit=-1 skip=0 fields=nil (0.2940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000023", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7169ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000023"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000034", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000025", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000025"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6314497bfe7fbc000023"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000023"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000037", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000027", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5591ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000027"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6314497bfe7fbc000025"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000025"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00003a", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000025"} flags=[] limit=-1 skip=0 fields=nil (0.4511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000027"} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000023", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6950ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000023"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00003d", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000025", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5739ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000025"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000023"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6314497bfe7fbc000023"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000040", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2203ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000027", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6058ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000027"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000025"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6314497bfe7fbc000025"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000043", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3541ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000044", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000045", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000044", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000044"} update={"$set"=>{"label_ids"=>["503b6314497bfe7fbc000023"], "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b6314497bfe7fbc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000022"=>{"privileges"=>"rw", "inherited"=>{"503b6314497bfe7fbc000023"=>"rw"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000048", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000044"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6314497bfe7fbc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000023", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000023"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00004b", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000025", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6971ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000025"} update={"$set"=>{"acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000025"=>"r", "503b6314497bfe7fbc000023"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b6314497bfe7fbc000023"], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}, "503b6314497bfe7fbc000022"=>{"privileges"=>"r", "inherited"=>{"503b6314497bfe7fbc000023"=>"r"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00004e", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000050", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000051", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}] flags=[] (0.1569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000050", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4900ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6314497bfe7fbc000050"} update={"$set"=>{"label_ids"=>["503b6314497bfe7fbc000023"], "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{"503b6314497bfe7fbc000023"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}, "503b6314497bfe7fbc000022"=>{"privileges"=>"rw", "inherited"=>{"503b6314497bfe7fbc000023"=>"rw"}, "invited"=>"503b6314497bfe7fbc000021", "at"=>2012-08-27 14:07:48 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000021"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:07:48 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000054", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000021"}]}]}} flags=[] (0.2313ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "label_ids"=>"503b6314497bfe7fbc000050"} flags=[] limit=0 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000021.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6314497bfe7fbc000023"]}} flags=[] limit=0 skip=0 fields=nil (0.7010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2131ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1516ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000055", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3283ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000055", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1a2b", "confirmation_key"=>"9595bd8866863cd9a118"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000056", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3693ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000056", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"5004", "confirmation_key"=>"4cf006c3f75150ac540e"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc000058", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000055"}]}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc00005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00005c", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000055"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6314497bfe7fbc00005d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6314497bfe7fbc000055"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:07:48 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b6314497bfe7fbc00005e", "at"=>2012-08-27 12:07:48 UTC, "changes"=>{}, "user_id"=>"503b6314497bfe7fbc000055"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000055.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000056.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6314497bfe7fbc000055.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6314497bfe7fbc000057"} flags=[] limit=-1 skip=0 fields=nil (0.3147ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc00005f", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1ec3", "confirmation_key"=>"aa4e97618b64ed087e16"}] flags=[] (0.0999ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4749ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6314497bfe7fbc000060", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6b3a", "confirmation_key"=>"7637eb14cde11d43e9e7"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6314497bfe7fbc000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8020ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.7522ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.6042ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4561ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000001", "version"=>1, "email"=>"b@test.com", "salt"=>"b84d", "confirmation_key"=>"d6355c19a70cde57c14a"}] flags=[] (0.1338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000002", "version"=>1, "email"=>"a@test.com", "salt"=>"d29b", "confirmation_key"=>"8ae37b30539d34958147"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4551ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000004", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000001"}]}] flags=[] (0.2403ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6118ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6ca1497bfeb7bc000003"} update={"$set"=>{"acl"=>{"503b6ca1497bfeb7bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000001", "at"=>2012-08-27 14:48:33 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000006", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000001"}]}], "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000007", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000001", "at"=>2012-08-27 14:48:33 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000001"}]}} flags=[] (0.3719ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2682ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1478ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3521ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000008", "version"=>1, "email"=>"a@test.com", "salt"=>"6c50", "confirmation_key"=>"bc0fe8085be7b3b674ae"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000009", "version"=>1, "email"=>"b@test.com", "salt"=>"6ecb", "confirmation_key"=>"cf6ab2cb6643f12b1080"}] flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6ca1497bfeb7bc00000a", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.5691ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.5238ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6740ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc00000b", "version"=>1, "email"=>"u@test.com", "salt"=>"e9b6", "confirmation_key"=>"163926263a980dcc2c6a"}] flags=[] (0.1781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6ca1497bfeb7bc00000c", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1192ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>[]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>[]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.5631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.4160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4508ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc00000d", "version"=>1, "email"=>"b@test.com", "salt"=>"20bb", "confirmation_key"=>"1e21f65db22eeaddc51f"}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc00000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc00000d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00000f", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc00000d"}]}] flags=[] (0.1333ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000010", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000010", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc00000d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000011", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc00000d"}]}] flags=[] (0.1342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000012", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000012", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc00000d"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000013", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc00000d"}]}] flags=[] (0.1318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6ca1497bfeb7bc000010"} flags=[] limit=-1 skip=0 fields=nil (0.2940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6ca1497bfeb7bc000012"} flags=[] limit=-1 skip=0 fields=nil (0.2618ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2689ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000014", "version"=>1, "email"=>"b@test.com", "salt"=>"84c6", "confirmation_key"=>"2e31ed79e90a5880d1c5"}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000015", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000015", "version"=>1, "email"=>"a@test.com", "salt"=>"5846", "confirmation_key"=>"21f25909114b2e5e39f6"}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000017", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}] flags=[] (0.1550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2968ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000018", "version"=>1, "label_ids"=>["503b6ca1497bfeb7bc000016"], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000019", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc00001a", "version"=>1, "label_ids"=>["503b6ca1497bfeb7bc000018"], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00001b", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6242ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6ca1497bfeb7bc000016"} update={"$set"=>{"acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00001d", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}], "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00001e", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}} flags=[] (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000016", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7119ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6ca1497bfeb7bc000016"} update={"$set"=>{"version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00001d", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}], "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00001e", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}} flags=[] (0.2990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6ca1497bfeb7bc000018"} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000016", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8597ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6ca1497bfeb7bc000016"} update={"$set"=>{"acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000021", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000022", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}, {"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000023", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000024", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000025", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}], "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000026", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000027", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"version"=>[1, 3]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}} flags=[] (0.9069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000016", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (16.4707ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6ca1497bfeb7bc000016"} update={"$set"=>{"acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000021", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000022", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}, {"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000023", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000024", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000025", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:48:33 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}], "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000026", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"_id"=>[nil, "503b6ca1497bfeb7bc000016"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6ca1497bfeb7bc000014"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}, "503b6ca1497bfeb7bc000015"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6ca1497bfeb7bc000014", "at"=>2012-08-27 14:48:33 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6ca1497bfeb7bc000014"}, {"_id"=>"503b6ca1497bfeb7bc000027", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{"version"=>[1, 3]}, "user_id"=>"503b6ca1497bfeb7bc000014"}]}} flags=[] (1.1902ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4287ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1869ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000029", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5312ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000029", "version"=>1, "email"=>"test@test.com", "salt"=>"35ec", "confirmation_key"=>"778a205ee5c1eb7edd3f"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00002a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2968ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc00002a", "version"=>1, "email"=>"best@test.com", "salt"=>"45da", "confirmation_key"=>"b90717b41ee0ebf31f1a"}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00002b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc00002b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000029"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00002c", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000029"}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00002d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc00002e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc00002e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000029"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc00002f", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000029"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000030", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6ca1497bfeb7bc000030", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6ca1497bfeb7bc000029"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:48:33 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b6ca1497bfeb7bc000031", "at"=>2012-08-27 12:48:33 UTC, "changes"=>{}, "user_id"=>"503b6ca1497bfeb7bc000029"}]}] flags=[] (0.1569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000032", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000032", "version"=>1, "email"=>"test@test.com", "salt"=>"f2ba", "confirmation_key"=>"d86c47e3ec7f73b6809e"}] flags=[] (0.0749ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000033", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6ca1497bfeb7bc000033", "version"=>1, "email"=>"test@test.com", "salt"=>"ab67", "confirmation_key"=>"8442ee4e7ab1841ab099"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ca1497bfeb7bc000034", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7801ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.8261ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.7420ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc000001", "version"=>1, "email"=>"b@test.com", "salt"=>"db9f", "confirmation_key"=>"5d9a1053292cd4cebaf6"}] flags=[] (0.1152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc000002", "version"=>1, "email"=>"a@test.com", "salt"=>"9427", "confirmation_key"=>"725f27349a9d0f961ea8"}] flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5040ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000004", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc000001"}]}] flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000001"} flags=[] limit=0 skip=0 fields={"_id"=>1} (14.2808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields=nil (0.2060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5381ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000003"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc000001", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000006", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc000001"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000007", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc000001", "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6cea497bfebebc000001"}]}} flags=[] (0.3650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000001"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc000001.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc000003"} flags=[] limit=0 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2587ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3538ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6cea497bfebebc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7138ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6719ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc000002"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6cea497bfebebc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5882ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3729ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4120ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc000009", "version"=>1, "email"=>"a@test.com", "salt"=>"c868", "confirmation_key"=>"d55b64101ca736c14089"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3762ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00000a", "version"=>1, "email"=>"b@test.com", "salt"=>"9a59", "confirmation_key"=>"b5200386885868a2ac0e"}] flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6cea497bfebebc00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.3049ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3388ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00000c", "version"=>1, "email"=>"u@test.com", "salt"=>"33ec", "confirmation_key"=>"131cd9cca4d0a4f2a4b0"}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6cea497bfebebc00000d", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"user_id"=>"503b6cea497bfebebc00000c"}} (0.3803ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>[]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3803ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>[]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2141ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2148ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2258ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00000e", "version"=>1, "email"=>"b@test.com", "salt"=>"8ba3", "confirmation_key"=>"f7d2aa249308ccaacad3"}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4501ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc00000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000010", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00000e"}]}] flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000011", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000012", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00000e"}]}] flags=[] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000013", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000014", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00000e"}]}] flags=[] (0.1750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00000e"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00000e.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc00000f"} flags=[] limit=0 skip=0 fields=nil (0.3562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000011"} update={"$set"=>{"label_ids"=>["503b6cea497bfebebc00000f"], "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00000f"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000016", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00000e"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000017", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc000011"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6cea497bfebebc00000f"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00000f"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503b6cea497bfebebc00000e"}]}} flags=[] (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc000011"} flags=[] limit=-1 skip=0 fields=nil (0.5670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00000e"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.4082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00000e.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6cea497bfebebc00000f"]}} flags=[] limit=0 skip=0 fields=nil (0.5481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00000e"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00000e.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000013"} update={"$set"=>{"label_ids"=>["503b6cea497bfebebc000011"], "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc000011"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000019", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00000e"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00001a", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc000013"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6cea497bfebebc000011"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00000e"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc000011"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503b6cea497bfebebc00000e"}]}} flags=[] (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc000013"} flags=[] limit=-1 skip=0 fields=nil (0.6030ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2398ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1781ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3269ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00001b", "version"=>1, "email"=>"b@test.com", "salt"=>"cb2b", "confirmation_key"=>"432776b3fd73f126a677"}] flags=[] (0.1149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00001c", "version"=>1, "email"=>"a@test.com", "salt"=>"422c", "confirmation_key"=>"b66f8031a14614af3f59"}] flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc00001d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00001e", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}] flags=[] (0.1528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc00001f", "version"=>1, "label_ids"=>["503b6cea497bfebebc00001d"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000020", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000021", "version"=>1, "label_ids"=>["503b6cea497bfebebc00001f"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000022", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3347ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc00001d"} flags=[] limit=0 skip=0 fields=nil (0.5381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc00001f"} flags=[] limit=0 skip=0 fields=nil (0.3469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5498ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001d"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000024", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000025", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc00001d"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.3347ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001f"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6cea497bfebebc00001d"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000027", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000028", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3238ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc00001f"} flags=[] limit=0 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000021"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6cea497bfebebc00001f"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00002a", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00002b", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.2608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc000021"} flags=[] limit=0 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc00001f"} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc000021"} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001d"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00002d", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00002e", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc00001d"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00002f", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001f", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6351ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001f"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6cea497bfebebc00001d"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000031", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000032", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000033", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000021", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5710ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000021"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6cea497bfebebc00001f"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000035", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000036", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000037", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.3479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc00001f"} flags=[] limit=-1 skip=0 fields=nil (0.6428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001c"} flags=[] limit=0 skip=0 fields=nil (0.1993ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc000021"} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9961ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001d"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000039", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00003a", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc00001d"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00003b", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00003c", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.5288ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001f", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001f"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6cea497bfebebc00001d"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00003e", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00003f", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000040", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000041", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000021", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7088ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000021"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6cea497bfebebc00001f"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000043", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000044", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000045", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000046", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.8860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000047", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000048", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}] flags=[] (0.1533ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000047", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000047"} update={"$set"=>{"label_ids"=>["503b6cea497bfebebc00001d"], "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00001d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{"503b6cea497bfebebc00001d"=>"rw"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00004a", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00004b", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc000047"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6cea497bfebebc00001d"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00001d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{"503b6cea497bfebebc00001d"=>"rw"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.4098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc000047"} flags=[] limit=0 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6cea497bfebebc00001d"]}} flags=[] limit=0 skip=0 fields=nil (1.0591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001d", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2701ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001d"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00004d", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00004e", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc00001d"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc00004f", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000050", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[2, 3]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000051", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.6640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc00001f", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9890ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc00001f"} update={"$set"=>{"acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r", "503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b6cea497bfebebc00001d"], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000053", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000054", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000055", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6cea497bfebebc00001b"}, {"_id"=>"503b6cea497bfebebc000056", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 12:49:46 UTC}}], "version"=>[2, 3]}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc000057", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r", "503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.6080ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000021"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503b6cea497bfebebc000058", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"acl"=>[{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}, "503b6cea497bfebebc00001c"=>{"privileges"=>"r", "inherited"=>{"503b6cea497bfebebc00001f"=>"r", "503b6cea497bfebebc00001d"=>"r"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.1788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000059", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00005a", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}] flags=[] (0.1569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6cea497bfebebc000059"} update={"$set"=>{"label_ids"=>["503b6cea497bfebebc00001d"], "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00001d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{"503b6cea497bfebebc00001d"=>"rw"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:49:46 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6cea497bfebebc00005c", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00001b"}]}], "log_entries"=>[{"_id"=>"503b6cea497bfebebc00005d", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{"_id"=>[nil, "503b6cea497bfebebc000059"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6cea497bfebebc00001d"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6cea497bfebebc00001b"=>{"privileges"=>"rwsd", "inherited"=>{"503b6cea497bfebebc00001d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}, "503b6cea497bfebebc00001c"=>{"privileges"=>"rw", "inherited"=>{"503b6cea497bfebebc00001d"=>"rw"}, "invited"=>"503b6cea497bfebebc00001b", "at"=>2012-08-27 14:49:46 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503b6cea497bfebebc00001b"}]}} flags=[] (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "label_ids"=>"503b6cea497bfebebc000059"} flags=[] limit=0 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3192ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00001b"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00001b.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6cea497bfebebc00001d"]}} flags=[] limit=0 skip=0 fields=nil (1.8597ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2460ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1569ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3552ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00005e", "version"=>1, "email"=>"test@test.com", "salt"=>"98f2", "confirmation_key"=>"f3ddb1e97a69a59fcbd2"}] flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc00005f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc00005f", "version"=>1, "email"=>"best@test.com", "salt"=>"6e52", "confirmation_key"=>"ee8122827a68c7612d3c"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000060", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00005e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000061", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00005e"}]}] flags=[] (0.1991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000062", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000063", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00005e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000064", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00005e"}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6cea497bfebebc000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6cea497bfebebc000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6cea497bfebebc00005e"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:49:46 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b6cea497bfebebc000066", "at"=>2012-08-27 12:49:46 UTC, "changes"=>{}, "user_id"=>"503b6cea497bfebebc00005e"}]}] flags=[] (0.1531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00005e"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00005e.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00005f"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00005f.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"user_id"=>"503b6cea497bfebebc00005e"} flags=[] limit=0 skip=0 fields={"_id"=>1} (0.3631ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6cea497bfebebc00005e.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6cea497bfebebc000060"} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc000067", "version"=>1, "email"=>"test@test.com", "salt"=>"3d90", "confirmation_key"=>"b90e8a79bdf51ad3eb3a"}] flags=[] (0.0789ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6cea497bfebebc000068", "version"=>1, "email"=>"test@test.com", "salt"=>"3088", "confirmation_key"=>"c167913373f12fe2f646"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6cea497bfebebc000069", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5088ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7060ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.8411ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (3.2561ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c270", "confirmation_key"=>"df7d2ffa0bf46bd241e9"}] flags=[] (0.1171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5510ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c50d", "confirmation_key"=>"772647aa39eb6c0ca087"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000004", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000001"}]}] flags=[] (0.1884ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4778ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000003"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000001", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000006", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000001"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000007", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000001", "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000001"}]}} flags=[] (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000001.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000003"} flags=[] limit=0 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6962ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6d0d497bfebfbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6440ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503b6d0d497bfebfbc000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8068ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3281ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.3641ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1459ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2e7a", "confirmation_key"=>"a5fc8ab7d32b53c7b2a6"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3648ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b7ab", "confirmation_key"=>"c8265e2fe46e74b83f68"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6d0d497bfebfbc00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0987ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6d0d497bfebfbc000009"} update={"$addToSet"=>{"group_ids"=>"503b6d0d497bfebfbc00000b"}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6d0d497bfebfbc00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6d0d497bfebfbc000009"]}}} flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6d0d497bfebfbc00000a"} update={"$addToSet"=>{"group_ids"=>"503b6d0d497bfebfbc00000b"}} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6d0d497bfebfbc00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6d0d497bfebfbc00000a"]}}} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00000d", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000009"}]}] flags=[] (0.1397ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>["503b6d0d497bfebfbc00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc00000c"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000009", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00000f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000009"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000010", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000009", "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000009"}]}} flags=[] (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000009.privileges"=>/r\w*/}, {"acl.503b6d0d497bfebfbc00000b.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc00000c"} flags=[] limit=0 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc00000a.privileges"=>/r\w*/}, {"acl.503b6d0d497bfebfbc00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0293ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2937ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2251ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"4b1c", "confirmation_key"=>"ef7b1a894472d33c295a"}] flags=[] (0.1101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503b6d0d497bfebfbc000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4470ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503b6d0d497bfebfbc000011"} update={"$addToSet"=>{"group_ids"=>"503b6d0d497bfebfbc000012"}} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503b6d0d497bfebfbc000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503b6d0d497bfebfbc000011"]}}} flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503b6d0d497bfebfbc000012"]}}]}} (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6d0d497bfebfbc000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503b6d0d497bfebfbc000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3603ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2379ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.5147ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6402ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"473a", "confirmation_key"=>"3301a7015701f5303c6e"}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000015", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000013"}]}] flags=[] (0.1948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5512ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000017", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000013"}]}] flags=[] (0.1628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000019", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000013"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000013.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000014"} flags=[] limit=0 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4969ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000016"} update={"$set"=>{"label_ids"=>["503b6d0d497bfebfbc000014"], "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00001b", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000013"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00001c", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6d0d497bfebfbc000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503b6d0d497bfebfbc000013"}]}} flags=[] (0.3378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000016"} flags=[] limit=-1 skip=0 fields=nil (0.4749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6d0d497bfebfbc000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000018"} update={"$set"=>{"label_ids"=>["503b6d0d497bfebfbc000016"], "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00001e", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000013"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00001f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6d0d497bfebfbc000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000013"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503b6d0d497bfebfbc000013"}]}} flags=[] (0.3150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000018"} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1442ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0403ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"74bd", "confirmation_key"=>"78182fa7a12fe770a709"}] flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3e44", "confirmation_key"=>"5f01d76e41416ecf45e2"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2911ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000023", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000024", "version"=>1, "label_ids"=>["503b6d0d497bfebfbc000022"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000025", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2420ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000026", "version"=>1, "label_ids"=>["503b6d0d497bfebfbc000024"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000027", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000022"} flags=[] limit=0 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000024"} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000022"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000029", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00002a", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000024"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6d0d497bfebfbc000022"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00002c", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00002d", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000024"} flags=[] limit=0 skip=0 fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000026"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503b6d0d497bfebfbc000024"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00002f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000030", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc000026"} flags=[] limit=0 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000024"} flags=[] limit=-1 skip=0 fields=nil (0.4189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000026"} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000022"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000032", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000033", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000034", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.4389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5722ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000024"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6d0d497bfebfbc000022"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000036", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000037", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000038", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.3529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5839ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000026"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503b6d0d497bfebfbc000024"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00003a", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc00003b", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00003c", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000024"} flags=[] limit=-1 skip=0 fields=nil (0.5782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000026"} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1630ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000022"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00003e", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc00003f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000040", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000041", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.5879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7210ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000024"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6d0d497bfebfbc000022"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000043", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000044", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000045", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000046", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.4792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7291ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000026"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503b6d0d497bfebfbc000024"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000048", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000049", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc00004a", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00004b", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[2, 3]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.4480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3967ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00004d", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}] flags=[] (0.1612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4709ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc00004c"} update={"$set"=>{"label_ids"=>["503b6d0d497bfebfbc000022"], "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rw"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00004f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000050", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6d0d497bfebfbc000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rw"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.3660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc00004c"} flags=[] limit=0 skip=0 fields=nil (0.3922ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6d0d497bfebfbc000022"]}} flags=[] limit=0 skip=0 fields=nil (26.8290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2949ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000022"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000052", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000053", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000054", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000055", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[2, 3]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000056", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.7002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (29.7050ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000024"} update={"$set"=>{"acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r", "503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503b6d0d497bfebfbc000022"], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000058", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc000059", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc00005a", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[1, 2]}, "user_id"=>"503b6d0d497bfebfbc000020"}, {"_id"=>"503b6d0d497bfebfbc00005b", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 12:50:21 UTC}}], "version"=>[2, 3]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00005c", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r", "503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.8688ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00005d", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"acl"=>[{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"r", "inherited"=>{"503b6d0d497bfebfbc000024"=>"r", "503b6d0d497bfebfbc000022"=>"r"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "version"=>[3, 4]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00005f", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503b6d0d497bfebfbc00005e"} update={"$set"=>{"label_ids"=>["503b6d0d497bfebfbc000022"], "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rw"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 12:50:21 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000061", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000020"}]}], "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000062", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{"_id"=>[nil, "503b6d0d497bfebfbc00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503b6d0d497bfebfbc000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503b6d0d497bfebfbc000020"=>{"privileges"=>"rwsd", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}, "503b6d0d497bfebfbc000021"=>{"privileges"=>"rw", "inherited"=>{"503b6d0d497bfebfbc000022"=>"rw"}, "invited"=>"503b6d0d497bfebfbc000020", "at"=>2012-08-27 14:50:21 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503b6d0d497bfebfbc000020"}]}} flags=[] (0.3490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "label_ids"=>"503b6d0d497bfebfbc00005e"} flags=[] limit=0 skip=0 fields=nil (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503b6d0d497bfebfbc000022"]}} flags=[] limit=0 skip=0 fields=nil (1.5671ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1659ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8166", "confirmation_key"=>"dec44615ef11816259f4"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"371a", "confirmation_key"=>"5a7e22e8f57ef7dbc01f"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2811ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000066", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000063"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4420ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc000069", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000063"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503b6d0d497bfebfbc00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503b6d0d497bfebfbc000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 14:50:21 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503b6d0d497bfebfbc00006b", "at"=>2012-08-27 12:50:21 UTC, "changes"=>{}, "user_id"=>"503b6d0d497bfebfbc000063"}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503b6d0d497bfebfbc000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503b6d0d497bfebfbc000065"} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc00006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"9499", "confirmation_key"=>"88c2529e077c8b903e6e"}] flags=[] (0.0877ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4706ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503b6d0d497bfebfbc00006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1332", "confirmation_key"=>"7a7d709b41cd97a42272"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6d0d497bfebfbc00006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7501ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1657ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2470ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2141ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2611ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3381ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2592ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1538ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2620ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0622ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2220ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6e48497bfec6bc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7198ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.5770ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.6349ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.1040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5300ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2780ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0648ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1719ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3259ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2151ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1512ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2496ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1462ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3002ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2286ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2100ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0508ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4947ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ea4497bfec7bc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1322ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.8397ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.5541ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.1149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5422ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2809ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2151ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0508ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4506ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.3040ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3150ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2282ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2329ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2599ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0508ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6320ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6eba497bfec8bc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.7412ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1237ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.4520ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7050ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2699ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1819ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1440ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3452ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2511ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1442ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2527ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0503ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1431ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3288ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2449ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1459ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3488ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3679ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2260ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4461ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6599ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6ee7497bfec9bc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2050ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2460ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1578ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4158ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2377ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1972ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2351ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2198ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f01497bfecabc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1991ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2549ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3712ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2761ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0718ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1988ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0513ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4313ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3557ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1583ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2370ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2320ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1452ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4039ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6f85497bfecbbc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4623ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7758ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4809ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2561ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2480ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2909ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2789ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3638ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2229ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0513ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1469ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000007", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503b6fe5497bfeccbc000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6950ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.9031ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (1.2441ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"924b", "confirmation_key"=>"ed5102d8f2c9ac32ebda"}] flags=[] (0.1202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (13.5529ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"23ba", "confirmation_key"=>"4dce41d28d09f0f932f0"}] flags=[] (0.0892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3567ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000004", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000001"}]}] flags=[] (0.3469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (8.0159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9458ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000003"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000001", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000006", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000001"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000007", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000001", "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000001"}]}} flags=[] (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000001.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000003"} flags=[] limit=0 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503baae4497bfec0c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503baae4497bfec0c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3850ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2229ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.3002ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4318ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3b5d", "confirmation_key"=>"68eb5b1b89870e3fcd23"}] flags=[] (0.1020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c100000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0ba3", "confirmation_key"=>"2433953f561326025ef4"}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503baae4497bfec0c100000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1307ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503baae4497bfec0c1000009"} update={"$addToSet"=>{"group_ids"=>"503baae4497bfec0c100000b"}} flags=[] (0.0918ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503baae4497bfec0c100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503baae4497bfec0c1000009"]}}} flags=[] (0.1140ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503baae4497bfec0c100000a"} update={"$addToSet"=>{"group_ids"=>"503baae4497bfec0c100000b"}} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503baae4497bfec0c100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503baae4497bfec0c100000a"]}}} flags=[] (0.0648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c100000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c100000d", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000009"}]}] flags=[] (0.1800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>["503baae4497bfec0c100000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.5829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7453ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c100000c"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000009", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c100000f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000009"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000010", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c100000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000009", "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000009"}]}} flags=[] (0.4001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000009.privileges"=>/r\w*/}, {"acl.503baae4497bfec0c100000b.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c100000c"} flags=[] limit=0 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c100000a.privileges"=>/r\w*/}, {"acl.503baae4497bfec0c100000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7670ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.3409ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0403ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3228ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"cde7", "confirmation_key"=>"bce57dcbcf4c4c195cde"}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=groups documents=[{"_id"=>"503baae4497bfec0c1000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0668ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3440ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=users selector={"_id"=>"503baae4497bfec0c1000011"} update={"$addToSet"=>{"group_ids"=>"503baae4497bfec0c1000012"}} flags=[] (0.0832ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=groups selector={"_id"=>"503baae4497bfec0c1000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503baae4497bfec0c1000011"]}}} flags=[] (0.0622ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503baae4497bfec0c1000012"]}}]}} (0.3638ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503baae4497bfec0c1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503baae4497bfec0c1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3657ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2360ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.2322ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7620ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0e4e", "confirmation_key"=>"30ec5f35c85143b0b8b4"}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3469ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000015", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000013"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000017", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000013"}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000019", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000013"}]}] flags=[] (0.1862ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000013.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000014"} flags=[] limit=0 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4373ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000016"} update={"$set"=>{"label_ids"=>["503baae4497bfec0c1000014"], "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c100001b", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000013"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100001c", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503baae4497bfec0c1000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503baae4497bfec0c1000013"}]}} flags=[] (0.2849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000016"} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503baae4497bfec0c1000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3347ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000018"} update={"$set"=>{"label_ids"=>["503baae4497bfec0c1000016"], "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c100001e", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000013"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100001f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503baae4497bfec0c1000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503baae4497bfec0c1000013"}]}} flags=[] (0.3178ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000018"} flags=[] limit=-1 skip=0 fields=nil (0.8330ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3250ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1721ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3371ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6b84", "confirmation_key"=>"42a64a5fc1f43ad94c80"}] flags=[] (0.1020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"149c", "confirmation_key"=>"da7c009eb5cab90950eb"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000023", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}] flags=[] (0.1588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3922ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000024", "version"=>1, "label_ids"=>["503baae4497bfec0c1000022"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000025", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3552ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000026", "version"=>1, "label_ids"=>["503baae4497bfec0c1000024"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000027", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000022"} flags=[] limit=0 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000024"} flags=[] limit=0 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4768ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000022"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000029", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100002a", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4199ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000024"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503baae4497bfec0c1000022"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c100002c", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100002d", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000024"} flags=[] limit=0 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000026"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503baae4497bfec0c1000024"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c100002f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000030", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.2618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c1000026"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000024"} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000026"} flags=[] limit=-1 skip=0 fields=nil (0.3412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8292ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000022"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000032", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000033", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000034", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7551ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000024"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503baae4497bfec0c1000022"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000036", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000037", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000038", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5991ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000026"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503baae4497bfec0c1000024"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c100003a", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c100003b", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100003c", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000024"} flags=[] limit=-1 skip=0 fields=nil (0.5958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000026"} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9871ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000022"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c100003e", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c100003f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000040", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000041", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[2, 3]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.5558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7620ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000024"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503baae4497bfec0c1000022"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000043", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000044", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000045", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000046", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[2, 3]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.4771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7591ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000026"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503baae4497bfec0c1000024"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000048", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000049", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c100004a", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100004b", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[2, 3]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3457ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c100004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503baae4497bfec0c100004d", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4942ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c100004c"} update={"$set"=>{"label_ids"=>["503baae4497bfec0c1000022"], "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{"503baae4497bfec0c1000022"=>"rw"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503baae4497bfec0c100004f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000050", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c100004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503baae4497bfec0c1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{"503baae4497bfec0c1000022"=>"rw"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c100004c"} flags=[] limit=0 skip=0 fields=nil (0.2918ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503baae4497bfec0c1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2197ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000022"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000052", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000053", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000054", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000055", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[2, 3]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000056", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[3, 4]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.6411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (7.2801ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000024"} update={"$set"=>{"acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r", "503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503baae4497bfec0c1000022"], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000058", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c1000059", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c100005a", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[1, 2]}, "user_id"=>"503baae4497bfec0c1000020"}, {"_id"=>"503baae4497bfec0c100005b", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 17:14:12 UTC}}], "version"=>[2, 3]}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c100005c", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r", "503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[3, 4]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.6731ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c1000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503baae4497bfec0c100005d", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"acl"=>[{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}, "503baae4497bfec0c1000021"=>{"privileges"=>"r", "inherited"=>{"503baae4497bfec0c1000024"=>"r", "503baae4497bfec0c1000022"=>"r"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "version"=>[3, 4]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3450ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c100005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503baae4497bfec0c100005f", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503baae4497bfec0c100005e"} update={"$set"=>{"label_ids"=>["503baae4497bfec0c1000022"], "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{"503baae4497bfec0c1000022"=>"rw"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:14:12 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000061", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000020"}]}], "log_entries"=>[{"_id"=>"503baae4497bfec0c1000062", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{"_id"=>[nil, "503baae4497bfec0c100005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503baae4497bfec0c1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503baae4497bfec0c1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503baae4497bfec0c1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}, "503baae4497bfec0c1000021"=>{"privileges"=>"rw", "inherited"=>{"503baae4497bfec0c1000022"=>"rw"}, "invited"=>"503baae4497bfec0c1000020", "at"=>2012-08-27 19:14:12 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503baae4497bfec0c1000020"}]}} flags=[] (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "label_ids"=>"503baae4497bfec0c100005e"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503baae4497bfec0c1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4768ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2570ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"e466", "confirmation_key"=>"b2bac6435f1bab63159b"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae4497bfec0c1000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae4497bfec0c1000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"6137", "confirmation_key"=>"68e5123bb949fab1a774"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae4497bfec0c1000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3738ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae4497bfec0c1000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:12 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503baae4497bfec0c1000066", "at"=>2012-08-27 17:14:12 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000063"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae5497bfec0c1000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae5497bfec0c1000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (27.9710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae5497bfec0c1000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:13 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503baae5497bfec0c1000069", "at"=>2012-08-27 17:14:13 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000063"}]}] flags=[] (0.1891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503baae5497bfec0c100006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503baae5497bfec0c100006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503baae4497bfec0c1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:14:13 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503baae5497bfec0c100006b", "at"=>2012-08-27 17:14:13 UTC, "changes"=>{}, "user_id"=>"503baae4497bfec0c1000063"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503baae4497bfec0c1000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503baae4497bfec0c1000065"} flags=[] limit=-1 skip=0 fields=nil (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae5497bfec0c100006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae5497bfec0c100006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"4caa", "confirmation_key"=>"7ec4450b384c60956af7"}] flags=[] (0.0842ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae5497bfec0c100006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=users documents=[{"_id"=>"503baae5497bfec0c100006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"87de", "confirmation_key"=>"2d610aa5c71464eec946"}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=users selector={"$query"=>{"_id"=>"503baae5497bfec0c100006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5324ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2041ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (62.7542ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3510ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2477ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.3352ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4339ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3819ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2859ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2732ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0463ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bab8d497bfed2c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1769ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2739ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1812ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4172ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3850ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1850ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2742ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1752ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2489ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503babba497bfed3c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5059ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7050ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2441ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1879ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2859ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1862ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0503ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4082ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3741ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2158ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2780ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0501ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1960ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2849ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1857ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bac08497bfed4c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bac33497bfed6c1000004", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2909ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacef497bfed7c1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2949ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacef497bfed7c1000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dbbe", "confirmation_key"=>"dac522be08aafa3c2102"}] flags=[] (0.1190ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacef497bfed7c1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacef497bfed7c1000002", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8897", "confirmation_key"=>"0b2f8178396aa65f750d"}] flags=[] (0.1087ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacef497bfed7c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7088ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2000ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (6.6619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4432ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2e4d", "confirmation_key"=>"5a400da9ac41c21871dd"}] flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"059e", "confirmation_key"=>"0832382c25a512dd0991"}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4377ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000004", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000001"}]}] flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4771ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c1000003"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000001", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000006", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000001"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000007", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c1000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000001", "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bacf7497bfed8c1000001"}]}} flags=[] (0.3972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000001.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c1000003"} flags=[] limit=0 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bacf7497bfed8c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6130ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bacf7497bfed8c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7417ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3200ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.1552ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"0aee", "confirmation_key"=>"f786a941873924dbc131"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ce04", "confirmation_key"=>"2f67ef2dc3b72f48d82f"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3600ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:groups, :query=>{}} (0.2120ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=groups selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3412ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100000b", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"a5ed", "confirmation_key"=>"b0037c98af248fe338d2"}] flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2887ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1781ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3238ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100000c", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e0c2", "confirmation_key"=>"f8300af7720d3fba22d2"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2840ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100000d", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100000e", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100000c"}]}] flags=[] (0.2623ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3033ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100000f", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000010", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100000c"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3181ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000011", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000012", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100000c"}]}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100000c.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c100000d"} flags=[] limit=0 skip=0 fields=nil (0.4213ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100000f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100000f"} update={"$set"=>{"label_ids"=>["503bacf7497bfed8c100000d"], "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000014", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100000c"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000015", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c100000f"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bacf7497bfed8c100000d"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100000d"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503bacf7497bfed8c100000c"}]}} flags=[] (0.3080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100000f"} flags=[] limit=-1 skip=0 fields=nil (0.5629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100000c.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bacf7497bfed8c100000d"]}} flags=[] limit=0 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100000c.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c1000011"} update={"$set"=>{"label_ids"=>["503bacf7497bfed8c100000f"], "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100000f"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000017", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100000c"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000018", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c1000011"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bacf7497bfed8c100000f"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c100000c"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100000f"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503bacf7497bfed8c100000c"}]}} flags=[] (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c1000011"} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2770ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1867ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000019", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5531ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000019", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4dfd", "confirmation_key"=>"233396e1e3bf71621c1d"}] flags=[] (0.1409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100001a", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"540e", "confirmation_key"=>"440f52b34ec757fac7ec"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3459ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100001b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100001c", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100001d", "version"=>1, "label_ids"=>["503bacf7497bfed8c100001b"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100001e", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}] flags=[] (0.1302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100001f", "version"=>1, "label_ids"=>["503bacf7497bfed8c100001d"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000020", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c100001b"} flags=[] limit=0 skip=0 fields=nil (0.5720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c100001d"} flags=[] limit=0 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7079ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001b"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000022", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000023", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c100001b"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.7479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5231ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001d"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bacf7497bfed8c100001b"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000025", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000026", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c100001d"} flags=[] limit=0 skip=0 fields=nil (0.5813ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001f", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001f"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bacf7497bfed8c100001d"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000028", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000029", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c100001f"} flags=[] limit=0 skip=0 fields=nil (0.4840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100001d"} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100001f"} flags=[] limit=-1 skip=0 fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001b", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7141ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001b"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100002b", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100002c", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c100001b"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c100002d", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001d", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5252ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001d"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bacf7497bfed8c100001b"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100002f", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000030", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000031", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.3359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001f", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5612ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001f"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bacf7497bfed8c100001d"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000033", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000034", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000035", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100001d"} flags=[] limit=-1 skip=0 fields=nil (0.5782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2918ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100001f"} flags=[] limit=-1 skip=0 fields=nil (0.4969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001b", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8109ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001b"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000037", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000038", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c100001b"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000039", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c100003a", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.5112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001d", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6027ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001d"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bacf7497bfed8c100001b"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100003c", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100003d", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100003e", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c100003f", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.4387ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001f", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7181ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001f"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bacf7497bfed8c100001d"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000041", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000042", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000043", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000044", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000045", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000045", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000046", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}] flags=[] (0.1378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000045", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4632ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c1000045"} update={"$set"=>{"label_ids"=>["503bacf7497bfed8c100001b"], "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100001b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{"503bacf7497bfed8c100001b"=>"rw"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000048", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000049", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c1000045"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bacf7497bfed8c100001b"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100001b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{"503bacf7497bfed8c100001b"=>"rw"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.3359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c1000045"} flags=[] limit=0 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bacf7497bfed8c100001b"]}} flags=[] limit=0 skip=0 fields=nil (1.0891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001b", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2100ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001b"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100004b", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100004c", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c100001b"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100004d", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c100004e", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c100004f", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.6359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100001d", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9329ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001d"} update={"$set"=>{"acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r", "503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503bacf7497bfed8c100001b"], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000051", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000052", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000053", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bacf7497bfed8c1000019"}, {"_id"=>"503bacf7497bfed8c1000054", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 17:23:03 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000055", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r", "503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.5860ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c100001f"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503bacf7497bfed8c1000056", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"acl"=>[{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}, "503bacf7497bfed8c100001a"=>{"privileges"=>"r", "inherited"=>{"503bacf7497bfed8c100001d"=>"r", "503bacf7497bfed8c100001b"=>"r"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000057", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000058", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000057", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bacf7497bfed8c1000057"} update={"$set"=>{"label_ids"=>["503bacf7497bfed8c100001b"], "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100001b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{"503bacf7497bfed8c100001b"=>"rw"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:03 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100005a", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c1000019"}]}], "log_entries"=>[{"_id"=>"503bacf7497bfed8c100005b", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{"_id"=>[nil, "503bacf7497bfed8c1000057"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bacf7497bfed8c100001b"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bacf7497bfed8c1000019"=>{"privileges"=>"rwsd", "inherited"=>{"503bacf7497bfed8c100001b"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}, "503bacf7497bfed8c100001a"=>{"privileges"=>"rw", "inherited"=>{"503bacf7497bfed8c100001b"=>"rw"}, "invited"=>"503bacf7497bfed8c1000019", "at"=>2012-08-27 19:23:03 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503bacf7497bfed8c1000019"}]}} flags=[] (0.3638ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "label_ids"=>"503bacf7497bfed8c1000057"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c1000019.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bacf7497bfed8c100001b"]}} flags=[] limit=0 skip=0 fields=nil (1.4532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2928ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100005c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (17.6651ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100005c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"129f", "confirmation_key"=>"ca11670601b585a1e5fa"}] flags=[] (0.1552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c100005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c100005d", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"9928", "confirmation_key"=>"c8222378b6de2b8cab50"}] flags=[] (0.1471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4532ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c100005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100005c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bacf7497bfed8c100005f", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100005c"}]}] flags=[] (0.1922ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000061", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000061", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100005c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000062", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100005c"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bacf7497bfed8c1000063", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bacf7497bfed8c100005c"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:03 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503bacf7497bfed8c1000064", "at"=>2012-08-27 17:23:03 UTC, "changes"=>{}, "user_id"=>"503bacf7497bfed8c100005c"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100005c.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5038ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100005d.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bacf7497bfed8c100005c.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bacf7497bfed8c100005e"} flags=[] limit=-1 skip=0 fields=nil (0.3121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000065", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7d7c", "confirmation_key"=>"ce9538148d60c3ac5159"}] flags=[] (0.0820ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000066", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4492ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bacf7497bfed8c1000066", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"e7ed", "confirmation_key"=>"214f7ea307e1da6f8371"}] flags=[] (0.0932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bacf7497bfed8c1000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7629ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1640ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad21497bfed9c1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad21497bfed9c1000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"947c", "confirmation_key"=>"799b0429b7a06c0672e4"}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad21497bfed9c1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad21497bfed9c1000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e86f", "confirmation_key"=>"3faf5dec3e27a7a53c1e"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4461ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c1000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad21497bfed9c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000004", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad21497bfed9c1000001"}]}] flags=[] (0.1819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad21497bfed9c1000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad21497bfed9c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4396ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.6080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000003"} update={"$set"=>{"acl"=>{"503bad21497bfed9c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad21497bfed9c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad21497bfed9c1000001", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad21497bfed9c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000006", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad21497bfed9c1000001"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000007", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad21497bfed9c1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad21497bfed9c1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad21497bfed9c1000001", "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad21497bfed9c1000001"}]}} flags=[] (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad21497bfed9c1000001.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c1000003"} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad21497bfed9c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad21497bfed9c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad21497bfed9c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7169ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad21497bfed9c1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2871ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0460ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2611ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000009", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0e95", "confirmation_key"=>"9d1b421afc7361fcf830"}] flags=[] (0.0777ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100000a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c100000b", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000009"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2701ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c100000d", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000009"}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3037ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100000e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c100000f", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000009"}]}] flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000009.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c100000a"} flags=[] limit=0 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4299ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100000c"} update={"$set"=>{"label_ids"=>["503bad22497bfed9c100000a"], "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c100000a"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000011", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000009"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000012", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c100000c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad22497bfed9c100000a"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c100000a"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503bad22497bfed9c1000009"}]}} flags=[] (0.3898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100000c"} flags=[] limit=-1 skip=0 fields=nil (0.4861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000009.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad22497bfed9c100000a"]}} flags=[] limit=0 skip=0 fields=nil (0.7281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000009.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100000e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5732ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100000e"} update={"$set"=>{"label_ids"=>["503bad22497bfed9c100000c"], "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c100000c"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000014", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000009"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000015", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c100000e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad22497bfed9c100000c"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000009"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c100000c"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503bad22497bfed9c1000009"}]}} flags=[] (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100000e"} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3960ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4151ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000016", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1fda", "confirmation_key"=>"d09bef7dab027949185d"}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000017", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2770ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000017", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"4cc6", "confirmation_key"=>"8e5e7e5c0d5b1a262f81"}] flags=[] (0.0923ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c1000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000019", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}] flags=[] (0.2208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5541ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100001a", "version"=>1, "label_ids"=>["503bad22497bfed9c1000018"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c100001b", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}] flags=[] (0.2010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100001c", "version"=>1, "label_ids"=>["503bad22497bfed9c100001a"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c100001d", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}] flags=[] (0.1619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c1000018"} flags=[] limit=0 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c100001a"} flags=[] limit=0 skip=0 fields=nil (0.5102ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000018"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c100001f", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000020", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000018"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.5832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001a"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad22497bfed9c1000018"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000022", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000023", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.2751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c100001a"} flags=[] limit=0 skip=0 fields=nil (0.6218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4113ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001c"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad22497bfed9c100001a"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000025", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000026", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c100001c"} flags=[] limit=0 skip=0 fields=nil (0.3150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100001a"} flags=[] limit=-1 skip=0 fields=nil (0.3269ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100001c"} flags=[] limit=-1 skip=0 fields=nil (0.3271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000018", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7970ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000018"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000028", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000029", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000018"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c100002a", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.4580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001a", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1079ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001a"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad22497bfed9c1000018"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c100002c", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100002d", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c100002e", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.5190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001c", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7339ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001c"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad22497bfed9c100001a"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000030", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000031", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000032", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100001a"} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3181ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100001c"} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000018", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9942ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000018"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000034", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000035", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000018"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000036", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000037", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.5560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001a", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7129ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001a"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad22497bfed9c1000018"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000039", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100003a", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100003b", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c100003c", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.4461ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001c", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6859ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001c"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad22497bfed9c100001a"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad22497bfed9c100003e", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100003f", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000040", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000041", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c1000042", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000043", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000042", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000042"} update={"$set"=>{"label_ids"=>["503bad22497bfed9c1000018"], "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c1000018"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{"503bad22497bfed9c1000018"=>"rw"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000045", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000046", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000042"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad22497bfed9c1000018"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c1000018"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{"503bad22497bfed9c1000018"=>"rw"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.3703ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c1000042"} flags=[] limit=0 skip=0 fields=nil (0.3598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad22497bfed9c1000018"]}} flags=[] limit=0 skip=0 fields=nil (1.0540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000018", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2939ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000018"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000048", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000049", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000018"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100004a", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100004b", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c100004c", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.6940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100001a", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9100ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001a"} update={"$set"=>{"acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r", "503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503bad22497bfed9c1000018"], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad22497bfed9c100004e", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c100004f", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000050", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad22497bfed9c1000016"}, {"_id"=>"503bad22497bfed9c1000051", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 17:23:46 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000052", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r", "503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.7532ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c100001c"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503bad22497bfed9c1000053", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"acl"=>[{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}, "503bad22497bfed9c1000017"=>{"privileges"=>"r", "inherited"=>{"503bad22497bfed9c100001a"=>"r", "503bad22497bfed9c1000018"=>"r"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.2050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000054", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3431ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c1000054", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000055", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000054", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4673ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad22497bfed9c1000054"} update={"$set"=>{"label_ids"=>["503bad22497bfed9c1000018"], "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c1000018"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{"503bad22497bfed9c1000018"=>"rw"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:23:46 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000057", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000016"}]}], "log_entries"=>[{"_id"=>"503bad22497bfed9c1000058", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{"_id"=>[nil, "503bad22497bfed9c1000054"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad22497bfed9c1000018"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad22497bfed9c1000016"=>{"privileges"=>"rwsd", "inherited"=>{"503bad22497bfed9c1000018"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}, "503bad22497bfed9c1000017"=>{"privileges"=>"rw", "inherited"=>{"503bad22497bfed9c1000018"=>"rw"}, "invited"=>"503bad22497bfed9c1000016", "at"=>2012-08-27 19:23:46 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503bad22497bfed9c1000016"}]}} flags=[] (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "label_ids"=>"503bad22497bfed9c1000054"} flags=[] limit=0 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000016.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad22497bfed9c1000018"]}} flags=[] limit=0 skip=0 fields=nil (1.4129ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3812ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1581ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000059", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3972ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000059", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"e952", "confirmation_key"=>"1ab180515b4993ccf5c5"}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c100005a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c100005a", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"2e9c", "confirmation_key"=>"2c359586b1620f9f00d6"}] flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100005b", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4728ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100005b", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000059"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad22497bfed9c100005c", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000059"}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100005d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4952ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c100005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000059"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503bad22497bfed9c100005f", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000059"}]}] flags=[] (0.1690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad22497bfed9c1000060", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4563ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad22497bfed9c1000060", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad22497bfed9c1000059"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:23:46 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503bad22497bfed9c1000061", "at"=>2012-08-27 17:23:46 UTC, "changes"=>{}, "user_id"=>"503bad22497bfed9c1000059"}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000059.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c100005a.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad22497bfed9c1000059.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad22497bfed9c100005b"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000062", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4523ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000062", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"b6f1", "confirmation_key"=>"be1da53a7ba7398436dd"}] flags=[] (0.0808ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad22497bfed9c1000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3186", "confirmation_key"=>"5c74b00928d6d118aa6c"}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad22497bfed9c1000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7002ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2031ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"116d", "confirmation_key"=>"888e68d75b778275e1bc"}] flags=[] (0.1149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3247ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f286", "confirmation_key"=>"ebf04a59fd1b56d81b84"}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000004", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000001"}]}] flags=[] (0.2041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2613ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5751ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000003"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000001", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000006", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000001"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000007", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000001", "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000001"}]}} flags=[] (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000001.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000003"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad52497bfedac1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6590ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad52497bfedac1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8202ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2890ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1738ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1869ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c212", "confirmation_key"=>"d9035429e855963919e1"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac100000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1230", "confirmation_key"=>"e68460a726e2ebc4c191"}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bad52497bfedac100000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad52497bfedac1000009"} update={"$addToSet"=>{"group_ids"=>"503bad52497bfedac100000b"}} flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad52497bfedac100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad52497bfedac1000009"]}}} flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad52497bfedac100000a"} update={"$addToSet"=>{"group_ids"=>"503bad52497bfedac100000b"}} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad52497bfedac100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad52497bfedac100000a"]}}} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (34.5430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac100000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac100000d", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000009"}]}] flags=[] (0.1791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503bad52497bfedac100000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.5121ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6840ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac100000c"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000009", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac100000f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000009"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000010", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac100000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000009", "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000009"}]}} flags=[] (0.3963ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000009.privileges"=>/r\w*/}, {"acl.503bad52497bfedac100000b.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac100000c"} flags=[] limit=0 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac100000a.privileges"=>/r\w*/}, {"acl.503bad52497bfedac100000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6480ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2320ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1521ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0403ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3371ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"dd78", "confirmation_key"=>"7998352dd9201480e736"}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bad52497bfedac1000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4132ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad52497bfedac1000011"} update={"$addToSet"=>{"group_ids"=>"503bad52497bfedac1000012"}} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad52497bfedac1000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad52497bfedac1000011"]}}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503bad52497bfedac1000012"]}}]}} (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bad52497bfedac1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bad52497bfedac1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3152ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1950ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"bbbf", "confirmation_key"=>"7c55e0fafecbe8fbb8bd"}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000015", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000013"}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3171ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000017", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000013"}]}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac1000019", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000013"}]}] flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000013.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000014"} flags=[] limit=0 skip=0 fields=nil (0.4301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4327ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000016"} update={"$set"=>{"label_ids"=>["503bad52497bfedac1000014"], "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac100001b", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000013"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100001c", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad52497bfedac1000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503bad52497bfedac1000013"}]}} flags=[] (0.3419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000016"} flags=[] limit=-1 skip=0 fields=nil (0.5562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad52497bfedac1000014"]}} flags=[] limit=0 skip=0 fields=nil (0.7648ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000018"} update={"$set"=>{"label_ids"=>["503bad52497bfedac1000016"], "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac100001e", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000013"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100001f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad52497bfedac1000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503bad52497bfedac1000013"}]}} flags=[] (0.3221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000018"} flags=[] limit=-1 skip=0 fields=nil (0.5701ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2351ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3061ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"114a", "confirmation_key"=>"1ab26aca0a37ef25ca2b"}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3178ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1b58", "confirmation_key"=>"04ac2caab218d258e17c"}] flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2880ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000023", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000024", "version"=>1, "label_ids"=>["503bad52497bfedac1000022"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000025", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000026", "version"=>1, "label_ids"=>["503bad52497bfedac1000024"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac1000027", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000022"} flags=[] limit=0 skip=0 fields=nil (0.5529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000024"} flags=[] limit=0 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5431ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000022"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000029", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100002a", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000024"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad52497bfedac1000022"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac100002c", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100002d", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000024"} flags=[] limit=0 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000026"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad52497bfedac1000024"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac100002f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000030", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.2439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac1000026"} flags=[] limit=0 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000024"} flags=[] limit=-1 skip=0 fields=nil (0.3169ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000026"} flags=[] limit=-1 skip=0 fields=nil (0.3252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7191ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000022"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000032", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000033", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000034", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5827ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000024"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad52497bfedac1000022"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000036", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000037", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000038", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.3750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5772ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000026"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad52497bfedac1000024"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac100003a", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac100003b", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100003c", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000024"} flags=[] limit=-1 skip=0 fields=nil (0.5178ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000026"} flags=[] limit=-1 skip=0 fields=nil (0.5167ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8788ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000022"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac100003e", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac100003f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000040", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000041", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.5631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7157ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000024"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad52497bfedac1000022"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000043", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000044", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000045", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000046", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7250ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000026"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad52497bfedac1000024"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad52497bfedac1000048", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000049", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac100004a", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100004b", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac100004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad52497bfedac100004d", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}] flags=[] (0.1433ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3824ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac100004c"} update={"$set"=>{"label_ids"=>["503bad52497bfedac1000022"], "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad52497bfedac1000022"=>"rw"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad52497bfedac100004f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000050", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac100004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad52497bfedac1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad52497bfedac1000022"=>"rw"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.3908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac100004c"} flags=[] limit=0 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad52497bfedac1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3001ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000022"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000052", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000053", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000054", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000055", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000056", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.6590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0061ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000024"} update={"$set"=>{"acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r", "503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503bad52497bfedac1000022"], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000058", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac1000059", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac100005a", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad52497bfedac1000020"}, {"_id"=>"503bad52497bfedac100005b", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 17:24:34 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac100005c", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r", "503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.5901ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac1000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503bad52497bfedac100005d", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"acl"=>[{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}, "503bad52497bfedac1000021"=>{"privileges"=>"r", "inherited"=>{"503bad52497bfedac1000024"=>"r", "503bad52497bfedac1000022"=>"r"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.2041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3757ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac100005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad52497bfedac100005f", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad52497bfedac100005e"} update={"$set"=>{"label_ids"=>["503bad52497bfedac1000022"], "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad52497bfedac1000022"=>"rw"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:34 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad52497bfedac1000061", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000020"}]}], "log_entries"=>[{"_id"=>"503bad52497bfedac1000062", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{"_id"=>[nil, "503bad52497bfedac100005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad52497bfedac1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad52497bfedac1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad52497bfedac1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}, "503bad52497bfedac1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad52497bfedac1000022"=>"rw"}, "invited"=>"503bad52497bfedac1000020", "at"=>2012-08-27 19:24:34 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503bad52497bfedac1000020"}]}} flags=[] (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad52497bfedac100005e"} flags=[] limit=0 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad52497bfedac1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4138ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2387ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1533ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3259ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"4acc", "confirmation_key"=>"91d9db5d386a2535e4af"}] flags=[] (0.0672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac1000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2899ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac1000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"27f3", "confirmation_key"=>"99b4a0c1d38f8c9e261e"}] flags=[] (0.0682ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2372ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad52497bfedac1000066", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000063"}]}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4518ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac1000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3777ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac1000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503bad52497bfedac1000069", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000063"}]}] flags=[] (25.8498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad52497bfedac100006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad52497bfedac100006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad52497bfedac1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:34 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503bad52497bfedac100006b", "at"=>2012-08-27 17:24:34 UTC, "changes"=>{}, "user_id"=>"503bad52497bfedac1000063"}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4921ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad52497bfedac1000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad52497bfedac1000065"} flags=[] limit=-1 skip=0 fields=nil (0.4313ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac100006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac100006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"7c0e", "confirmation_key"=>"a65054786e9127f9afdb"}] flags=[] (0.0823ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac100006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4420ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad52497bfedac100006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"d42e", "confirmation_key"=>"94e6d2160bf8a7548a9e"}] flags=[] (0.0787ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad52497bfedac100006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2260ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2000ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3842", "confirmation_key"=>"537f90eccf94e1a20ca3"}] flags=[] (0.1042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"bc5d", "confirmation_key"=>"5759456e3b72dc239197"}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000004", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000001"}]}] flags=[] (0.1788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5341ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000003"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000001", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000006", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000001"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000007", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000001", "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000001"}]}} flags=[] (0.3698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000001.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000003"} flags=[] limit=0 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad65497bfedbc1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6599ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bad65497bfedbc1000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9131ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2770ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0608ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1547ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4067ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"142c", "confirmation_key"=>"618d59023c3255185ac4"}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc100000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc100000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d7e2", "confirmation_key"=>"82a74cf4adca1710c83e"}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bad65497bfedbc100000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad65497bfedbc1000009"} update={"$addToSet"=>{"group_ids"=>"503bad65497bfedbc100000b"}} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad65497bfedbc100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad65497bfedbc1000009"]}}} flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad65497bfedbc100000a"} update={"$addToSet"=>{"group_ids"=>"503bad65497bfedbc100000b"}} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad65497bfedbc100000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad65497bfedbc100000a"]}}} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc100000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc100000d", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000009"}]}] flags=[] (0.1471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503bad65497bfedbc100000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc100000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4942ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc100000c"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000009", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc100000f", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000009"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000010", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc100000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc100000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000009", "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000009"}]}} flags=[] (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000009.privileges"=>/r\w*/}, {"acl.503bad65497bfedbc100000b.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc100000c"} flags=[] limit=0 skip=0 fields=nil (0.5279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc100000a.privileges"=>/r\w*/}, {"acl.503bad65497bfedbc100000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3011ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2310ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3481ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"9da3", "confirmation_key"=>"8eb747d42ffa265b90f4"}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bad65497bfedbc1000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3738ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bad65497bfedbc1000011"} update={"$addToSet"=>{"group_ids"=>"503bad65497bfedbc1000012"}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bad65497bfedbc1000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bad65497bfedbc1000011"]}}} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503bad65497bfedbc1000012"]}}]}} (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bad65497bfedbc1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bad65497bfedbc1000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1473ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0463ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d5f2", "confirmation_key"=>"758eaee6897ae36a37be"}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000015", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000013"}]}] flags=[] (0.2718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000017", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000013"}]}] flags=[] (0.1981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5958ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000019", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000013"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000013.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000014"} flags=[] limit=0 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4299ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000016"} update={"$set"=>{"label_ids"=>["503bad65497bfedbc1000014"], "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc100001b", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000013"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100001c", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad65497bfedbc1000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503bad65497bfedbc1000013"}]}} flags=[] (0.3579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000016"} flags=[] limit=-1 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad65497bfedbc1000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000018"} update={"$set"=>{"label_ids"=>["503bad65497bfedbc1000016"], "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc100001e", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000013"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100001f", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad65497bfedbc1000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503bad65497bfedbc1000013"}]}} flags=[] (0.3190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000018"} flags=[] limit=-1 skip=0 fields=nil (0.5569ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2940ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2360ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1acb", "confirmation_key"=>"3f244299f894cace3114"}] flags=[] (0.1013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad65497bfedbc1000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad65497bfedbc1000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"93c1", "confirmation_key"=>"9caaefc8cf5709b61616"}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000023", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000024", "version"=>1, "label_ids"=>["503bad65497bfedbc1000022"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000025", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}] flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc1000026", "version"=>1, "label_ids"=>["503bad65497bfedbc1000024"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000027", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}] flags=[] (0.1590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000022"} flags=[] limit=0 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000024"} flags=[] limit=0 skip=0 fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6261ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000022"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000029", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100002a", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.3593ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4218ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000024"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad65497bfedbc1000022"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc100002c", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100002d", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000024"} flags=[] limit=0 skip=0 fields=nil (0.5162ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000026"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bad65497bfedbc1000024"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc100002f", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000030", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.2549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc1000026"} flags=[] limit=0 skip=0 fields=nil (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000024"} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000026"} flags=[] limit=-1 skip=0 fields=nil (0.4086ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6258ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000022"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000032", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000033", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000034", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000024"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad65497bfedbc1000022"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000036", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000037", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000038", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.3450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5860ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000026"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bad65497bfedbc1000024"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc100003a", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc100003b", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100003c", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.3462ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000024"} flags=[] limit=-1 skip=0 fields=nil (0.6080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad65497bfedbc1000026"} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8981ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000022"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc100003e", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc100003f", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000040", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000041", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.5231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000024"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad65497bfedbc1000022"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000043", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000044", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000045", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000046", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.5043ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6471ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000026"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bad65497bfedbc1000024"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000048", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000049", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc100004a", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100004b", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.4780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3669ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad65497bfedbc100004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad65497bfedbc100004d", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc100004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc100004c"} update={"$set"=>{"label_ids"=>["503bad65497bfedbc1000022"], "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad65497bfedbc1000022"=>"rw"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bad65497bfedbc100004f", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000050", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc100004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad65497bfedbc1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad65497bfedbc1000022"=>"rw"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad65497bfedbc100004c"} flags=[] limit=0 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad65497bfedbc1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.0891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2162ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000022"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000052", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000053", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"_id"=>[nil, "503bad65497bfedbc1000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000054", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000055", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc1000056", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:53 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.6421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad65497bfedbc1000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0052ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000024"} update={"$set"=>{"acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r", "503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503bad65497bfedbc1000022"], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bad65497bfedbc1000058", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc1000059", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc100005a", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bad65497bfedbc1000020"}, {"_id"=>"503bad65497bfedbc100005b", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 17:24:53 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad65497bfedbc100005c", "at"=>2012-08-27 17:24:53 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r", "503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.6001ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad65497bfedbc1000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503bad66497bfedbc100005d", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{"acl"=>[{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}}, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:53 UTC}, "503bad65497bfedbc1000021"=>{"privileges"=>"r", "inherited"=>{"503bad65497bfedbc1000024"=>"r", "503bad65497bfedbc1000022"=>"r"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.1881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad66497bfedbc100005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad66497bfedbc100005f", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc100005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bad66497bfedbc100005e"} update={"$set"=>{"label_ids"=>["503bad65497bfedbc1000022"], "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad65497bfedbc1000022"=>"rw"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:24:54 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bad66497bfedbc1000061", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{}, "user_id"=>"503bad65497bfedbc1000020"}]}], "log_entries"=>[{"_id"=>"503bad66497bfedbc1000062", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{"_id"=>[nil, "503bad66497bfedbc100005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bad65497bfedbc1000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bad65497bfedbc1000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bad65497bfedbc1000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}, "503bad65497bfedbc1000021"=>{"privileges"=>"rw", "inherited"=>{"503bad65497bfedbc1000022"=>"rw"}, "invited"=>"503bad65497bfedbc1000020", "at"=>2012-08-27 19:24:53 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503bad65497bfedbc1000020"}]}} flags=[] (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "label_ids"=>"503bad66497bfedbc100005e"} flags=[] limit=0 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad65497bfedbc1000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bad65497bfedbc1000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4951ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2789ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1512ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad66497bfedbc1000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad66497bfedbc1000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"03c1", "confirmation_key"=>"c569f36dfb9ec13d959b"}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad66497bfedbc1000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad66497bfedbc1000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"25a6", "confirmation_key"=>"81bc04bd4eb37f40f1a2"}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc1000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3228ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad66497bfedbc1000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad66497bfedbc1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bad66497bfedbc1000066", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{}, "user_id"=>"503bad66497bfedbc1000063"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc1000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc1000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad66497bfedbc1000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad66497bfedbc1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503bad66497bfedbc1000069", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{}, "user_id"=>"503bad66497bfedbc1000063"}]}] flags=[] (0.1493ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bad66497bfedbc100006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bad66497bfedbc100006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bad66497bfedbc1000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:24:54 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503bad66497bfedbc100006b", "at"=>2012-08-27 17:24:54 UTC, "changes"=>{}, "user_id"=>"503bad66497bfedbc1000063"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad66497bfedbc1000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bad66497bfedbc1000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bad66497bfedbc1000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bad66497bfedbc1000065"} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad66497bfedbc100006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad66497bfedbc100006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"962d", "confirmation_key"=>"b788fd0cf60f9c0a4eda"}] flags=[] (0.1459ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad66497bfedbc100006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bad66497bfedbc100006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"a69b", "confirmation_key"=>"8d8c028b6fb270819282"}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bad66497bfedbc100006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2098ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4928ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9fb4", "confirmation_key"=>"a7484d01e5c6eafe25c7", "settings"=>{}}] flags=[] (0.1018ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9ee7", "confirmation_key"=>"5b690b0f8538f748884b", "settings"=>{}}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000004", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000001"}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5372ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000003"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000001", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000006", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000001"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000007", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000001", "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000001"}]}} flags=[] (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000001.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000003"} flags=[] limit=0 skip=0 fields=nil (0.4258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bb34f497bfe29c2000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6158ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503bb34f497bfe29c2000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7861ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3018ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1571ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"add8", "confirmation_key"=>"52c5d714492928e738e7", "settings"=>{}}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c200000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c200000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0638", "confirmation_key"=>"8969f9653a1528db2d34", "settings"=>{}}] flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bb34f497bfe29c200000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bb34f497bfe29c2000009"} update={"$addToSet"=>{"group_ids"=>"503bb34f497bfe29c200000b"}} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bb34f497bfe29c200000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bb34f497bfe29c2000009"]}}} flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bb34f497bfe29c200000a"} update={"$addToSet"=>{"group_ids"=>"503bb34f497bfe29c200000b"}} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bb34f497bfe29c200000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bb34f497bfe29c200000a"]}}} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c200000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200000d", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000009"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503bb34f497bfe29c200000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.5341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4783ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c200000c"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c200000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000009", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200000f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000009"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000010", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c200000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c200000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000009", "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000009"}]}} flags=[] (0.4220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000009.privileges"=>/r\w*/}, {"acl.503bb34f497bfe29c200000b.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c200000c"} flags=[] limit=0 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c200000a.privileges"=>/r\w*/}, {"acl.503bb34f497bfe29c200000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6821ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2508ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2222ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"6a21", "confirmation_key"=>"9a26463e866292b82472", "settings"=>{}}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503bb34f497bfe29c2000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1531ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4752ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503bb34f497bfe29c2000011"} update={"$addToSet"=>{"group_ids"=>"503bb34f497bfe29c2000012"}} flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503bb34f497bfe29c2000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503bb34f497bfe29c2000011"]}}} flags=[] (0.1333ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503bb34f497bfe29c2000012"]}}]}} (0.4430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bb34f497bfe29c2000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503bb34f497bfe29c2000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3130ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1483ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3138ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"42ce", "confirmation_key"=>"900157ebdf727cb8b62e", "settings"=>{}}] flags=[] (0.1009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3326ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000015", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000013"}]}] flags=[] (0.1972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000017", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000013"}]}] flags=[] (0.1459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000019", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000013"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000013.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000014"} flags=[] limit=0 skip=0 fields=nil (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000016"} update={"$set"=>{"label_ids"=>["503bb34f497bfe29c2000014"], "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200001b", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000013"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200001c", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bb34f497bfe29c2000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503bb34f497bfe29c2000013"}]}} flags=[] (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000016"} flags=[] limit=-1 skip=0 fields=nil (0.5734ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bb34f497bfe29c2000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6032ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000018"} update={"$set"=>{"label_ids"=>["503bb34f497bfe29c2000016"], "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200001e", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000013"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200001f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bb34f497bfe29c2000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000013"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503bb34f497bfe29c2000013"}]}} flags=[] (0.3402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000018"} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2251ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3059ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"bc88", "confirmation_key"=>"7f68d4d3dc6971241fb0", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3cd0", "confirmation_key"=>"12574c3b934613a02568", "settings"=>{}}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000023", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000024", "version"=>1, "label_ids"=>["503bb34f497bfe29c2000022"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000025", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}] flags=[] (0.1562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3171ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000026", "version"=>1, "label_ids"=>["503bb34f497bfe29c2000024"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000027", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}] flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000022"} flags=[] limit=0 skip=0 fields=nil (0.7911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000024"} flags=[] limit=0 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5000ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000022"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000029", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200002a", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5200ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000024"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bb34f497bfe29c2000022"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200002c", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200002d", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000024"} flags=[] limit=0 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000026"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503bb34f497bfe29c2000024"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200002f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000030", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c2000026"} flags=[] limit=0 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000024"} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000026"} flags=[] limit=-1 skip=0 fields=nil (0.3450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000022"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000032", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000033", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000034", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.4258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000024"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bb34f497bfe29c2000022"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000036", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000037", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000038", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000026"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503bb34f497bfe29c2000024"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200003a", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c200003b", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200003c", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000024"} flags=[] limit=-1 skip=0 fields=nil (0.5786ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000026"} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8700ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000022"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200003e", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c200003f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000040", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000041", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.5472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9558ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000024"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bb34f497bfe29c2000022"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000043", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000044", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000045", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000046", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.4532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6502ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000026"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503bb34f497bfe29c2000024"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000048", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000049", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c200004a", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200004b", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[2, 3]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c200004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200004d", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c200004c"} update={"$set"=>{"label_ids"=>["503bb34f497bfe29c2000022"], "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{"503bb34f497bfe29c2000022"=>"rw"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200004f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000050", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c200004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bb34f497bfe29c2000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{"503bb34f497bfe29c2000022"=>"rw"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c200004c"} flags=[] limit=0 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6437ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bb34f497bfe29c2000022"]}} flags=[] limit=0 skip=0 fields=nil (1.3049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3702ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000022"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000052", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000053", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c2000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000054", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000055", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000056", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.7188ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9272ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000024"} update={"$set"=>{"acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r", "503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503bb34f497bfe29c2000022"], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000058", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c2000059", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c200005a", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[1, 2]}, "user_id"=>"503bb34f497bfe29c2000020"}, {"_id"=>"503bb34f497bfe29c200005b", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 17:50:07 UTC}}], "version"=>[2, 3]}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c200005c", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r", "503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.5860ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c2000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503bb34f497bfe29c200005d", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"acl"=>[{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}, "503bb34f497bfe29c2000021"=>{"privileges"=>"r", "inherited"=>{"503bb34f497bfe29c2000024"=>"r", "503bb34f497bfe29c2000022"=>"r"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "version"=>[3, 4]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.1819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c200005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200005f", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503bb34f497bfe29c200005e"} update={"$set"=>{"label_ids"=>["503bb34f497bfe29c2000022"], "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{"503bb34f497bfe29c2000022"=>"rw"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 17:50:07 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000061", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000020"}]}], "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000062", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{"_id"=>[nil, "503bb34f497bfe29c200005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503bb34f497bfe29c2000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503bb34f497bfe29c2000020"=>{"privileges"=>"rwsd", "inherited"=>{"503bb34f497bfe29c2000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}, "503bb34f497bfe29c2000021"=>{"privileges"=>"rw", "inherited"=>{"503bb34f497bfe29c2000022"=>"rw"}, "invited"=>"503bb34f497bfe29c2000020", "at"=>2012-08-27 19:50:07 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503bb34f497bfe29c2000020"}]}} flags=[] (0.6039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "label_ids"=>"503bb34f497bfe29c200005e"} flags=[] limit=0 skip=0 fields=nil (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503bb34f497bfe29c2000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4353ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3011ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1478ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"9d80", "confirmation_key"=>"e5681c3bc5532608e968", "settings"=>{}}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3881ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c2000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"c5ef", "confirmation_key"=>"4e67966e31a66e953f02", "settings"=>{}}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3648ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000066", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000063"}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c2000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c2000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503bb34f497bfe29c2000069", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000063"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503bb34f497bfe29c200006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503bb34f497bfe29c200006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503bb34f497bfe29c2000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-27 19:50:07 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503bb34f497bfe29c200006b", "at"=>2012-08-27 17:50:07 UTC, "changes"=>{}, "user_id"=>"503bb34f497bfe29c2000063"}]}] flags=[] (0.1543ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503bb34f497bfe29c2000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503bb34f497bfe29c2000065"} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c200006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c200006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3c43", "confirmation_key"=>"4e83d452115155e951c3", "settings"=>{}}] flags=[] (0.0870ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c200006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4609ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503bb34f497bfe29c200006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"745a", "confirmation_key"=>"107d7784dbb04f44f678", "settings"=>{}}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503bb34f497bfe29c200006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8860ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2522ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0691ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1857ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87d8497bfe7ec4000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"5d5a", "confirmation_key"=>"3905f7aaf8c5c05f9803", "settings"=>{}}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87d8497bfe7ec4000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"634b", "confirmation_key"=>"f51780986092b5e5632b", "settings"=>{}}] flags=[] (0.0770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87d8497bfe7ec4000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87d8497bfe7ec4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:56:56 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c87d8497bfe7ec4000004", "at"=>2012-08-28 08:56:56 UTC, "changes"=>{}, "user_id"=>"503c87d8497bfe7ec4000001"}]}] flags=[] (0.1898ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87d8497bfe7ec4000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87d8497bfe7ec4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:56:56 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503c87d8497bfe7ec4000007", "at"=>2012-08-28 08:56:56 UTC, "changes"=>{}, "user_id"=>"503c87d8497bfe7ec4000001"}]}] flags=[] (0.1900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87d8497bfe7ec4000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87d8497bfe7ec4000008", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87d8497bfe7ec4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:56:56 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503c87d8497bfe7ec4000009", "at"=>2012-08-28 08:56:56 UTC, "changes"=>{}, "user_id"=>"503c87d8497bfe7ec4000001"}]}] flags=[] (0.1590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87d8497bfe7ec4000001.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87d8497bfe7ec4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c87d8497bfe7ec4000001.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c87d8497bfe7ec4000003"} flags=[] limit=-1 skip=0 fields=nil (0.2942ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8178ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1891ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87ed497bfe81c4000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"5a6a", "confirmation_key"=>"d7dda409c3a1237607aa", "settings"=>{}}] flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87ed497bfe81c4000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"a7b8", "confirmation_key"=>"4ffd677320e216ef6cf1", "settings"=>{}}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4849ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87ed497bfe81c4000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87ed497bfe81c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:17 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c87ed497bfe81c4000004", "at"=>2012-08-28 08:57:17 UTC, "changes"=>{}, "user_id"=>"503c87ed497bfe81c4000001"}]}] flags=[] (0.1948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87ed497bfe81c4000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87ed497bfe81c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:17 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503c87ed497bfe81c4000007", "at"=>2012-08-28 08:57:17 UTC, "changes"=>{}, "user_id"=>"503c87ed497bfe81c4000001"}]}] flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87ed497bfe81c4000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5288ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87ed497bfe81c4000008", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87ed497bfe81c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:17 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503c87ed497bfe81c4000009", "at"=>2012-08-28 08:57:17 UTC, "changes"=>{}, "user_id"=>"503c87ed497bfe81c4000001"}]}] flags=[] (0.2730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87ed497bfe81c4000001.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87ed497bfe81c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c87ed497bfe81c4000001.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.2050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c87ed497bfe81c4000003"} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1931ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1647ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87fc497bfe82c4000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8bfb", "confirmation_key"=>"a4466d835a705f0e9249", "settings"=>{}}] flags=[] (0.1040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c87fc497bfe82c4000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"33c2", "confirmation_key"=>"8f0e5ab66f895d8e1eab", "settings"=>{}}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4718ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87fc497bfe82c4000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87fc497bfe82c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:32 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c87fc497bfe82c4000004", "at"=>2012-08-28 08:57:32 UTC, "changes"=>{}, "user_id"=>"503c87fc497bfe82c4000001"}]}] flags=[] (0.1800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4938ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87fc497bfe82c4000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87fc497bfe82c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:32 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503c87fc497bfe82c4000007", "at"=>2012-08-28 08:57:32 UTC, "changes"=>{}, "user_id"=>"503c87fc497bfe82c4000001"}]}] flags=[] (0.1516ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c87fc497bfe82c4000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4468ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c87fc497bfe82c4000008", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c87fc497bfe82c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:32 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503c87fc497bfe82c4000009", "at"=>2012-08-28 08:57:32 UTC, "changes"=>{}, "user_id"=>"503c87fc497bfe82c4000001"}]}] flags=[] (0.1502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87fc497bfe82c4000001.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8876ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c87fc497bfe82c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c87fc497bfe82c4000001.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c87fc497bfe82c4000003"} flags=[] limit=-1 skip=0 fields=nil (0.3240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6802ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2079ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c880d497bfe83c4000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c880d497bfe83c4000001", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"447c", "confirmation_key"=>"622a99fd2a92639d1b73", "settings"=>{}}] flags=[] (0.1101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c880d497bfe83c4000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c880d497bfe83c4000002", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"f4b7", "confirmation_key"=>"714e48f325982b59dc6f", "settings"=>{}}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c880d497bfe83c4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3572ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c880d497bfe83c4000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c880d497bfe83c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:49 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c880d497bfe83c4000004", "at"=>2012-08-28 08:57:49 UTC, "changes"=>{}, "user_id"=>"503c880d497bfe83c4000001"}]}] flags=[] (0.2058ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c880d497bfe83c4000005", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c880d497bfe83c4000006", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c880d497bfe83c4000006", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c880d497bfe83c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:49 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503c880d497bfe83c4000007", "at"=>2012-08-28 08:57:49 UTC, "changes"=>{}, "user_id"=>"503c880d497bfe83c4000001"}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c880d497bfe83c4000008", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c880d497bfe83c4000008", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c880d497bfe83c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 10:57:49 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503c880d497bfe83c4000009", "at"=>2012-08-28 08:57:49 UTC, "changes"=>{}, "user_id"=>"503c880d497bfe83c4000001"}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c880d497bfe83c4000001.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c880d497bfe83c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c880d497bfe83c4000001.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.2172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c880d497bfe83c4000003"} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6881ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2062ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1671ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"199a", "confirmation_key"=>"dc52b5417476ff27a5c5", "settings"=>{}}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4342ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"54b3", "confirmation_key"=>"a35a7d84f3f4d2ddbd78", "settings"=>{}}] flags=[] (0.0801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000004", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000001"}]}] flags=[] (0.1800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2272ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4740ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000003"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000001", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000006", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000001"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000007", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000001", "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000001"}]}} flags=[] (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000001.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000003"} flags=[] limit=0 skip=0 fields=nil (0.4191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7343ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503c8924497bfe85c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7071ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6521ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503c8924497bfe85c4000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3970ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0978ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2308ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2179ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4542ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"d1fe", "confirmation_key"=>"87947740d11b8c3838a8", "settings"=>{}}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c400000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c400000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5dce", "confirmation_key"=>"c52b4cef50b58135c2a6", "settings"=>{}}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503c8924497bfe85c400000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1061ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503c8924497bfe85c4000009"} update={"$addToSet"=>{"group_ids"=>"503c8924497bfe85c400000b"}} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503c8924497bfe85c400000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503c8924497bfe85c4000009"]}}} flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503c8924497bfe85c400000a"} update={"$addToSet"=>{"group_ids"=>"503c8924497bfe85c400000b"}} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503c8924497bfe85c400000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503c8924497bfe85c400000a"]}}} flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c400000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c400000d", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000009"}]}] flags=[] (0.1488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503c8924497bfe85c400000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c400000c"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c400000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000009", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c400000f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000009"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000010", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c400000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c400000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000009", "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000009"}]}} flags=[] (0.6320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000009.privileges"=>/r\w*/}, {"acl.503c8924497bfe85c400000b.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c400000c"} flags=[] limit=0 skip=0 fields=nil (0.5612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c400000a.privileges"=>/r\w*/}, {"acl.503c8924497bfe85c400000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1039ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2742ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1631ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"63b2", "confirmation_key"=>"a12ebef2402de0d2f039", "settings"=>{}}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503c8924497bfe85c4000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3479ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503c8924497bfe85c4000011"} update={"$addToSet"=>{"group_ids"=>"503c8924497bfe85c4000012"}} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503c8924497bfe85c4000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503c8924497bfe85c4000011"]}}} flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503c8924497bfe85c4000012"]}}]}} (0.3951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503c8924497bfe85c4000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503c8924497bfe85c4000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5379ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3030ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2010ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4671ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"408c", "confirmation_key"=>"8acbfe7e58bb41fa4f1a", "settings"=>{}}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3350ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000015", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000013"}]}] flags=[] (0.1342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2871ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000017", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000013"}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2408ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000019", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000013"}]}] flags=[] (0.1431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000013.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000014"} flags=[] limit=0 skip=0 fields=nil (0.3912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000016"} update={"$set"=>{"label_ids"=>["503c8924497bfe85c4000014"], "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c400001b", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000013"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400001c", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503c8924497bfe85c4000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc2"]}, "user_id"=>"503c8924497bfe85c4000013"}]}} flags=[] (0.3181ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000016"} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503c8924497bfe85c4000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000018"} update={"$set"=>{"label_ids"=>["503c8924497bfe85c4000016"], "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c400001e", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000013"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400001f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503c8924497bfe85c4000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000013"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc3"]}, "user_id"=>"503c8924497bfe85c4000013"}]}} flags=[] (0.3600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000018"} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3049ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1998ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"1f57", "confirmation_key"=>"aaba88b5414c457b2aab", "settings"=>{}}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cf83", "confirmation_key"=>"1a1fb48d01838969e414", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000023", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3312ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000024", "version"=>1, "label_ids"=>["503c8924497bfe85c4000022"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000025", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}] flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000026", "version"=>1, "label_ids"=>["503c8924497bfe85c4000024"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000027", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}] flags=[] (0.1416ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000022"} flags=[] limit=0 skip=0 fields=nil (0.5000ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000024"} flags=[] limit=0 skip=0 fields=nil (0.8724ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000022"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000029", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400002a", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000024"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503c8924497bfe85c4000022"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c400002c", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400002d", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000024"} flags=[] limit=0 skip=0 fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000026"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503c8924497bfe85c4000024"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c400002f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000030", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c4000026"} flags=[] limit=0 skip=0 fields=nil (0.4089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000024"} flags=[] limit=-1 skip=0 fields=nil (0.3808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000026"} flags=[] limit=-1 skip=0 fields=nil (0.2933ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5879ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000022"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000032", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000033", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000034", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5147ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000024"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503c8924497bfe85c4000022"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000036", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000037", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000038", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000026"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503c8924497bfe85c4000024"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c400003a", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c400003b", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400003c", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.3459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000024"} flags=[] limit=-1 skip=0 fields=nil (0.5271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000026"} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8631ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000022"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c400003e", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c400003f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000040", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000041", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[2, 3]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.5519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6540ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000024"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503c8924497bfe85c4000022"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000043", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000044", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000045", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000046", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[2, 3]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.4609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7119ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000026"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503c8924497bfe85c4000024"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc3", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000048", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000049", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c400004a", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400004b", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[2, 3]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c400004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503c8924497bfe85c400004d", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4742ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c400004c"} update={"$set"=>{"label_ids"=>["503c8924497bfe85c4000022"], "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{"503c8924497bfe85c4000022"=>"rw"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc4", "log_entries"=>[{"_id"=>"503c8924497bfe85c400004f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000050", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c400004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503c8924497bfe85c4000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{"503c8924497bfe85c4000022"=>"rw"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc4"]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.3512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c400004c"} flags=[] limit=0 skip=0 fields=nil (0.3242ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503c8924497bfe85c4000022"]}} flags=[] limit=0 skip=0 fields=nil (1.2589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1909ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000022"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000052", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000053", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c4000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}], "name"=>[nil, "doc1"]}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000054", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000055", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[2, 3]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000056", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[3, 4]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.9933ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9639ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000024"} update={"$set"=>{"acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r", "503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503c8924497bfe85c4000022"], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000058", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c4000059", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c400005a", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[1, 2]}, "user_id"=>"503c8924497bfe85c4000020"}, {"_id"=>"503c8924497bfe85c400005b", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 09:02:28 UTC}}], "version"=>[2, 3]}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c400005c", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r", "503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[3, 4]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.6340ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c4000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503c8924497bfe85c400005d", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"acl"=>[{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}, "503c8924497bfe85c4000021"=>{"privileges"=>"r", "inherited"=>{"503c8924497bfe85c4000024"=>"r", "503c8924497bfe85c4000022"=>"r"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "version"=>[3, 4]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.1869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c400005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503c8924497bfe85c400005f", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}] flags=[] (0.1628ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503c8924497bfe85c400005e"} update={"$set"=>{"label_ids"=>["503c8924497bfe85c4000022"], "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{"503c8924497bfe85c4000022"=>"rw"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 09:02:28 UTC}}, "name"=>"doc5", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000061", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000020"}]}], "log_entries"=>[{"_id"=>"503c8924497bfe85c4000062", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{"_id"=>[nil, "503c8924497bfe85c400005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503c8924497bfe85c4000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503c8924497bfe85c4000020"=>{"privileges"=>"rwsd", "inherited"=>{"503c8924497bfe85c4000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}, "503c8924497bfe85c4000021"=>{"privileges"=>"rw", "inherited"=>{"503c8924497bfe85c4000022"=>"rw"}, "invited"=>"503c8924497bfe85c4000020", "at"=>2012-08-28 11:02:28 +0200}}], "name"=>[nil, "doc5"]}, "user_id"=>"503c8924497bfe85c4000020"}]}} flags=[] (0.3498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "label_ids"=>"503c8924497bfe85c400005e"} flags=[] limit=0 skip=0 fields=nil (0.3767ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6154ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503c8924497bfe85c4000022"]}} flags=[] limit=0 skip=0 fields=nil (1.5123ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2780ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2089ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1609", "confirmation_key"=>"8d752e9ce160ddf5d502", "settings"=>{}}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c4000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c4000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"cfd0", "confirmation_key"=>"ee8c51785a56a7aeff2d", "settings"=>{}}] flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3734ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"doc1", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000066", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000063"}]}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c4000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5229ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c4000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"pd2", "log_entries"=>[{"_id"=>"503c8924497bfe85c4000069", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000063"}]}] flags=[] (0.1619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503c8924497bfe85c400006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3841ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503c8924497bfe85c400006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503c8924497bfe85c4000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 11:02:28 +0200}}, "name"=>"pd3", "log_entries"=>[{"_id"=>"503c8924497bfe85c400006b", "at"=>2012-08-28 09:02:28 UTC, "changes"=>{}, "user_id"=>"503c8924497bfe85c4000063"}]}] flags=[] (0.2098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503c8924497bfe85c4000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503c8924497bfe85c4000065"} flags=[] limit=-1 skip=0 fields=nil (0.3641ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c400006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c400006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"5ab6", "confirmation_key"=>"c6d0e7d996d9e15c787c", "settings"=>{}}] flags=[] (0.1590ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c400006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503c8924497bfe85c400006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8c14", "confirmation_key"=>"7a385ca2a75d145c7f3f", "settings"=>{}}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503c8924497bfe85c400006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5357ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.2448ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.8371ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1259ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.5820ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0787ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4d08", "confirmation_key"=>"16adf1d4c33f1b67a286", "settings"=>{}}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b782", "confirmation_key"=>"146936d6afe0510d3b51", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5989ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000004", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000001"}]}] flags=[] (0.1993ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000003"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000001", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000006", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000001"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000007", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000001", "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000001"}]}} flags=[] (0.3970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000001.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000003"} flags=[] limit=0 skip=0 fields=nil (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6218ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503d2a66497bfe62c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6411ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503d2a66497bfe62c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6959ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3181ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0594ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1609ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0432ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3560ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"8e94", "confirmation_key"=>"366eef0eff458d5711f3", "settings"=>{}}] flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c700000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c700000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8661", "confirmation_key"=>"f784a6f45bb0c83c2e47", "settings"=>{}}] flags=[] (0.0772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503d2a66497bfe62c700000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a66497bfe62c7000009"} update={"$addToSet"=>{"group_ids"=>"503d2a66497bfe62c700000b"}} flags=[] (0.0672ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a66497bfe62c700000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a66497bfe62c7000009"]}}} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a66497bfe62c700000a"} update={"$addToSet"=>{"group_ids"=>"503d2a66497bfe62c700000b"}} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a66497bfe62c700000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a66497bfe62c700000a"]}}} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4048ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c700000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700000d", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000009"}]}] flags=[] (0.1693ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503d2a66497bfe62c700000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4869ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c700000c"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c700000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000009", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700000f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000009"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000010", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c700000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c700000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000009", "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000009"}]}} flags=[] (0.4673ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000009.privileges"=>/r\w*/}, {"acl.503d2a66497bfe62c700000b.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c700000c"} flags=[] limit=0 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c700000a.privileges"=>/r\w*/}, {"acl.503d2a66497bfe62c700000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2599ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0758ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2201ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"627c", "confirmation_key"=>"baa395f6d598aab66cf3", "settings"=>{}}] flags=[] (0.1447ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503d2a66497bfe62c7000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0913ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3178ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a66497bfe62c7000011"} update={"$addToSet"=>{"group_ids"=>"503d2a66497bfe62c7000012"}} flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a66497bfe62c7000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a66497bfe62c7000011"]}}} flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503d2a66497bfe62c7000012"]}}]}} (0.3271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503d2a66497bfe62c7000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503d2a66497bfe62c7000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1881ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1543ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3948ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"371f", "confirmation_key"=>"29bbe8eab5ae8e8c3614", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2699ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000015", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000013"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000017", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000013"}]}] flags=[] (0.2179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5360ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000019", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000013"}]}] flags=[] (0.2482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000013.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000014"} flags=[] limit=0 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000016"} update={"$set"=>{"label_ids"=>["503d2a66497bfe62c7000014"], "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700001b", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000013"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700001c", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a66497bfe62c7000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000013"}]}} flags=[] (0.3600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000016"} flags=[] limit=-1 skip=0 fields=nil (0.5999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a66497bfe62c7000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.5140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000018"} update={"$set"=>{"label_ids"=>["503d2a66497bfe62c7000016"], "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700001e", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000013"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700001f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a66497bfe62c7000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000013"}]}} flags=[] (0.3512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000018"} flags=[] limit=-1 skip=0 fields=nil (0.5260ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1850ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1650ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3290ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9b0c", "confirmation_key"=>"7dabfb22bf7bd8918cf2", "settings"=>{}}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"73f5", "confirmation_key"=>"7e53adc821564de4e98f", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000023", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3693ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000024", "version"=>1, "label_ids"=>["503d2a66497bfe62c7000022"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000025", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}] flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2849ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000026", "version"=>1, "label_ids"=>["503d2a66497bfe62c7000024"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000027", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}] flags=[] (0.1462ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000022"} flags=[] limit=0 skip=0 fields=nil (0.5779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000024"} flags=[] limit=0 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5369ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000022"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000029", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700002a", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000024"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503d2a66497bfe62c7000022"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700002c", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700002d", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.2623ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000024"} flags=[] limit=0 skip=0 fields=nil (0.5350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5052ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000026"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503d2a66497bfe62c7000024"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700002f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000030", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.2801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c7000026"} flags=[] limit=0 skip=0 fields=nil (1.7838ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000024"} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000026"} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7169ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000022"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000032", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000033", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000034", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.4437ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5879ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000024"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503d2a66497bfe62c7000022"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000036", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000037", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000038", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.3653ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000026"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503d2a66497bfe62c7000024"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700003a", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c700003b", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700003c", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.3529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000024"} flags=[] limit=-1 skip=0 fields=nil (0.5538ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2418ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000026"} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9329ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000022"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700003e", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c700003f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000040", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000041", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7379ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000024"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503d2a66497bfe62c7000022"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000043", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000044", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000045", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000046", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.4880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6571ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000026"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503d2a66497bfe62c7000024"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000048", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000049", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c700004a", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700004b", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.4709ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c700004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700004d", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}] flags=[] (0.1762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6599ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c700004c"} update={"$set"=>{"label_ids"=>["503d2a66497bfe62c7000022"], "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a66497bfe62c7000022"=>"rw"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700004f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000050", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c700004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a66497bfe62c7000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a66497bfe62c7000022"=>"rw"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c700004c"} flags=[] limit=0 skip=0 fields=nil (0.4542ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a66497bfe62c7000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2836ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000022"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000052", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000053", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000054", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000055", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[2, 3]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000056", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.6690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (15.1992ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000024"} update={"$set"=>{"acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r", "503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503d2a66497bfe62c7000022"], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000058", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c7000059", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c700005a", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a66497bfe62c7000020"}, {"_id"=>"503d2a66497bfe62c700005b", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 20:30:30 UTC}}], "version"=>[2, 3]}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c700005c", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r", "503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.8988ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c7000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503d2a66497bfe62c700005d", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"acl"=>[{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}, "503d2a66497bfe62c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a66497bfe62c7000024"=>"r", "503d2a66497bfe62c7000022"=>"r"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.2739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c700005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700005f", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}] flags=[] (0.1769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5362ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a66497bfe62c700005e"} update={"$set"=>{"label_ids"=>["503d2a66497bfe62c7000022"], "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a66497bfe62c7000022"=>"rw"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:30 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000061", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000062", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{"_id"=>[nil, "503d2a66497bfe62c700005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a66497bfe62c7000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a66497bfe62c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a66497bfe62c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}, "503d2a66497bfe62c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a66497bfe62c7000022"=>"rw"}, "invited"=>"503d2a66497bfe62c7000020", "at"=>2012-08-28 22:30:30 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503d2a66497bfe62c7000020"}]}} flags=[] (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a66497bfe62c700005e"} flags=[] limit=0 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a66497bfe62c7000022"]}} flags=[] limit=0 skip=0 fields=nil (1.5430ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3371ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2370ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4110ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6831", "confirmation_key"=>"84f620fb971afe3c7f6b", "settings"=>{}}] flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4232ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c7000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"41cf", "confirmation_key"=>"f47d1b4b9c0694bfa672", "settings"=>{}}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000066", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000063"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c7000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4542ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c7000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c7000069", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000063"}]}] flags=[] (0.1869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a66497bfe62c700006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a66497bfe62c700006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a66497bfe62c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:30 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a66497bfe62c700006b", "created_at"=>2012-08-28 20:30:28 UTC, "changes"=>{}, "user_id"=>"503d2a66497bfe62c7000063"}]}] flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a66497bfe62c7000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a66497bfe62c7000065"} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c700006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c700006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3bb8", "confirmation_key"=>"2e6b0f774192eaddba8a", "settings"=>{}}] flags=[] (0.0958ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c700006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3650ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a66497bfe62c700006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f572", "confirmation_key"=>"af39c3d49af721620d7f", "settings"=>{}}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a66497bfe62c700006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.3292ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1972ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7e497bfe63c7000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b5ad", "confirmation_key"=>"3c91e1beba5db4e7b245", "settings"=>{}}] flags=[] (0.1018ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3741ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7e497bfe63c7000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e7bc", "confirmation_key"=>"c0129560a2b6404bed29", "settings"=>{}}] flags=[] (0.3340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7582ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7e497bfe63c7000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7e497bfe63c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7e497bfe63c7000004", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7e497bfe63c7000001"}]}] flags=[] (0.2971ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3893ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5331ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7e497bfe63c7000003"} update={"$set"=>{"acl"=>{"503d2a7e497bfe63c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}, "503d2a7e497bfe63c7000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7e497bfe63c7000001", "at"=>2012-08-28 22:30:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7e497bfe63c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:54 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7e497bfe63c7000006", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7e497bfe63c7000001"}]}], "log_entries"=>[{"_id"=>"503d2a7e497bfe63c7000007", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7e497bfe63c7000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7e497bfe63c7000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}, "503d2a7e497bfe63c7000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7e497bfe63c7000001", "at"=>2012-08-28 22:30:54 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7e497bfe63c7000001"}]}} flags=[] (0.4461ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000001.privileges"=>/r\w*/}], "label_ids"=>"503d2a7e497bfe63c7000003"} flags=[] limit=0 skip=0 fields=nil (0.9081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503d2a7e497bfe63c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6320ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503d2a7e497bfe63c7000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1640ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3803ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2561ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2408ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7e497bfe63c7000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7e497bfe63c7000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"fbf3", "confirmation_key"=>"be781b22aaf804caf196", "settings"=>{}}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7e497bfe63c700000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2892ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7e497bfe63c700000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4256", "confirmation_key"=>"9885eea9a0374d7378ab", "settings"=>{}}] flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503d2a7e497bfe63c700000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0932ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a7e497bfe63c7000009"} update={"$addToSet"=>{"group_ids"=>"503d2a7e497bfe63c700000b"}} flags=[] (0.0658ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a7e497bfe63c700000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a7e497bfe63c7000009"]}}} flags=[] (0.0789ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a7e497bfe63c700000a"} update={"$addToSet"=>{"group_ids"=>"503d2a7e497bfe63c700000b"}} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a7e497bfe63c700000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a7e497bfe63c700000a"]}}} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7e497bfe63c700000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7e497bfe63c700000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7e497bfe63c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7e497bfe63c700000d", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7e497bfe63c7000009"}]}] flags=[] (0.1659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503d2a7e497bfe63c700000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7e497bfe63c700000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4320ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7e497bfe63c700000c"} update={"$set"=>{"acl"=>{"503d2a7e497bfe63c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}, "503d2a7e497bfe63c700000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7e497bfe63c7000009", "at"=>2012-08-28 22:30:54 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7e497bfe63c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:54 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7e497bfe63c700000f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7e497bfe63c7000009"}]}], "log_entries"=>[{"_id"=>"503d2a7e497bfe63c7000010", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7e497bfe63c700000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7e497bfe63c7000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:54 +0200}, "503d2a7e497bfe63c700000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7e497bfe63c7000009", "at"=>2012-08-28 22:30:54 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7e497bfe63c7000009"}]}} flags=[] (0.6008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c7000009.privileges"=>/r\w*/}, {"acl.503d2a7e497bfe63c700000b.privileges"=>/r\w*/}], "label_ids"=>"503d2a7e497bfe63c700000c"} flags=[] limit=0 skip=0 fields=nil (0.7062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7e497bfe63c700000a.privileges"=>/r\w*/}, {"acl.503d2a7e497bfe63c700000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9298ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3231ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2139ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3598ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"45bd", "confirmation_key"=>"409fe980ea07e92ff56d", "settings"=>{}}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503d2a7f497bfe63c7000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4880ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503d2a7f497bfe63c7000011"} update={"$addToSet"=>{"group_ids"=>"503d2a7f497bfe63c7000012"}} flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503d2a7f497bfe63c7000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503d2a7f497bfe63c7000011"]}}} flags=[] (0.0658ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503d2a7f497bfe63c7000012"]}}]}} (0.3519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503d2a7f497bfe63c7000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503d2a7f497bfe63c7000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1853ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1481ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3319ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"2ce6", "confirmation_key"=>"7c7c0ac953ff0f815d0e", "settings"=>{}}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2561ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000015", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000013"}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3750ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000017", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000013"}]}] flags=[] (0.2780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5100ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000019", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000013"}]}] flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000013.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c7000014"} flags=[] limit=0 skip=0 fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4816ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000016"} update={"$set"=>{"label_ids"=>["503d2a7f497bfe63c7000014"], "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700001b", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000013"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700001c", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a7f497bfe63c7000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000013"}]}} flags=[] (0.3481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000016"} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a7f497bfe63c7000014"]}} flags=[] limit=0 skip=0 fields=nil (1.0140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3920ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000018"} update={"$set"=>{"label_ids"=>["503d2a7f497bfe63c7000016"], "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700001e", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000013"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700001f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a7f497bfe63c7000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000013"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000013"}]}} flags=[] (0.3469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000018"} flags=[] limit=-1 skip=0 fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2100ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3438ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"60d0", "confirmation_key"=>"048b71fb9e3d227d485a", "settings"=>{}}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2c50", "confirmation_key"=>"8604c4267d9205ac263a", "settings"=>{}}] flags=[] (0.0868ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000023", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}] flags=[] (0.1528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000024", "version"=>1, "label_ids"=>["503d2a7f497bfe63c7000022"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000025", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}] flags=[] (0.1342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3788ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000026", "version"=>1, "label_ids"=>["503d2a7f497bfe63c7000024"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000027", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c7000022"} flags=[] limit=0 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c7000024"} flags=[] limit=0 skip=0 fields=nil (0.3769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5400ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000022"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000029", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700002a", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.3400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4988ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000024"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503d2a7f497bfe63c7000022"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700002c", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700002d", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.2832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c7000024"} flags=[] limit=0 skip=0 fields=nil (0.5260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4032ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000026"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503d2a7f497bfe63c7000024"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700002f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000030", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c7000026"} flags=[] limit=0 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000024"} flags=[] limit=-1 skip=0 fields=nil (0.3490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000026"} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7010ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000022"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000032", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000033", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000034", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.4342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5209ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000024"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503d2a7f497bfe63c7000022"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000036", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000037", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000038", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.3557ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5400ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000026"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503d2a7f497bfe63c7000024"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700003a", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c700003b", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700003c", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.3369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000024"} flags=[] limit=-1 skip=0 fields=nil (0.5639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000026"} flags=[] limit=-1 skip=0 fields=nil (0.6108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9329ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000022"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700003e", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c700003f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000040", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000041", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.5429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7198ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000024"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503d2a7f497bfe63c7000022"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000043", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000044", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000045", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000046", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6220ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000026"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503d2a7f497bfe63c7000024"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000048", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000049", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c700004a", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700004b", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[2, 3]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3662ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c700004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700004d", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c700004c"} update={"$set"=>{"label_ids"=>["503d2a7f497bfe63c7000022"], "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rw"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700004f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000050", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c700004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a7f497bfe63c7000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rw"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.6399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c700004c"} flags=[] limit=0 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6263ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a7f497bfe63c7000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3168ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000022"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000052", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000053", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c7000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000054", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000055", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[2, 3]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000056", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.6618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9441ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000024"} update={"$set"=>{"acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r", "503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503d2a7f497bfe63c7000022"], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000058", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c7000059", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c700005a", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[1, 2]}, "user_id"=>"503d2a7f497bfe63c7000020"}, {"_id"=>"503d2a7f497bfe63c700005b", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 20:30:55 UTC}}], "version"=>[2, 3]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700005c", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r", "503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.6168ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c7000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503d2a7f497bfe63c700005d", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"acl"=>[{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"r", "inherited"=>{"503d2a7f497bfe63c7000024"=>"r", "503d2a7f497bfe63c7000022"=>"r"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "version"=>[3, 4]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.1781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c700005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700005f", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503d2a7f497bfe63c700005e"} update={"$set"=>{"label_ids"=>["503d2a7f497bfe63c7000022"], "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rw"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 20:30:55 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000061", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000020"}]}], "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000062", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{"_id"=>[nil, "503d2a7f497bfe63c700005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503d2a7f497bfe63c7000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503d2a7f497bfe63c7000020"=>{"privileges"=>"rwsd", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}, "503d2a7f497bfe63c7000021"=>{"privileges"=>"rw", "inherited"=>{"503d2a7f497bfe63c7000022"=>"rw"}, "invited"=>"503d2a7f497bfe63c7000020", "at"=>2012-08-28 22:30:55 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503d2a7f497bfe63c7000020"}]}} flags=[] (0.3529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "label_ids"=>"503d2a7f497bfe63c700005e"} flags=[] limit=0 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503d2a7f497bfe63c7000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4472ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3002ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3238ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"0334", "confirmation_key"=>"8dbc70ff9b12ef641d9e", "settings"=>{}}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c7000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"8800", "confirmation_key"=>"6bc890360af590c2720f", "settings"=>{}}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000066", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000063"}]}] flags=[] (0.1600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c7000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c7000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c7000069", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000063"}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503d2a7f497bfe63c700006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503d2a7f497bfe63c7000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-28 22:30:55 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503d2a7f497bfe63c700006b", "created_at"=>2012-08-28 20:30:53 UTC, "changes"=>{}, "user_id"=>"503d2a7f497bfe63c7000063"}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503d2a7f497bfe63c7000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503d2a7f497bfe63c7000065"} flags=[] limit=-1 skip=0 fields=nil (0.3848ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4771ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c700006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f7ba", "confirmation_key"=>"ce569ed28f0b039ff9db", "settings"=>{}}] flags=[] (0.1106ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503d2a7f497bfe63c700006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"18bc", "confirmation_key"=>"09bb45173d6ad5d6fc39", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503d2a7f497bfe63c700006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5128ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.4281ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3610ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000001", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e2b4", "confirmation_key"=>"c2c557489a21f67bfced", "settings"=>{}}] flags=[] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000002", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9b31", "confirmation_key"=>"59faa3e520d5f04abd06", "settings"=>{}}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000004", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000001", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5009ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000003"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000001", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000006", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000001", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000007", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000001", "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000001", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.4530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000001.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000003"} flags=[] limit=0 skip=0 fields=nil (9.8939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503e05c2497bfeb2cb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6568ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6368ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503e05c2497bfeb2cb000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8059ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4599ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0844ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2229ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4506ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000009", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3050", "confirmation_key"=>"af6d8a52c3f4b9857d65", "settings"=>{}}] flags=[] (0.1101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb00000a", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"a5e4", "confirmation_key"=>"ffedda85c3c773d65ce5", "settings"=>{}}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503e05c2497bfeb2cb00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503e05c2497bfeb2cb000009"} update={"$addToSet"=>{"group_ids"=>"503e05c2497bfeb2cb00000b"}} flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503e05c2497bfeb2cb00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503e05c2497bfeb2cb000009"]}}} flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503e05c2497bfeb2cb00000a"} update={"$addToSet"=>{"group_ids"=>"503e05c2497bfeb2cb00000b"}} flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503e05c2497bfeb2cb00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503e05c2497bfeb2cb00000a"]}}} flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00000d", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000009", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503e05c2497bfeb2cb00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb00000c"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000009", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00000f", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000009", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000010", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000009", "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000009", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3738ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000009.privileges"=>/r\w*/}, {"acl.503e05c2497bfeb2cb00000b.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb00000c"} flags=[] limit=0 skip=0 fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb00000a.privileges"=>/r\w*/}, {"acl.503e05c2497bfeb2cb00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8967ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2019ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1509ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000011", "version"=>1, "group_ids"=>[], "email"=>"u@test.com", "salt"=>"75ba", "confirmation_key"=>"a60e5f3c8a5ed74c9d2b", "settings"=>{}}] flags=[] (0.1087ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503e05c2497bfeb2cb000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.6878ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503e05c2497bfeb2cb000011"} update={"$addToSet"=>{"group_ids"=>"503e05c2497bfeb2cb000012"}} flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503e05c2497bfeb2cb000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503e05c2497bfeb2cb000011"]}}} flags=[] (0.1011ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503e05c2497bfeb2cb000012"]}}]}} (0.5031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503e05c2497bfeb2cb000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503e05c2497bfeb2cb000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5267ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2470ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1621ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000013", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"50db", "confirmation_key"=>"6393a8599880e1d461f7", "settings"=>{}}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000015", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1543ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000017", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3610ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000019", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000013.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000014"} flags=[] limit=0 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000016"} update={"$set"=>{"label_ids"=>["503e05c2497bfeb2cb000014"], "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00001b", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00001c", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503e05c2497bfeb2cb000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000016"} flags=[] limit=-1 skip=0 fields=nil (0.5748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503e05c2497bfeb2cb000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3767ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6402ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000018"} update={"$set"=>{"label_ids"=>["503e05c2497bfeb2cb000016"], "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00001e", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00001f", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503e05c2497bfeb2cb000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000013"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000013", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000018"} flags=[] limit=-1 skip=0 fields=nil (0.5260ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2580ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1700ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000020", "version"=>1, "group_ids"=>[], "email"=>"b@test.com", "salt"=>"5c31", "confirmation_key"=>"1cf87cb6c4e8f9e312b7", "settings"=>{}}] flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3331ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000021", "version"=>1, "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e0f5", "confirmation_key"=>"e95a632a300e5a427a76", "settings"=>{}}] flags=[] (0.1049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3669ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000023", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000024", "version"=>1, "label_ids"=>["503e05c2497bfeb2cb000022"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000025", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3479ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000026", "version"=>1, "label_ids"=>["503e05c2497bfeb2cb000024"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000027", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1602ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000022"} flags=[] limit=0 skip=0 fields=nil (0.8671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000024"} flags=[] limit=0 skip=0 fields=nil (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5479ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000022"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000029", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00002a", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4539ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000024"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503e05c2497bfeb2cb000022"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00002c", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00002d", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.2472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000024"} flags=[] limit=0 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000026"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503e05c2497bfeb2cb000024"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00002f", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000030", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb000026"} flags=[] limit=0 skip=0 fields=nil (0.3269ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000024"} flags=[] limit=-1 skip=0 fields=nil (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000026"} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7181ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000022"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000032", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000033", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000034", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5929ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000024"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503e05c2497bfeb2cb000022"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000036", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000037", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000038", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3526ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000026"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503e05c2497bfeb2cb000024"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00003a", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb00003b", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00003c", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000024"} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000026"} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9208ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000022"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00003e", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb00003f", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000040", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000041", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[2, 3]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.6731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7420ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000024"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503e05c2497bfeb2cb000022"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000043", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000044", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000045", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000046", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[2, 3]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.4752ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7050ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000026"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503e05c2497bfeb2cb000024"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000048", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000049", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb00004a", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00004b", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[2, 3]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00004d", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1452ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4830ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb00004c"} update={"$set"=>{"label_ids"=>["503e05c2497bfeb2cb000022"], "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rw"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00004f", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000050", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503e05c2497bfeb2cb000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rw"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb00004c"} flags=[] limit=0 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503e05c2497bfeb2cb000022"]}} flags=[] limit=0 skip=0 fields=nil (1.2188ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1930ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000022"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000052", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000053", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000054", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000055", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[2, 3]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000056", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[3, 4]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.6680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9463ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000024"} update={"$set"=>{"acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r", "503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503e05c2497bfeb2cb000022"], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000058", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb000059", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb00005a", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[1, 2]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}, {"_id"=>"503e05c2497bfeb2cb00005b", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 12:06:26 UTC}}], "version"=>[2, 3]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00005c", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r", "503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[3, 4]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.6511ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00005d", "changes"=>{"acl"=>[{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"r", "inherited"=>{"503e05c2497bfeb2cb000024"=>"r", "503e05c2497bfeb2cb000022"=>"r"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "version"=>[3, 4]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00005f", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503e05c2497bfeb2cb00005e"} update={"$set"=>{"label_ids"=>["503e05c2497bfeb2cb000022"], "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rw"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 12:06:26 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000061", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}], "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000062", "changes"=>{"_id"=>[nil, "503e05c2497bfeb2cb00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503e05c2497bfeb2cb000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503e05c2497bfeb2cb000020"=>{"privileges"=>"rwsd", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}, "503e05c2497bfeb2cb000021"=>{"privileges"=>"rw", "inherited"=>{"503e05c2497bfeb2cb000022"=>"rw"}, "invited"=>"503e05c2497bfeb2cb000020", "at"=>2012-08-29 14:06:26 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503e05c2497bfeb2cb000020", "created_at"=>2012-08-29 12:06:26 UTC}]}} flags=[] (0.3541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "label_ids"=>"503e05c2497bfeb2cb00005e"} flags=[] limit=0 skip=0 fields=nil (0.4079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6306ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503e05c2497bfeb2cb000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4379ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3660ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1760ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3901ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000063", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"ab0f", "confirmation_key"=>"88b0e6da4b86b0d7adb4", "settings"=>{}}] flags=[] (0.0877ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb000064", "version"=>1, "group_ids"=>[], "email"=>"best@test.com", "salt"=>"e9c3", "confirmation_key"=>"b62c55346328e9b4ac7c", "settings"=>{}}] flags=[] (0.0832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3262ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000066", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000063", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb000069", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000063", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1893ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4950ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503e05c2497bfeb2cb00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503e05c2497bfeb2cb000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-29 14:06:26 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503e05c2497bfeb2cb00006b", "changes"=>{}, "user_id"=>"503e05c2497bfeb2cb000063", "created_at"=>2012-08-29 12:06:26 UTC}]}] flags=[] (0.1552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5631ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503e05c2497bfeb2cb000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503e05c2497bfeb2cb000065"} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4759ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb00006c", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"1ff8", "confirmation_key"=>"c8c8b705f308bd084000", "settings"=>{}}] flags=[] (0.0842ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503e05c2497bfeb2cb00006d", "version"=>1, "group_ids"=>[], "email"=>"test@test.com", "salt"=>"6fe3", "confirmation_key"=>"212ea4500f477ba04481", "settings"=>{}}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503e05c2497bfeb2cb00006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5059ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.7761ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.5403ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (41.7998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7041ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"0cb1", "confirmation_key"=>"1ea22d3779d88138ed0d", "settings"=>{}}] flags=[] (0.1962ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4852ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6111ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ba21", "confirmation_key"=>"36b1deb2b39c9eaf9969", "settings"=>{}}] flags=[] (0.1180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7091ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000004", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000001", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.2899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5760ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000003"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000001", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000006", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000001", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000007", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000001", "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000001", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000001.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000003"} flags=[] limit=0 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f84e0497bfe64dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7112ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f84e0497bfe64dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7041ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3161ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1431ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3860ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"3db0", "confirmation_key"=>"dada2232394112ba705d", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"dc5d", "confirmation_key"=>"5d540c318043f71b3833", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f84e0497bfe64dd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0899ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f84e0497bfe64dd000009"} update={"$addToSet"=>{"group_ids"=>"503f84e0497bfe64dd00000b"}} flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f84e0497bfe64dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f84e0497bfe64dd000009"]}}} flags=[] (0.1190ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f84e0497bfe64dd00000a"} update={"$addToSet"=>{"group_ids"=>"503f84e0497bfe64dd00000b"}} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f84e0497bfe64dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f84e0497bfe64dd00000a"]}}} flags=[] (0.0651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00000d", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000009", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f84e0497bfe64dd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6049ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd00000c"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000009", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00000f", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000009", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000010", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000009", "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000009", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.6449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000009.privileges"=>/r\w*/}, {"acl.503f84e0497bfe64dd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd00000c"} flags=[] limit=0 skip=0 fields=nil (0.6042ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd00000a.privileges"=>/r\w*/}, {"acl.503f84e0497bfe64dd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0979ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2961ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1588ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"2729", "confirmation_key"=>"6e1ca81f8787da574a99", "settings"=>{}}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f84e0497bfe64dd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1621ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.5379ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f84e0497bfe64dd000011"} update={"$addToSet"=>{"group_ids"=>"503f84e0497bfe64dd000012"}} flags=[] (0.1123ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f84e0497bfe64dd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f84e0497bfe64dd000011"]}}} flags=[] (0.0999ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f84e0497bfe64dd000012"]}}]}} (0.4454ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f84e0497bfe64dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f84e0497bfe64dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1822ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"adb6", "confirmation_key"=>"f68b1491e961c80f0ca6", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000015", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3579ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000017", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1433ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4261ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000019", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000013.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000014"} flags=[] limit=0 skip=0 fields=nil (0.4349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4761ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000016"} update={"$set"=>{"label_ids"=>["503f84e0497bfe64dd000014"], "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00001b", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00001c", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f84e0497bfe64dd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.3662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f84e0497bfe64dd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5221ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000018"} update={"$set"=>{"label_ids"=>["503f84e0497bfe64dd000016"], "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00001e", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00001f", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f84e0497bfe64dd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000013", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4780ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2198ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0517ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1483ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2830ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b6f4", "confirmation_key"=>"0d92716ee6fb8b133e9d", "settings"=>{}}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3121ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b0ed", "confirmation_key"=>"c511002a24b236f89ef4", "settings"=>{}}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000023", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000024", "version"=>1, "label_ids"=>["503f84e0497bfe64dd000022"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000025", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000026", "version"=>1, "label_ids"=>["503f84e0497bfe64dd000024"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000027", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000022"} flags=[] limit=0 skip=0 fields=nil (0.5639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4232ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6280ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000022"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000029", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00002a", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.3488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5012ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000024"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f84e0497bfe64dd000022"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00002c", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00002d", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.2599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000024"} flags=[] limit=0 skip=0 fields=nil (0.5839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4461ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000026"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f84e0497bfe64dd000024"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00002f", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000030", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd000026"} flags=[] limit=0 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.3457ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8299ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000022"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000032", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000033", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000034", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.4928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5279ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000024"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f84e0497bfe64dd000022"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000036", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000037", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000038", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6123ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000026"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f84e0497bfe64dd000024"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00003a", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd00003b", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00003c", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.3619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.5362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9952ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000022"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00003e", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd00003f", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000040", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000041", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.5491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7150ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000024"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f84e0497bfe64dd000022"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000043", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000044", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000045", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000046", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7160ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000026"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f84e0497bfe64dd000024"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000048", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000049", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd00004a", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00004b", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.7091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4909ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00004d", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1798ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (36.2272ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd00004c"} update={"$set"=>{"label_ids"=>["503f84e0497bfe64dd000022"], "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f84e0497bfe64dd000022"=>"rw"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00004f", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000050", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f84e0497bfe64dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f84e0497bfe64dd000022"=>"rw"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.6549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd00004c"} flags=[] limit=0 skip=0 fields=nil (0.6421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9122ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f84e0497bfe64dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.7712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.4231ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000022"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000052", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000053", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000054", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000055", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000056", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.7281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9310ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000024"} update={"$set"=>{"acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r", "503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f84e0497bfe64dd000022"], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000058", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd000059", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd00005a", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}, {"_id"=>"503f84e0497bfe64dd00005b", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 15:21:04 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00005c", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r", "503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.6349ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f84e0497bfe64dd00005d", "changes"=>{"acl"=>[{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}, "503f84e0497bfe64dd000021"=>{"privileges"=>"r", "inherited"=>{"503f84e0497bfe64dd000024"=>"r", "503f84e0497bfe64dd000022"=>"r"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.1910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4253ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00005f", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1571ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4163ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f84e0497bfe64dd00005e"} update={"$set"=>{"label_ids"=>["503f84e0497bfe64dd000022"], "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f84e0497bfe64dd000022"=>"rw"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:04 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000061", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}], "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000062", "changes"=>{"_id"=>[nil, "503f84e0497bfe64dd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f84e0497bfe64dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f84e0497bfe64dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f84e0497bfe64dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}, "503f84e0497bfe64dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f84e0497bfe64dd000022"=>"rw"}, "invited"=>"503f84e0497bfe64dd000020", "at"=>2012-08-30 17:21:04 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f84e0497bfe64dd000020", "created_at"=>2012-08-30 15:21:04 UTC}]}} flags=[] (0.3550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f84e0497bfe64dd00005e"} flags=[] limit=0 skip=0 fields=nil (0.3622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f84e0497bfe64dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.5519ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2131ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1447ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3db8", "confirmation_key"=>"9df6deff45a03abb6887", "settings"=>{}}] flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3443ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3312ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f84e0497bfe64dd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"efa6", "confirmation_key"=>"17cd032ae0a7ac2abce7", "settings"=>{}}] flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000066", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000063", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1473ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd000069", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000063", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5159ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f84e0497bfe64dd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f84e0497bfe64dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:04 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f84e0497bfe64dd00006b", "changes"=>{}, "user_id"=>"503f84e0497bfe64dd000063", "created_at"=>2012-08-30 15:21:04 UTC}]}] flags=[] (0.1481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3872ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f84e0497bfe64dd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f84e0497bfe64dd000065"} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3991ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (134.5358ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.6189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f84e0497bfe64dd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7048ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1950ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1671ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3879ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b457", "confirmation_key"=>"2f078057aaf4ba872c42", "settings"=>{}}] flags=[] (0.1161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3369ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"23f1", "confirmation_key"=>"034cdcfbba594e51fb87", "settings"=>{}}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4449ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000004", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000001", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5350ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000003"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000001", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000006", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000001", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000007", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000001", "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000001", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000003"} flags=[] limit=0 skip=0 fields=nil (0.4387ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8511497bfe6bdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6540ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8511497bfe6bdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2701ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1512ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1471ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3431ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f593", "confirmation_key"=>"8fb387cf14d52db3ba06", "settings"=>{}}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3290ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3352ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3a3a", "confirmation_key"=>"0211b246a52dc6a8fb2f", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8511497bfe6bdd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8511497bfe6bdd000009"} update={"$addToSet"=>{"group_ids"=>"503f8511497bfe6bdd00000b"}} flags=[] (0.0660ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8511497bfe6bdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8511497bfe6bdd000009"]}}} flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8511497bfe6bdd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8511497bfe6bdd00000b"}} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8511497bfe6bdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8511497bfe6bdd00000a"]}}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4008ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00000d", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000009", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8511497bfe6bdd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.5302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5021ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd00000c"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000009", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00000f", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000009", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000010", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000009", "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000009", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.4001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000009.privileges"=>/r\w*/}, {"acl.503f8511497bfe6bdd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd00000c"} flags=[] limit=0 skip=0 fields=nil (0.4361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd00000a.privileges"=>/r\w*/}, {"acl.503f8511497bfe6bdd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7920ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2480ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1788ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6540ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"3f07", "confirmation_key"=>"c99fecdf3b2952bb0f34", "settings"=>{}}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8511497bfe6bdd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4659ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8511497bfe6bdd000011"} update={"$addToSet"=>{"group_ids"=>"503f8511497bfe6bdd000012"}} flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8511497bfe6bdd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8511497bfe6bdd000011"]}}} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8511497bfe6bdd000012"]}}]}} (0.3922ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8511497bfe6bdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8511497bfe6bdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3164ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3130ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"faaf", "confirmation_key"=>"dfc59e280cb8c4d2f5d0", "settings"=>{}}] flags=[] (0.1264ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000015", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000017", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3090ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000019", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000014"} flags=[] limit=0 skip=0 fields=nil (2.1152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000016"} update={"$set"=>{"label_ids"=>["503f8511497bfe6bdd000014"], "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00001b", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00001c", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8511497bfe6bdd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.6249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8511497bfe6bdd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6740ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000018"} update={"$set"=>{"label_ids"=>["503f8511497bfe6bdd000016"], "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00001e", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00001f", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8511497bfe6bdd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000013", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3638ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000018"} flags=[] limit=-1 skip=0 fields=nil (0.5078ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2041ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1557ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3800ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b477", "confirmation_key"=>"f55fa4b2988846c528b7", "settings"=>{}}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"2b31", "confirmation_key"=>"2666995f56885686adc9", "settings"=>{}}] flags=[] (0.0751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000023", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000024", "version"=>1, "label_ids"=>["503f8511497bfe6bdd000022"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000025", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000026", "version"=>1, "label_ids"=>["503f8511497bfe6bdd000024"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000027", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000022"} flags=[] limit=0 skip=0 fields=nil (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000024"} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000022"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000029", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00002a", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000024"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8511497bfe6bdd000022"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00002c", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00002d", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000024"} flags=[] limit=0 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4349ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000026"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8511497bfe6bdd000024"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00002f", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000030", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.2511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd000026"} flags=[] limit=0 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.3510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7470ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000022"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000032", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000033", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000034", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6001ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000024"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8511497bfe6bdd000022"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000036", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000037", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000038", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.4072ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5949ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000026"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8511497bfe6bdd000024"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00003a", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd00003b", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00003c", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.7188ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9179ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000022"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00003e", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd00003f", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000040", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000041", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.5350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000024"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8511497bfe6bdd000022"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000043", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000044", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000045", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000046", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7188ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000026"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8511497bfe6bdd000024"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000048", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000049", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd00004a", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00004b", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.4659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4148ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00004d", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4890ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd00004c"} update={"$set"=>{"label_ids"=>["503f8511497bfe6bdd000022"], "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8511497bfe6bdd000022"=>"rw"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00004f", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000050", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8511497bfe6bdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8511497bfe6bdd000022"=>"rw"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8511497bfe6bdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2190ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000022"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000052", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000053", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000054", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000055", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000056", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.6588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9100ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000024"} update={"$set"=>{"acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r", "503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8511497bfe6bdd000022"], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000058", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd000059", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd00005a", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}, {"_id"=>"503f8511497bfe6bdd00005b", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 15:21:53 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00005c", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r", "503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.6108ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8511497bfe6bdd00005d", "changes"=>{"acl"=>[{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}, "503f8511497bfe6bdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8511497bfe6bdd000024"=>"r", "503f8511497bfe6bdd000022"=>"r"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.1800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00005f", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4289ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8511497bfe6bdd00005e"} update={"$set"=>{"label_ids"=>["503f8511497bfe6bdd000022"], "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8511497bfe6bdd000022"=>"rw"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:21:53 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000061", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}], "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000062", "changes"=>{"_id"=>[nil, "503f8511497bfe6bdd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8511497bfe6bdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8511497bfe6bdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8511497bfe6bdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}, "503f8511497bfe6bdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8511497bfe6bdd000022"=>"rw"}, "invited"=>"503f8511497bfe6bdd000020", "at"=>2012-08-30 17:21:53 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8511497bfe6bdd000020", "created_at"=>2012-08-30 15:21:53 UTC}]}} flags=[] (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8511497bfe6bdd00005e"} flags=[] limit=0 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8511497bfe6bdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2460ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1469ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (31.4150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4208ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8a51", "confirmation_key"=>"acfca328cceb66aa969b", "settings"=>{}}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3538ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2639ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8511497bfe6bdd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"7a30", "confirmation_key"=>"99c05a6dc523f9dce78d", "settings"=>{}}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3169ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000066", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000063", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4733ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd000069", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000063", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4501ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8511497bfe6bdd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8511497bfe6bdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:21:53 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8511497bfe6bdd00006b", "changes"=>{}, "user_id"=>"503f8511497bfe6bdd000063", "created_at"=>2012-08-30 15:21:53 UTC}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8511497bfe6bdd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8511497bfe6bdd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3660ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2778ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3867ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8511497bfe6bdd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6831ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2048ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2050ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4122ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"ba6d", "confirmation_key"=>"1c08dfbbecda6217a837", "settings"=>{}}] flags=[] (0.1099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3209ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9d24", "confirmation_key"=>"d4a6266f899c55996282", "settings"=>{}}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000004", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000001", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2871ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4930ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000003"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000001", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000006", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000001", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000007", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000001", "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000001", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000003"} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8527497bfe6cdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6242ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8527497bfe6cdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0979ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3598ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1550ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1469ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3798ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"fd54", "confirmation_key"=>"de9b794c59703a1ab855", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3483ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2708ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"83cf", "confirmation_key"=>"e673ae1503982159aad0", "settings"=>{}}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8527497bfe6cdd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8527497bfe6cdd000009"} update={"$addToSet"=>{"group_ids"=>"503f8527497bfe6cdd00000b"}} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8527497bfe6cdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8527497bfe6cdd000009"]}}} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8527497bfe6cdd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8527497bfe6cdd00000b"}} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8527497bfe6cdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8527497bfe6cdd00000a"]}}} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00000d", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000009", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1616ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8527497bfe6cdd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6700ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd00000c"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000009", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00000f", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000009", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000010", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000009", "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000009", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.6351ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000009.privileges"=>/r\w*/}, {"acl.503f8527497bfe6cdd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd00000c"} flags=[] limit=0 skip=0 fields=nil (0.5629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd00000a.privileges"=>/r\w*/}, {"acl.503f8527497bfe6cdd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7391ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2570ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1802ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2806ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"0894", "confirmation_key"=>"86fcd8280961687cb1f9", "settings"=>{}}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8527497bfe6cdd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1571ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4511ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8527497bfe6cdd000011"} update={"$addToSet"=>{"group_ids"=>"503f8527497bfe6cdd000012"}} flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8527497bfe6cdd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8527497bfe6cdd000011"]}}} flags=[] (0.0720ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8527497bfe6cdd000012"]}}]}} (0.3781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8527497bfe6cdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8527497bfe6cdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3068ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1841ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1721ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3858ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7e63", "confirmation_key"=>"c3a5b1e4eab8371ec3fd", "settings"=>{}}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000015", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000017", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000019", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1333ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000014"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000016"} update={"$set"=>{"label_ids"=>["503f8527497bfe6cdd000014"], "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00001b", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00001c", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8527497bfe6cdd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8527497bfe6cdd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000018"} update={"$set"=>{"label_ids"=>["503f8527497bfe6cdd000016"], "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00001e", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00001f", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8527497bfe6cdd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000013", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2062ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1888ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2918ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9183", "confirmation_key"=>"f186faa7db959128f54b", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3049ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8527497bfe6cdd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"c96c", "confirmation_key"=>"9cfeb0ab0363317add0f", "settings"=>{}}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2658ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000023", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (67.8368ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000024", "version"=>1, "label_ids"=>["503f8527497bfe6cdd000022"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000025", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.3691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5159ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd000026", "version"=>1, "label_ids"=>["503f8527497bfe6cdd000024"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000027", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000022"} flags=[] limit=0 skip=0 fields=nil (0.7789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000024"} flags=[] limit=0 skip=0 fields=nil (0.7060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6850ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000022"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000029", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00002a", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3603ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5820ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000024"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8527497bfe6cdd000022"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00002c", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00002d", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.2651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000024"} flags=[] limit=0 skip=0 fields=nil (0.6039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000026"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8527497bfe6cdd000024"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00002f", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000030", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.2482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd000026"} flags=[] limit=0 skip=0 fields=nil (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.2968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7899ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000022"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000032", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000033", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000034", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.4423ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5822ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000024"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8527497bfe6cdd000022"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000036", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000037", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000038", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5829ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000026"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8527497bfe6cdd000024"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00003a", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd00003b", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00003c", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.6192ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8527497bfe6cdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0121ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000022"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00003e", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd00003f", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000040", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000041", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.7031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7329ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000024"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8527497bfe6cdd000022"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000043", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000044", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000045", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000046", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7100ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000026"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8527497bfe6cdd000024"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000048", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000049", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd00004a", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00004b", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.4392ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00004d", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4370ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd00004c"} update={"$set"=>{"label_ids"=>["503f8527497bfe6cdd000022"], "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8527497bfe6cdd000022"=>"rw"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00004f", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000050", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8527497bfe6cdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8527497bfe6cdd000022"=>"rw"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3538ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8527497bfe6cdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1971ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000022"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000052", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000053", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000054", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000055", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000056", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.6549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9069ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000024"} update={"$set"=>{"acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r", "503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8527497bfe6cdd000022"], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000058", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd000059", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd00005a", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}, {"_id"=>"503f8527497bfe6cdd00005b", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 15:22:15 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00005c", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r", "503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.5786ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8527497bfe6cdd00005d", "changes"=>{"acl"=>[{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}, "503f8527497bfe6cdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8527497bfe6cdd000024"=>"r", "503f8527497bfe6cdd000022"=>"r"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3908ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8527497bfe6cdd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd00005f", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}] flags=[] (0.1411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8527497bfe6cdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4959ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8527497bfe6cdd00005e"} update={"$set"=>{"label_ids"=>["503f8527497bfe6cdd000022"], "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8527497bfe6cdd000022"=>"rw"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:22:15 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000061", "changes"=>{}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}], "log_entries"=>[{"_id"=>"503f8527497bfe6cdd000062", "changes"=>{"_id"=>[nil, "503f8527497bfe6cdd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8527497bfe6cdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8527497bfe6cdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8527497bfe6cdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:22:15 +0200}, "503f8527497bfe6cdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8527497bfe6cdd000022"=>"rw"}, "invited"=>"503f8527497bfe6cdd000020", "at"=>2012-08-30 17:22:15 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8527497bfe6cdd000020", "created_at"=>2012-08-30 15:22:15 UTC}]}} flags=[] (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8527497bfe6cdd00005e"} flags=[] limit=0 skip=0 fields=nil (0.5097ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8527497bfe6cdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8527497bfe6cdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4989ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2010ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1531ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8528497bfe6cdd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3459ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8528497bfe6cdd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"a1a5", "confirmation_key"=>"448988ec0e667c8aef3a", "settings"=>{}}] flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8528497bfe6cdd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3028ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8528497bfe6cdd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"c5ba", "confirmation_key"=>"c86217f798094a65eb2f", "settings"=>{}}] flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8528497bfe6cdd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8528497bfe6cdd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8528497bfe6cdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:16 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8528497bfe6cdd000066", "changes"=>{}, "user_id"=>"503f8528497bfe6cdd000063", "created_at"=>2012-08-30 15:22:16 UTC}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8528497bfe6cdd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5012ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8528497bfe6cdd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5920ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8528497bfe6cdd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8528497bfe6cdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:16 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8528497bfe6cdd000069", "changes"=>{}, "user_id"=>"503f8528497bfe6cdd000063", "created_at"=>2012-08-30 15:22:16 UTC}]}] flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8528497bfe6cdd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5367ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8528497bfe6cdd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8528497bfe6cdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:22:16 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8528497bfe6cdd00006b", "changes"=>{}, "user_id"=>"503f8528497bfe6cdd000063", "created_at"=>2012-08-30 15:22:16 UTC}]}] flags=[] (0.1559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8528497bfe6cdd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6752ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8528497bfe6cdd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5181ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8528497bfe6cdd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1233ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8528497bfe6cdd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1888ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8528497bfe6cdd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3302ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8528497bfe6cdd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"73bc", "confirmation_key"=>"a3c4c7e18fe8317410a3", "settings"=>{}}] flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8528497bfe6cdd00006c"} update={"$set"=>{"encrypted_password"=>"f4a061f2b0ae0c846dd038d5c978a0b4672df9d769c91a32d2853576a5199596"}} flags=[] (0.0970ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (11.7910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8528497bfe6cdd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2141ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1559ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3493ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4289ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7762", "confirmation_key"=>"909831db4686118518a6", "settings"=>{}}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3908ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"b292", "confirmation_key"=>"1648dcee25c69c27ead4", "settings"=>{}}] flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000004", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000001", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.2050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5131ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000003"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000001", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000006", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000001", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000007", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000001", "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000001", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000001.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000003"} flags=[] limit=0 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f857b497bfe6ddd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f857b497bfe6ddd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7412ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4070ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1972ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0439ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7395", "confirmation_key"=>"3793b5975c868960378d", "settings"=>{}}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2911ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"be58", "confirmation_key"=>"ca89d31b6b386ce83d68", "settings"=>{}}] flags=[] (0.0772ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f857b497bfe6ddd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f857b497bfe6ddd000009"} update={"$addToSet"=>{"group_ids"=>"503f857b497bfe6ddd00000b"}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f857b497bfe6ddd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f857b497bfe6ddd000009"]}}} flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f857b497bfe6ddd00000a"} update={"$addToSet"=>{"group_ids"=>"503f857b497bfe6ddd00000b"}} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f857b497bfe6ddd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f857b497bfe6ddd00000a"]}}} flags=[] (0.0577ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00000d", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000009", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f857b497bfe6ddd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3977ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5770ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd00000c"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000009", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00000f", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000009", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000010", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000009", "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000009", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.6580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000009.privileges"=>/r\w*/}, {"acl.503f857b497bfe6ddd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd00000c"} flags=[] limit=0 skip=0 fields=nil (0.4287ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd00000a.privileges"=>/r\w*/}, {"acl.503f857b497bfe6ddd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8807ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2871ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0641ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"354d", "confirmation_key"=>"482da0433d49facf49ff", "settings"=>{}}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f857b497bfe6ddd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4060ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f857b497bfe6ddd000011"} update={"$addToSet"=>{"group_ids"=>"503f857b497bfe6ddd000012"}} flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f857b497bfe6ddd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f857b497bfe6ddd000011"]}}} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f857b497bfe6ddd000012"]}}]}} (0.3171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f857b497bfe6ddd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f857b497bfe6ddd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3569ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3090ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1810ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4182ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"7dee", "confirmation_key"=>"a7e84d7f201125d4e37c", "settings"=>{}}] flags=[] (0.1559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5147ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000015", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4730ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000017", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000019", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000013.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000014"} flags=[] limit=0 skip=0 fields=nil (0.3941ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4752ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000016"} update={"$set"=>{"label_ids"=>["503f857b497bfe6ddd000014"], "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00001b", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00001c", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f857b497bfe6ddd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f857b497bfe6ddd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4439ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000018"} update={"$set"=>{"label_ids"=>["503f857b497bfe6ddd000016"], "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00001e", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00001f", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f857b497bfe6ddd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000013", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4663ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2351ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0508ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3009ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8063", "confirmation_key"=>"badae6ecdf2af885c0dc", "settings"=>{}}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3219ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"1c3a", "confirmation_key"=>"c9a7c536b19c456065f2", "settings"=>{}}] flags=[] (0.0851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000023", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3839ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000024", "version"=>1, "label_ids"=>["503f857b497bfe6ddd000022"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000025", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1361ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3419ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000026", "version"=>1, "label_ids"=>["503f857b497bfe6ddd000024"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000027", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000022"} flags=[] limit=0 skip=0 fields=nil (0.6411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000024"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5629ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000022"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000029", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00002a", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4661ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000024"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f857b497bfe6ddd000022"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00002c", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00002d", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.2522ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000024"} flags=[] limit=0 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4869ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000026"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f857b497bfe6ddd000024"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00002f", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000030", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd000026"} flags=[] limit=0 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000024"} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000026"} flags=[] limit=-1 skip=0 fields=nil (0.2942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7229ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000022"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000032", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000033", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000034", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5958ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000024"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f857b497bfe6ddd000022"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000036", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000037", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000038", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6709ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000026"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f857b497bfe6ddd000024"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00003a", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd00003b", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00003c", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9749ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000022"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00003e", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd00003f", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000040", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000041", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.5488ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6649ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000024"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f857b497bfe6ddd000022"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000043", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000044", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000045", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000046", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6368ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000026"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f857b497bfe6ddd000024"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000048", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000049", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd00004a", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00004b", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00004d", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4821ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd00004c"} update={"$set"=>{"label_ids"=>["503f857b497bfe6ddd000022"], "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{"503f857b497bfe6ddd000022"=>"rw"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00004f", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000050", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f857b497bfe6ddd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{"503f857b497bfe6ddd000022"=>"rw"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.3467ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f857b497bfe6ddd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.2531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2131ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000022"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000052", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000053", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000054", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000055", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000056", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.6580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9661ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000024"} update={"$set"=>{"acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r", "503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f857b497bfe6ddd000022"], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000058", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd000059", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd00005a", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}, {"_id"=>"503f857b497bfe6ddd00005b", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 15:23:39 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00005c", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r", "503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.7062ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f857b497bfe6ddd00005d", "changes"=>{"acl"=>[{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}, "503f857b497bfe6ddd000021"=>{"privileges"=>"r", "inherited"=>{"503f857b497bfe6ddd000024"=>"r", "503f857b497bfe6ddd000022"=>"r"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.2091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00005f", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1473ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4809ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f857b497bfe6ddd00005e"} update={"$set"=>{"label_ids"=>["503f857b497bfe6ddd000022"], "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{"503f857b497bfe6ddd000022"=>"rw"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:23:39 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000061", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}], "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000062", "changes"=>{"_id"=>[nil, "503f857b497bfe6ddd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f857b497bfe6ddd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f857b497bfe6ddd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f857b497bfe6ddd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}, "503f857b497bfe6ddd000021"=>{"privileges"=>"rw", "inherited"=>{"503f857b497bfe6ddd000022"=>"rw"}, "invited"=>"503f857b497bfe6ddd000020", "at"=>2012-08-30 17:23:39 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f857b497bfe6ddd000020", "created_at"=>2012-08-30 15:23:39 UTC}]}} flags=[] (0.4852ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "label_ids"=>"503f857b497bfe6ddd00005e"} flags=[] limit=0 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f857b497bfe6ddd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3150ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0570ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1681ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"19c2", "confirmation_key"=>"a4111cc392edfda2ceb0", "settings"=>{}}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"e735", "confirmation_key"=>"ae8fafbad64a014f9a25", "settings"=>{}}] flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000066", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000063", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1547ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5071ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4709ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd000069", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000063", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4258ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f857b497bfe6ddd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f857b497bfe6ddd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:23:39 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f857b497bfe6ddd00006b", "changes"=>{}, "user_id"=>"503f857b497bfe6ddd000063", "created_at"=>2012-08-30 15:23:39 UTC}]}] flags=[] (0.1471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f857b497bfe6ddd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1211ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f857b497bfe6ddd000065"} flags=[] limit=-1 skip=0 fields=nil (0.4001ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2449ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4082ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3159ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f857b497bfe6ddd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"9918", "confirmation_key"=>"fa1cf2480021bf622e03", "settings"=>{}}] flags=[] (0.0901ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4702ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f857b497bfe6ddd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6678ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1819ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0582ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1528ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4129ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"b194", "confirmation_key"=>"cb96281001d6e4787223", "settings"=>{}}] flags=[] (0.1061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3731ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"031e", "confirmation_key"=>"03485c56602147ff1905", "settings"=>{}}] flags=[] (0.0923ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000004", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000001", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4563ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5429ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000003"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000001", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000006", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000001", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000007", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000001", "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000001", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000003"} flags=[] limit=0 skip=0 fields=nil (0.4249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8592497bfe6fdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7339ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8592497bfe6fdd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8492ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3374ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2532ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2379ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0877ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"cc7d", "confirmation_key"=>"55a08a7974d4fedca432", "settings"=>{}}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5169ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"daf5", "confirmation_key"=>"4bce8725f659c53a0082", "settings"=>{}}] flags=[] (0.1574ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8592497bfe6fdd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.2007ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8592497bfe6fdd000009"} update={"$addToSet"=>{"group_ids"=>"503f8592497bfe6fdd00000b"}} flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8592497bfe6fdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8592497bfe6fdd000009"]}}} flags=[] (0.1199ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8592497bfe6fdd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8592497bfe6fdd00000b"}} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8592497bfe6fdd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8592497bfe6fdd00000a"]}}} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00000d", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000009", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.2260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8592497bfe6fdd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd00000c"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000009", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00000f", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000009", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000010", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000009", "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000009", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000009.privileges"=>/r\w*/}, {"acl.503f8592497bfe6fdd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd00000c"} flags=[] limit=0 skip=0 fields=nil (0.4010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd00000a.privileges"=>/r\w*/}, {"acl.503f8592497bfe6fdd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7141ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2871ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1612ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"ae0c", "confirmation_key"=>"f381263236b24cd0e06c", "settings"=>{}}] flags=[] (0.1152ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8592497bfe6fdd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.3941ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8592497bfe6fdd000011"} update={"$addToSet"=>{"group_ids"=>"503f8592497bfe6fdd000012"}} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8592497bfe6fdd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8592497bfe6fdd000011"]}}} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8592497bfe6fdd000012"]}}]}} (0.4098ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8592497bfe6fdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8592497bfe6fdd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3231ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1867ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0522ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1440ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3688ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"c308", "confirmation_key"=>"15d5294b7fc72bc83802", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4139ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000015", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3109ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000017", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1826ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3049ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000019", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000014"} flags=[] limit=0 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000016"} update={"$set"=>{"label_ids"=>["503f8592497bfe6fdd000014"], "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00001b", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00001c", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8592497bfe6fdd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8592497bfe6fdd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3736ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5310ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000018"} update={"$set"=>{"label_ids"=>["503f8592497bfe6fdd000016"], "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00001e", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00001f", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8592497bfe6fdd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000013", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3343ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000018"} flags=[] limit=-1 skip=0 fields=nil (0.7303ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2959ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0563ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1652ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4799ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8672", "confirmation_key"=>"4a99c41f4286b5feea0c", "settings"=>{}}] flags=[] (0.0892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3462ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3121ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8592497bfe6fdd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"ae13", "confirmation_key"=>"2de68e59ffcf5ab039fd", "settings"=>{}}] flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000023", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3247ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000024", "version"=>1, "label_ids"=>["503f8592497bfe6fdd000022"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000025", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd000026", "version"=>1, "label_ids"=>["503f8592497bfe6fdd000024"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000027", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000022"} flags=[] limit=0 skip=0 fields=nil (0.5572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000024"} flags=[] limit=0 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5379ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000022"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000029", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00002a", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5028ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000024"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8592497bfe6fdd000022"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00002c", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00002d", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.2530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000024"} flags=[] limit=0 skip=0 fields=nil (0.5240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4227ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000026"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8592497bfe6fdd000024"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00002f", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000030", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd000026"} flags=[] limit=0 skip=0 fields=nil (0.4642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.6452ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4852ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7579ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000022"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000032", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000033", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000034", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.4861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5138ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000024"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8592497bfe6fdd000022"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000036", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000037", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000038", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6611ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000026"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8592497bfe6fdd000024"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00003a", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd00003b", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00003c", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.3572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8592497bfe6fdd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9811ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000022"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00003e", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd00003f", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000040", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000041", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.6409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8578ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000024"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8592497bfe6fdd000022"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000043", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000044", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000045", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000046", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.4532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7181ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000026"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8592497bfe6fdd000024"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000048", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000049", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd00004a", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00004b", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.4578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3228ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8592497bfe6fdd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00004d", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4222ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd00004c"} update={"$set"=>{"label_ids"=>["503f8592497bfe6fdd000022"], "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8592497bfe6fdd000022"=>"rw"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00004f", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000050", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8592497bfe6fdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8592497bfe6fdd000022"=>"rw"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.4282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8592497bfe6fdd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8592497bfe6fdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.2388ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3461ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000022"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000052", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000053", "changes"=>{"_id"=>[nil, "503f8592497bfe6fdd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000054", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000055", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000056", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:02 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.6878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8592497bfe6fdd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0290ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000024"} update={"$set"=>{"acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r", "503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8592497bfe6fdd000022"], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8592497bfe6fdd000058", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd000059", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd00005a", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}, {"_id"=>"503f8592497bfe6fdd00005b", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 15:24:02 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8592497bfe6fdd00005c", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r", "503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:02 UTC}]}} flags=[] (0.6611ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8592497bfe6fdd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8593497bfe6fdd00005d", "changes"=>{"acl"=>[{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}}, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:02 UTC}, "503f8592497bfe6fdd000021"=>{"privileges"=>"r", "inherited"=>{"503f8592497bfe6fdd000024"=>"r", "503f8592497bfe6fdd000022"=>"r"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:03 UTC}]}} flags=[] (0.2491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3400ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8593497bfe6fdd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8593497bfe6fdd00005f", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:03 UTC}]}] flags=[] (0.1826ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7811ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8593497bfe6fdd00005e"} update={"$set"=>{"label_ids"=>["503f8592497bfe6fdd000022"], "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8592497bfe6fdd000022"=>"rw"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:24:03 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8593497bfe6fdd000061", "changes"=>{}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:03 UTC}]}], "log_entries"=>[{"_id"=>"503f8593497bfe6fdd000062", "changes"=>{"_id"=>[nil, "503f8593497bfe6fdd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8592497bfe6fdd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8592497bfe6fdd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8592497bfe6fdd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}, "503f8592497bfe6fdd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8592497bfe6fdd000022"=>"rw"}, "invited"=>"503f8592497bfe6fdd000020", "at"=>2012-08-30 17:24:02 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8592497bfe6fdd000020", "created_at"=>2012-08-30 15:24:03 UTC}]}} flags=[] (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8593497bfe6fdd00005e"} flags=[] limit=0 skip=0 fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8592497bfe6fdd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8592497bfe6fdd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.6341ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2222ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0546ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8593497bfe6fdd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4141ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8593497bfe6fdd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"30e2", "confirmation_key"=>"ead93a0822806b895806", "settings"=>{}}] flags=[] (0.0792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8593497bfe6fdd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8593497bfe6fdd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"c6ca", "confirmation_key"=>"67a1176c8f76fb59915c", "settings"=>{}}] flags=[] (0.0823ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3712ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8593497bfe6fdd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8593497bfe6fdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8593497bfe6fdd000066", "changes"=>{}, "user_id"=>"503f8593497bfe6fdd000063", "created_at"=>2012-08-30 15:24:03 UTC}]}] flags=[] (0.1516ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4988ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4520ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8593497bfe6fdd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8593497bfe6fdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8593497bfe6fdd000069", "changes"=>{}, "user_id"=>"503f8593497bfe6fdd000063", "created_at"=>2012-08-30 15:24:03 UTC}]}] flags=[] (0.1791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8593497bfe6fdd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8593497bfe6fdd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8593497bfe6fdd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:24:03 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8593497bfe6fdd00006b", "changes"=>{}, "user_id"=>"503f8593497bfe6fdd000063", "created_at"=>2012-08-30 15:24:03 UTC}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8593497bfe6fdd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8593497bfe6fdd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4330ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8593497bfe6fdd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8593497bfe6fdd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3130ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8593497bfe6fdd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3979ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8593497bfe6fdd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"d509", "confirmation_key"=>"44d8c81ef639fe8e66f0", "settings"=>{}}] flags=[] (0.0868ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4141ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4838ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8593497bfe6fdd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6571ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1800ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f859a497bfe70dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f859a497bfe70dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f389", "confirmation_key"=>"42d38f50f752072fb5d6", "settings"=>{}}] flags=[] (0.1140ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4618ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f859a497bfe70dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6781ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2060ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0603ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3483ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3178ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85ec497bfe71dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4599ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f85ec497bfe71dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"03c1", "confirmation_key"=>"27c51538c223dc136453", "settings"=>{}}] flags=[] (0.1352ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85ec497bfe71dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3421ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f85ec497bfe71dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"47f5", "confirmation_key"=>"22a31fb00e3244d1cd7e", "settings"=>{}}] flags=[] (0.1249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85ec497bfe71dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5488ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.8380ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4287ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85f7497bfe72dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f85f7497bfe72dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"ae4d", "confirmation_key"=>"0ca88fde33d7abfcc9aa", "settings"=>{}}] flags=[] (0.1149ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85f7497bfe72dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4392ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f85f7497bfe72dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"83a1", "confirmation_key"=>"a91e205a45df1c8e5b27", "settings"=>{}}] flags=[] (0.0913ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f85f7497bfe72dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6640ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4170ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.7198ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4928ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8662497bfe73dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8662497bfe73dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4590ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7041ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1979ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5312ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3610ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4132ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f867f497bfe76dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f867f497bfe76dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2801ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3669ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4568ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86e4497bfe7add000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4721ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f86e4497bfe7add000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dc9c", "confirmation_key"=>"417b5c02fcb2eeaa5c0f", "settings"=>{}}] flags=[] (0.1149ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86e4497bfe7add000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f86e4497bfe7add000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"b802", "confirmation_key"=>"810e6b60bb159f5cabf2", "settings"=>{}}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86e4497bfe7add000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6721ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1791ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5162ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86ee497bfe7bdd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f86ee497bfe7bdd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"aa2c", "confirmation_key"=>"09a250051408930c25b8", "settings"=>{}}] flags=[] (0.1130ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4833ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86ee497bfe7bdd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3521ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f86ee497bfe7bdd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"551d", "confirmation_key"=>"a429ee9b50a5ae11e6d2", "settings"=>{}}] flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f86ee497bfe7bdd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5383ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3831ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.7160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4263ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3452ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8750497bfe7ddd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8750497bfe7ddd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3839", "confirmation_key"=>"9581b322678e16d051e9", "settings"=>{}}] flags=[] (0.2439ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5093ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8750497bfe7ddd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4609ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8750497bfe7ddd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"8838", "confirmation_key"=>"223a98936ca71b77e37d", "settings"=>{}}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8750497bfe7ddd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4952ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6592ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f876e497bfe80dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4811ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f876e497bfe80dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"83c8", "confirmation_key"=>"0e7876dba2bfa3e2df68", "settings"=>{}}] flags=[] (0.1161ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f876e497bfe80dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f876e497bfe80dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"7598", "confirmation_key"=>"74729d02c5c0f7b05ac7", "settings"=>{}}] flags=[] (0.0951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f876e497bfe80dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7949ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.6394ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f877e497bfe81dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3343ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f877e497bfe81dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f19a", "confirmation_key"=>"b89edca8282324806ef5", "settings"=>{}}] flags=[] (0.1411ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3858ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f877e497bfe81dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f877e497bfe81dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"0e55", "confirmation_key"=>"9b3dfb9e534aae4a0ad6", "settings"=>{}}] flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f877e497bfe81dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8829ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2491ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (1.2150ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0613ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4952ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"e079", "confirmation_key"=>"90463145a42965c5ee55", "settings"=>{}}] flags=[] (0.1152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f5ef", "confirmation_key"=>"f667140479fec5a5c493", "settings"=>{}}] flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000004", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000001", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.2389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5560ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000003"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000001", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000006", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000001", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000007", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000001", "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000001", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.9308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000001.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000003"} flags=[] limit=0 skip=0 fields=nil (0.7181ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f879d497bfe82dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8521ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f879d497bfe82dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8032ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3591ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1812ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1750ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3042ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"398f", "confirmation_key"=>"4bb74530b9cade9681f6", "settings"=>{}}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3042ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"da85", "confirmation_key"=>"9d61bcff6444dee1e782", "settings"=>{}}] flags=[] (0.1001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f879d497bfe82dd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f879d497bfe82dd000009"} update={"$addToSet"=>{"group_ids"=>"503f879d497bfe82dd00000b"}} flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f879d497bfe82dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f879d497bfe82dd000009"]}}} flags=[] (0.1719ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f879d497bfe82dd00000a"} update={"$addToSet"=>{"group_ids"=>"503f879d497bfe82dd00000b"}} flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f879d497bfe82dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f879d497bfe82dd00000a"]}}} flags=[] (0.1190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00000d", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000009", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1588ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f879d497bfe82dd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.5088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5229ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd00000c"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000009", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00000f", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000009", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000010", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000009", "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000009", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000009.privileges"=>/r\w*/}, {"acl.503f879d497bfe82dd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd00000c"} flags=[] limit=0 skip=0 fields=nil (0.5269ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd00000a.privileges"=>/r\w*/}, {"acl.503f879d497bfe82dd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6399ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1872ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"e67a", "confirmation_key"=>"272170a3ab2ba0b19bae", "settings"=>{}}] flags=[] (0.0980ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f879d497bfe82dd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0672ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4213ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f879d497bfe82dd000011"} update={"$addToSet"=>{"group_ids"=>"503f879d497bfe82dd000012"}} flags=[] (0.0830ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f879d497bfe82dd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f879d497bfe82dd000011"]}}} flags=[] (0.0699ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f879d497bfe82dd000012"]}}]}} (0.3283ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f879d497bfe82dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f879d497bfe82dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3119ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1829ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1690ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2818ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"74f2", "confirmation_key"=>"b58dec84c2b07e42be26", "settings"=>{}}] flags=[] (0.0811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2930ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000015", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3619ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000017", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000019", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000013.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000014"} flags=[] limit=0 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4299ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000016"} update={"$set"=>{"label_ids"=>["503f879d497bfe82dd000014"], "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00001b", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00001c", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f879d497bfe82dd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000016"} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f879d497bfe82dd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4308ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4423ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000018"} update={"$set"=>{"label_ids"=>["503f879d497bfe82dd000016"], "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00001e", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00001f", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f879d497bfe82dd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000013", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3278ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4611ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2708ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0482ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2899ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"443d", "confirmation_key"=>"026590f5261f5631f7e5", "settings"=>{}}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3121ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"9aa0", "confirmation_key"=>"e2926c19e620a91b940e", "settings"=>{}}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2587ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000023", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3190ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000024", "version"=>1, "label_ids"=>["503f879d497bfe82dd000022"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000025", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000026", "version"=>1, "label_ids"=>["503f879d497bfe82dd000024"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000027", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000022"} flags=[] limit=0 skip=0 fields=nil (0.5789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6568ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000022"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000029", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00002a", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.4072ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6909ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000024"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f879d497bfe82dd000022"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00002c", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00002d", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000024"} flags=[] limit=0 skip=0 fields=nil (0.5610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5121ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000026"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f879d497bfe82dd000024"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00002f", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000030", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.2551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd000026"} flags=[] limit=0 skip=0 fields=nil (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.3679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7038ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000022"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000032", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000033", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000034", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5889ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000024"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f879d497bfe82dd000022"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000036", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000037", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000038", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5047ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000026"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f879d497bfe82dd000024"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00003a", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd00003b", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00003c", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3703ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.5338ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9880ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000022"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00003e", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd00003f", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000040", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000041", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.5622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7429ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000024"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f879d497bfe82dd000022"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000043", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000044", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000045", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000046", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.4833ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7532ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000026"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f879d497bfe82dd000024"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000048", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000049", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd00004a", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00004b", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.5062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3531ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00004d", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4871ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd00004c"} update={"$set"=>{"label_ids"=>["503f879d497bfe82dd000022"], "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f879d497bfe82dd000022"=>"rw"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00004f", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000050", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f879d497bfe82dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f879d497bfe82dd000022"=>"rw"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.3471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3343ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f879d497bfe82dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.0712ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1191ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000022"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000052", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000053", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000054", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000055", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000056", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.7110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1201ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000024"} update={"$set"=>{"acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r", "503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f879d497bfe82dd000022"], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000058", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd000059", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd00005a", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}, {"_id"=>"503f879d497bfe82dd00005b", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 15:32:45 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd00005c", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r", "503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.6371ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f879d497bfe82dd00005d", "changes"=>{"acl"=>[{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}, "503f879d497bfe82dd000021"=>{"privileges"=>"r", "inherited"=>{"503f879d497bfe82dd000024"=>"r", "503f879d497bfe82dd000022"=>"r"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.1810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4058ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00005f", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3707ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f879d497bfe82dd00005e"} update={"$set"=>{"label_ids"=>["503f879d497bfe82dd000022"], "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f879d497bfe82dd000022"=>"rw"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 15:32:45 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000061", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}], "log_entries"=>[{"_id"=>"503f879d497bfe82dd000062", "changes"=>{"_id"=>[nil, "503f879d497bfe82dd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f879d497bfe82dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f879d497bfe82dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f879d497bfe82dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}, "503f879d497bfe82dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f879d497bfe82dd000022"=>"rw"}, "invited"=>"503f879d497bfe82dd000020", "at"=>2012-08-30 17:32:45 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f879d497bfe82dd000020", "created_at"=>2012-08-30 15:32:45 UTC}]}} flags=[] (0.4978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f879d497bfe82dd00005e"} flags=[] limit=0 skip=0 fields=nil (0.3657ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f879d497bfe82dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4298ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4468ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0567ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1919ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0427ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"08df", "confirmation_key"=>"294c28f0a73d2724d762", "settings"=>{}}] flags=[] (0.0913ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"0afa", "confirmation_key"=>"bb627e93b9cc2bd6b538", "settings"=>{}}] flags=[] (0.0832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000066", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000063", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4659ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd000069", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000063", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f879d497bfe82dd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f879d497bfe82dd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f879d497bfe82dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 17:32:45 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f879d497bfe82dd00006b", "changes"=>{}, "user_id"=>"503f879d497bfe82dd000063", "created_at"=>2012-08-30 15:32:45 UTC}]}] flags=[] (0.1578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4103ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f879d497bfe82dd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f879d497bfe82dd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3102ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2701ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"dfa4", "confirmation_key"=>"b47890ac901dc6468333", "settings"=>{}}] flags=[] (0.0930ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.5310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f879d497bfe82dd00006d", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"2acc", "confirmation_key"=>"9adfead15fddc30a5e78", "settings"=>{}}] flags=[] (0.0899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f879d497bfe82dd00006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8450ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4637ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1678ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4232ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"541d", "confirmation_key"=>"c97fe3032192303a2629", "settings"=>{}}] flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"05f7", "confirmation_key"=>"f6a8e33ae53f9a002235", "settings"=>{}}] flags=[] (0.0889ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3960ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000004", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000001", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1822ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5732ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4473ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5629ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000003"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000001", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000006", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000001", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000007", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000001", "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000001", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.4160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000003"} flags=[] limit=0 skip=0 fields=nil (0.4442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7012ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8ea4497bfee0dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5250ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8ea4497bfee0dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7019ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3622ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1519ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0446ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1419ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3781ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"80b0", "confirmation_key"=>"cbc67ec481d47a788cb2", "settings"=>{}}] flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6ef9", "confirmation_key"=>"99eb8e23918f78d0da15", "settings"=>{}}] flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8ea4497bfee0dd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0911ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ea4497bfee0dd000009"} update={"$addToSet"=>{"group_ids"=>"503f8ea4497bfee0dd00000b"}} flags=[] (0.1118ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ea4497bfee0dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ea4497bfee0dd000009"]}}} flags=[] (0.0892ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ea4497bfee0dd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8ea4497bfee0dd00000b"}} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ea4497bfee0dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ea4497bfee0dd00000a"]}}} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4141ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00000d", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000009", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8ea4497bfee0dd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6349ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd00000c"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000009", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00000f", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000009", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000010", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000009", "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000009", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.6692ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000009.privileges"=>/r\w*/}, {"acl.503f8ea4497bfee0dd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd00000c"} flags=[] limit=0 skip=0 fields=nil (0.5741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd00000a.privileges"=>/r\w*/}, {"acl.503f8ea4497bfee0dd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1802ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1159ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (1.1487ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2618ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"a071", "confirmation_key"=>"6d326e481ff3758ce735", "settings"=>{}}] flags=[] (0.1390ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8ea4497bfee0dd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.1400ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4783ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ea4497bfee0dd000011"} update={"$addToSet"=>{"group_ids"=>"503f8ea4497bfee0dd000012"}} flags=[] (0.1080ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ea4497bfee0dd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ea4497bfee0dd000011"]}}} flags=[] (0.0870ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8ea4497bfee0dd000012"]}}]}} (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8ea4497bfee0dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8ea4497bfee0dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3388ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2759ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1583ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2372ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"9cf8", "confirmation_key"=>"b13b77d5a2f0db0d0bdf", "settings"=>{}}] flags=[] (0.0882ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2611ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000015", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3328ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000017", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8001ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000019", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000014"} flags=[] limit=0 skip=0 fields=nil (0.5369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4458ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000016"} update={"$set"=>{"label_ids"=>["503f8ea4497bfee0dd000014"], "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00001b", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00001c", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ea4497bfee0dd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000016"} flags=[] limit=-1 skip=0 fields=nil (0.5219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ea4497bfee0dd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.6299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.4311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6692ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000018"} update={"$set"=>{"label_ids"=>["503f8ea4497bfee0dd000016"], "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00001e", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00001f", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ea4497bfee0dd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000013", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2000ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1662ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"89be", "confirmation_key"=>"64dcc9ebbed1ad3d60ba", "settings"=>{}}] flags=[] (0.0842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"a0c6", "confirmation_key"=>"06e4a15918ae567984c5", "settings"=>{}}] flags=[] (0.0820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000023", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3760ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000024", "version"=>1, "label_ids"=>["503f8ea4497bfee0dd000022"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000025", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3719ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000026", "version"=>1, "label_ids"=>["503f8ea4497bfee0dd000024"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000027", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000022"} flags=[] limit=0 skip=0 fields=nil (0.5691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000022"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000029", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00002a", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5882ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000024"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8ea4497bfee0dd000022"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00002c", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00002d", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.2670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000024"} flags=[] limit=0 skip=0 fields=nil (0.5431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4077ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000026"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8ea4497bfee0dd000024"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00002f", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000030", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.2623ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd000026"} flags=[] limit=0 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8142ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000022"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000032", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000033", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000034", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.4730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6011ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000024"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8ea4497bfee0dd000022"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000036", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000037", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000038", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6101ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000026"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8ea4497bfee0dd000024"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00003a", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd00003b", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00003c", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3393ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2677ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4702ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9871ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000022"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00003e", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd00003f", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000040", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000041", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.6170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000024"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8ea4497bfee0dd000022"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000043", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000044", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000045", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000046", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.4411ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7000ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000026"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8ea4497bfee0dd000024"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000048", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000049", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd00004a", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00004b", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.4399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4013ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00004d", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1502ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3989ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd00004c"} update={"$set"=>{"label_ids"=>["503f8ea4497bfee0dd000022"], "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rw"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00004f", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000050", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ea4497bfee0dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rw"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd00004c"} flags=[] limit=0 skip=0 fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ea4497bfee0dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2910ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000022"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000052", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000053", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000054", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000055", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000056", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.7071ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9708ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000024"} update={"$set"=>{"acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r", "503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8ea4497bfee0dd000022"], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000058", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd000059", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd00005a", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}, {"_id"=>"503f8ea4497bfee0dd00005b", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 16:02:44 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00005c", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r", "503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (33.6142ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00005d", "changes"=>{"acl"=>[{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ea4497bfee0dd000024"=>"r", "503f8ea4497bfee0dd000022"=>"r"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.2172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (13.9410ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00005f", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7141ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ea4497bfee0dd00005e"} update={"$set"=>{"label_ids"=>["503f8ea4497bfee0dd000022"], "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rw"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:02:44 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000061", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}], "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000062", "changes"=>{"_id"=>[nil, "503f8ea4497bfee0dd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ea4497bfee0dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ea4497bfee0dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}, "503f8ea4497bfee0dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ea4497bfee0dd000022"=>"rw"}, "invited"=>"503f8ea4497bfee0dd000020", "at"=>2012-08-30 18:02:44 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8ea4497bfee0dd000020", "created_at"=>2012-08-30 16:02:44 UTC}]}} flags=[] (0.5188ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ea4497bfee0dd00005e"} flags=[] limit=0 skip=0 fields=nil (0.4802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ea4497bfee0dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.8089ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2129ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0548ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1483ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2100ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3033ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f35f", "confirmation_key"=>"e165c57f77ae6b045ad9", "settings"=>{}}] flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2980ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"b2e1", "confirmation_key"=>"62950e93628542c3aa8f", "settings"=>{}}] flags=[] (0.0722ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2828ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000066", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000063", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7412ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5319ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd000069", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000063", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1867ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4919ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ea4497bfee0dd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ea4497bfee0dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:02:44 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ea4497bfee0dd00006b", "changes"=>{}, "user_id"=>"503f8ea4497bfee0dd000063", "created_at"=>2012-08-30 16:02:44 UTC}]}] flags=[] (0.1547ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ea4497bfee0dd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ea4497bfee0dd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3362ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1922ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3383ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3150ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"2e6b", "confirmation_key"=>"f1fc643c6cabdaa1d276", "settings"=>{}}] flags=[] (0.0799ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4117ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3462ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ea4497bfee0dd00006d", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"65bb", "confirmation_key"=>"2c6165c7b74f5ea151cb", "settings"=>{}}] flags=[] (0.0901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ea4497bfee0dd00006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6900ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1969ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1552ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb5497bfee1dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"6a59", "confirmation_key"=>"d7acd21ad5b1f7fbfa2f", "settings"=>{}}] flags=[] (0.1171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3922ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3819ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb5497bfee1dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"f959", "confirmation_key"=>"184600f6e4699335ac21", "settings"=>{}}] flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb5497bfee1dd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb5497bfee1dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:01 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb5497bfee1dd000004", "changes"=>{}, "user_id"=>"503f8eb5497bfee1dd000001", "created_at"=>2012-08-30 16:03:01 UTC}]}] flags=[] (0.1872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4840ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb5497bfee1dd000003"} update={"$set"=>{"acl"=>{"503f8eb5497bfee1dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:01 +0200}, "503f8eb5497bfee1dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb5497bfee1dd000001", "at"=>2012-08-30 18:03:01 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb5497bfee1dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:01 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb5497bfee1dd000006", "changes"=>{}, "user_id"=>"503f8eb5497bfee1dd000001", "created_at"=>2012-08-30 16:03:01 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb5497bfee1dd000007", "changes"=>{"_id"=>[nil, "503f8eb5497bfee1dd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb5497bfee1dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:01 +0200}, "503f8eb5497bfee1dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb5497bfee1dd000001", "at"=>2012-08-30 18:03:01 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb5497bfee1dd000001", "created_at"=>2012-08-30 16:03:01 UTC}]}} flags=[] (0.3881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8eb5497bfee1dd000003"} flags=[] limit=0 skip=0 fields=nil (0.4458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8eb5497bfee1dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6390ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8eb5497bfee1dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2730ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1619ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0467ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1602ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb5497bfee1dd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"6fdc", "confirmation_key"=>"a1978f73caef608b1141", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb5497bfee1dd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3140ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb5497bfee1dd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"78e9", "confirmation_key"=>"5b8a6d8b6ced06269fd0", "settings"=>{}}] flags=[] (0.0799ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8eb6497bfee1dd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0992ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8eb5497bfee1dd000009"} update={"$addToSet"=>{"group_ids"=>"503f8eb6497bfee1dd00000b"}} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8eb6497bfee1dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8eb5497bfee1dd000009"]}}} flags=[] (0.0849ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8eb5497bfee1dd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8eb6497bfee1dd00000b"}} flags=[] (0.0598ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8eb6497bfee1dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8eb5497bfee1dd00000a"]}}} flags=[] (0.0579ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4082ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb5497bfee1dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00000d", "changes"=>{}, "user_id"=>"503f8eb5497bfee1dd000009", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1793ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8eb6497bfee1dd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5190ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd00000c"} update={"$set"=>{"acl"=>{"503f8eb5497bfee1dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb5497bfee1dd000009", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb5497bfee1dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00000f", "changes"=>{}, "user_id"=>"503f8eb5497bfee1dd000009", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000010", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb5497bfee1dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb5497bfee1dd000009", "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb5497bfee1dd000009", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3860ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd000009.privileges"=>/r\w*/}, {"acl.503f8eb6497bfee1dd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd00000c"} flags=[] limit=0 skip=0 fields=nil (0.4070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb5497bfee1dd00000a.privileges"=>/r\w*/}, {"acl.503f8eb6497bfee1dd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6890ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2539ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1500ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2923ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3142ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"0a19", "confirmation_key"=>"46e27392c33ac9671182", "settings"=>{}}] flags=[] (0.0808ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8eb6497bfee1dd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.4139ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8eb6497bfee1dd000011"} update={"$addToSet"=>{"group_ids"=>"503f8eb6497bfee1dd000012"}} flags=[] (0.0761ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8eb6497bfee1dd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8eb6497bfee1dd000011"]}}} flags=[] (0.0708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8eb6497bfee1dd000012"]}}]}} (0.3252ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8eb6497bfee1dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8eb6497bfee1dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3991ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.1869ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2260ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5069ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"4d4a", "confirmation_key"=>"2fe05ba2ed4aea556ce1", "settings"=>{}}] flags=[] (0.1547ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000015", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.2019ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4783ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000017", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3550ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000019", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1402ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd000014"} flags=[] limit=0 skip=0 fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4308ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000016"} update={"$set"=>{"label_ids"=>["503f8eb6497bfee1dd000014"], "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00001b", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00001c", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8eb6497bfee1dd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000016"} flags=[] limit=-1 skip=0 fields=nil (0.4323ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8eb6497bfee1dd000014"]}} flags=[] limit=0 skip=0 fields=nil (0.5422ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000018"} update={"$set"=>{"label_ids"=>["503f8eb6497bfee1dd000016"], "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00001e", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00001f", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8eb6497bfee1dd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000013", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000018"} flags=[] limit=-1 skip=0 fields=nil (0.4890ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2632ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0939ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2999ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4761ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"d5b9", "confirmation_key"=>"9381c250b3823934bf72", "settings"=>{}}] flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"121b", "confirmation_key"=>"41273f0872c11a622b66", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3738ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000023", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3889ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000024", "version"=>1, "label_ids"=>["503f8eb6497bfee1dd000022"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000025", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3691ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000026", "version"=>1, "label_ids"=>["503f8eb6497bfee1dd000024"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000027", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd000022"} flags=[] limit=0 skip=0 fields=nil (0.5791ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6447ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000022"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000029", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00002a", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4230ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000024"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8eb6497bfee1dd000022"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00002c", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00002d", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd000024"} flags=[] limit=0 skip=0 fields=nil (0.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4020ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000026"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8eb6497bfee1dd000024"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00002f", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000030", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.2429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd000026"} flags=[] limit=0 skip=0 fields=nil (0.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.4606ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.3138ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8149ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000022"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000032", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000033", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000034", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.4771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6049ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000024"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8eb6497bfee1dd000022"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000036", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000037", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000038", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5791ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000026"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8eb6497bfee1dd000024"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00003a", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd00003b", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00003c", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.4673ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8943ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000022"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00003e", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd00003f", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000040", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000041", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.5441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7241ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000024"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8eb6497bfee1dd000022"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000043", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000044", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000045", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000046", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.4449ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7067ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000026"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8eb6497bfee1dd000024"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000048", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000049", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd00004a", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00004b", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2942ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00004d", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4790ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd00004c"} update={"$set"=>{"label_ids"=>["503f8eb6497bfee1dd000022"], "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rw"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00004f", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000050", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8eb6497bfee1dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rw"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd00004c"} flags=[] limit=0 skip=0 fields=nil (0.4249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8eb6497bfee1dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1473ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.1692ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000022"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000052", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000053", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000054", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000055", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000056", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.6521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9570ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000024"} update={"$set"=>{"acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r", "503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8eb6497bfee1dd000022"], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000058", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd000059", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd00005a", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}, {"_id"=>"503f8eb6497bfee1dd00005b", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 16:03:02 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00005c", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r", "503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (31.8720ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00005d", "changes"=>{"acl"=>[{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8eb6497bfee1dd000024"=>"r", "503f8eb6497bfee1dd000022"=>"r"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.2062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4220ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00005f", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5083ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8eb6497bfee1dd00005e"} update={"$set"=>{"label_ids"=>["503f8eb6497bfee1dd000022"], "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rw"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:02 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000061", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}], "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000062", "changes"=>{"_id"=>[nil, "503f8eb6497bfee1dd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8eb6497bfee1dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8eb6497bfee1dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}, "503f8eb6497bfee1dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8eb6497bfee1dd000022"=>"rw"}, "invited"=>"503f8eb6497bfee1dd000020", "at"=>2012-08-30 18:03:02 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8eb6497bfee1dd000020", "created_at"=>2012-08-30 16:03:02 UTC}]}} flags=[] (0.3479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8eb6497bfee1dd00005e"} flags=[] limit=0 skip=0 fields=nil (0.3493ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8eb6497bfee1dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.4989ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2131ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0541ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1490ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.2789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3059ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"f555", "confirmation_key"=>"f125e831c1f77ff303cf", "settings"=>{}}] flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3312ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3099ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"a829", "confirmation_key"=>"f917a7bc017e3d265bf4", "settings"=>{}}] flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3681ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000066", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000063", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4947ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4618ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd000069", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000063", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4480ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8eb6497bfee1dd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8eb6497bfee1dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:02 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8eb6497bfee1dd00006b", "changes"=>{}, "user_id"=>"503f8eb6497bfee1dd000063", "created_at"=>2012-08-30 16:03:02 UTC}]}] flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3600ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8eb6497bfee1dd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8eb6497bfee1dd000065"} flags=[] limit=-1 skip=0 fields=nil (0.3211ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1950ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3242ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"3546", "confirmation_key"=>"52a5e254d88abce3e542", "settings"=>{}}] flags=[] (0.0830ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3653ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4938ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8eb6497bfee1dd00006d", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"eb5e", "confirmation_key"=>"5e24f5681d1a15294260", "settings"=>{}}] flags=[] (0.0892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8eb6497bfee1dd00006e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4828ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8199ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2458ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.1059ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.4716ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000001", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000001", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"509d", "confirmation_key"=>"6ede1b3c23bb486ecdba", "settings"=>{}}] flags=[] (0.1101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000002", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000002", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7551", "confirmation_key"=>"27cc5f20c7c1a32b6f8d", "settings"=>{}}] flags=[] (0.0882ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4399ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000003", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000004", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000001", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000001.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000003", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5648ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000003"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000001", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000006", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000001", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000007", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000003"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000001"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000002"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000001", "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000001", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000001.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000003"} flags=[] limit=0 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8ecf497bfee2dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000003", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9081ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc1", "$or"=>[{"acl.503f8ecf497bfee2dd000002.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8180ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3779ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1910ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.1578ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3581ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000009", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3982ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000009", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"7f9e", "confirmation_key"=>"f5813872a1a7bdde104e", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00000a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3631ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd00000a", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"8538", "confirmation_key"=>"68208a934e63dd906f38", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8ecf497bfee2dd00000b", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ecf497bfee2dd000009"} update={"$addToSet"=>{"group_ids"=>"503f8ecf497bfee2dd00000b"}} flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ecf497bfee2dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ecf497bfee2dd000009"]}}} flags=[] (0.0880ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ecf497bfee2dd00000a"} update={"$addToSet"=>{"group_ids"=>"503f8ecf497bfee2dd00000b"}} flags=[] (0.0768ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ecf497bfee2dd00000b"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ecf497bfee2dd00000a"]}}} flags=[] (0.0749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4160ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd00000c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00000d", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000009", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1953ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>["503f8ecf497bfee2dd00000b"]}}]} flags=[] limit=0 skip=0 fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00000c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.2960ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd00000c"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000009", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00000f", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000009", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000010", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd00000c"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000009"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd00000b"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000009", "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000009", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000009.privileges"=>/r\w*/}, {"acl.503f8ecf497bfee2dd00000b.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd00000c"} flags=[] limit=0 skip=0 fields=nil (0.4711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd00000a.privileges"=>/r\w*/}, {"acl.503f8ecf497bfee2dd00000b.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.3722ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0780ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{}} (0.2770ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_groups selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"u@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4132ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000011", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4132ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000011", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"u@test.com", "salt"=>"23de", "confirmation_key"=>"cbf32d892c441a36d940", "settings"=>{}}] flags=[] (0.1152ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_groups documents=[{"_id"=>"503f8ecf497bfee2dd000012", "user_ids"=>[], "name"=>"g"}] flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>[]}}]}} (0.5140ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_users selector={"_id"=>"503f8ecf497bfee2dd000011"} update={"$addToSet"=>{"group_ids"=>"503f8ecf497bfee2dd000012"}} flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=tas10_groups selector={"_id"=>"503f8ecf497bfee2dd000012"} update={"$addToSet"=>{"user_ids"=>{"$each"=>["503f8ecf497bfee2dd000011"]}}} flags=[] (0.1228ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_groups, :query=>{"$and"=>[{"_id"=>{"$in"=>["503f8ecf497bfee2dd000012"]}}]}} (0.4239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8ecf497bfee2dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"deleted_at"=>nil, "$and"=>[{"_id"=>{"$in"=>["503f8ecf497bfee2dd000011"]}}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.4227ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0710ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2429ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0713ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000013", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4570ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000013", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"3152", "confirmation_key"=>"9edf8d6e027fa212f748", "settings"=>{}}] flags=[] (0.1490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000014", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6688ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000014", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000015", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000016", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000017", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000018", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000019", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.2251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000013.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000014"} flags=[] limit=0 skip=0 fields=nil (0.5381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000016", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5441ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000016"} update={"$set"=>{"label_ids"=>["503f8ecf497bfee2dd000014"], "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00001b", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00001c", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000016"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ecf497bfee2dd000014"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000014"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc2"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.4032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000016"} flags=[] limit=-1 skip=0 fields=nil (0.6120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ecf497bfee2dd000014"]}} flags=[] limit=0 skip=0 fields=nil (1.0378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000013.privileges"=>/r\w*/}], "_id"=>{"$in"=>[]}} flags=[] limit=0 skip=0 fields=nil (0.8140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000018", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6630ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000018"} update={"$set"=>{"label_ids"=>["503f8ecf497bfee2dd000016"], "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00001e", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00001f", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000018"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ecf497bfee2dd000016"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000013"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000016"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc3"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000013", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000018"} flags=[] limit=-1 skip=0 fields=nil (0.5820ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.2842ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0572ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1533ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"b@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000020", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3898ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000020", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"b@test.com", "salt"=>"227b", "confirmation_key"=>"ff57aa1452e99538ae79", "settings"=>{}}] flags=[] (0.0930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"a@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000021", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000021", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"a@test.com", "salt"=>"e420", "confirmation_key"=>"405c928d383c71c55fc0", "settings"=>{}}] flags=[] (0.0861ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3791ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000022", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000023", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3300ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000024", "version"=>1, "label_ids"=>["503f8ecf497bfee2dd000022"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000025", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3703ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000026", "version"=>1, "label_ids"=>["503f8ecf497bfee2dd000024"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000027", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000022"} flags=[] limit=0 skip=0 fields=nil (0.5672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000022", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.6087ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000022"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000029", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00002a", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000024", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4621ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000024"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8ecf497bfee2dd000022"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00002c", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00002d", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.2911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000024"} flags=[] limit=0 skip=0 fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000026", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4239ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000026"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>["503f8ecf497bfee2dd000024"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00002f", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000030", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.2561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd000026"} flags=[] limit=0 skip=0 fields=nil (0.4051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.3390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.2961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000022", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7701ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000022"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000032", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000033", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000034", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.4780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000024", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5970ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000024"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8ecf497bfee2dd000022"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000036", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000037", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000038", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000026", "$or"=>[{"version"=>2}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000026"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "version"=>3}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>2, "label_ids"=>["503f8ecf497bfee2dd000024"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00003a", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd00003b", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00003c", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000024"} flags=[] limit=-1 skip=0 fields=nil (0.5400ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_groups selector={"$and"=>[{"_id"=>{"$in"=>[]}}]} flags=[] limit=0 skip=0 fields=nil (0.2680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000026"} flags=[] limit=-1 skip=0 fields=nil (0.4680ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000022", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.8371ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000022"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00003e", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd00003f", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000040", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000041", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.5341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000024", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7200ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000024"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8ecf497bfee2dd000022"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000043", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000044", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000045", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000046", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000026", "$or"=>[{"version"=>3}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7229ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000026"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>4}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>3, "label_ids"=>["503f8ecf497bfee2dd000024"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000048", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000049", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd00004a", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00004b", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[2, 3]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.4530ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4170ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd00004c", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00004d", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1483ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00004c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4840ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd00004c"} update={"$set"=>{"label_ids"=>["503f8ecf497bfee2dd000022"], "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rw"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc4", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00004f", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000050", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd00004c"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ecf497bfee2dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rw"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc4"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd00004c"} flags=[] limit=0 skip=0 fields=nil (0.3669ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc4", "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ecf497bfee2dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.1501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000022", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (1.3170ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000022"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000052", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000053", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd000022"], "version"=>[nil, 1], "label_ids"=>[nil, []], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}], "name"=>[nil, "doc1"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000054", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000055", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000056", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.7279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000024", "$or"=>[{"version"=>4}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.9279ms)
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000024"} update={"$set"=>{"acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r", "503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>5}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>4, "label_ids"=>["503f8ecf497bfee2dd000022"], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000058", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd000059", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd00005a", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[1, 2]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}, {"_id"=>"503f8ecf497bfee2dd00005b", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 16:03:27 UTC}}], "version"=>[2, 3]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00005c", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r", "503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.5949ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd000026"} update={"$pushAll"=>{"log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00005d", "changes"=>{"acl"=>[{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"r", "inherited"=>{"503f8ecf497bfee2dd000024"=>"r", "503f8ecf497bfee2dd000022"=>"r"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "version"=>[3, 4]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.2542ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4199ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd00005e", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00005f", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00005e", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4981ms)
WARNING: Can't mass-assign protected attributes: _id
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"_id"=>"503f8ecf497bfee2dd00005e"} update={"$set"=>{"label_ids"=>["503f8ecf497bfee2dd000022"], "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rw"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}, "version"=>2}, "$pushAll"=>{"versions"=>[{"_id"=>nil, "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 16:03:27 UTC}}, "name"=>"doc5", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000061", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}], "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000062", "changes"=>{"_id"=>[nil, "503f8ecf497bfee2dd00005e"], "version"=>[nil, 1], "label_ids"=>[nil, ["503f8ecf497bfee2dd000022"]], "pos"=>[nil, 99], "acl"=>[nil, {"503f8ecf497bfee2dd000020"=>{"privileges"=>"rwsd", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rwsd"}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}, "503f8ecf497bfee2dd000021"=>{"privileges"=>"rw", "inherited"=>{"503f8ecf497bfee2dd000022"=>"rw"}, "invited"=>"503f8ecf497bfee2dd000020", "at"=>2012-08-30 18:03:27 +0200}}], "name"=>[nil, "doc5"], "starred"=>[nil, false]}, "user_id"=>"503f8ecf497bfee2dd000020", "created_at"=>2012-08-30 16:03:27 UTC}]}} flags=[] (0.3939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "label_ids"=>"503f8ecf497bfee2dd00005e"} flags=[] limit=0 skip=0 fields=nil (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "name"=>"doc5", "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.7989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000020.privileges"=>/r\w*/}], "_id"=>{"$in"=>["503f8ecf497bfee2dd000022"]}} flags=[] limit=0 skip=0 fields=nil (1.7908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:plain_docs, :query=>{}} (0.3819ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=plain_docs selector={} flags=[] (0.0539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.2041ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3481ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000063", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3810ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000063", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"475f", "confirmation_key"=>"bfb19d429f789af177ee", "settings"=>{}}] flags=[] (0.0932ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"best@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000064", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.2508ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd000064", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"best@test.com", "salt"=>"7e96", "confirmation_key"=>"c360f0d1d86d59f030a4", "settings"=>{}}] flags=[] (0.0772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000065", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3850ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000065", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"doc1", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000066", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000063", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000067", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd000068", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd000068", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"pd2", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd000069", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000063", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.1509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00006a", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5870ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=plain_docs documents=[{"_id"=>"503f8ecf497bfee2dd00006a", "version"=>1, "label_ids"=>[], "pos"=>99, "acl"=>{"503f8ecf497bfee2dd000063"=>{"privileges"=>"rwsd", "inherited"=>{}, "invited"=>nil, "at"=>2012-08-30 18:03:27 +0200}}, "name"=>"pd3", "starred"=>false, "log_entries"=>[{"_id"=>"503f8ecf497bfee2dd00006b", "changes"=>{}, "user_id"=>"503f8ecf497bfee2dd000063", "created_at"=>2012-08-30 16:03:27 UTC}]}] flags=[] (0.2871ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000063.privileges"=>/r\w*/}], "name"=>"pd3"}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={"$query"=>{"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000064.privileges"=>/r\w*/}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.5236ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=tas10box_dummy_test collection=plain_docs selector={"deleted_at"=>nil, "$or"=>[{"acl.503f8ecf497bfee2dd000063.privileges"=>/r\w*/}], "name"=>"doc1"} update={"$inc"=>{:pos=>1}} flags=[:multi] (0.1168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=plain_docs selector={:_id=>"503f8ecf497bfee2dd000065"} flags=[] limit=-1 skip=0 fields=nil (0.2589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=tas10box_dummy_test command={:count=>:tas10_users, :query=>{}} (0.1860ms)
  MOPED: 127.0.0.1:27017 DELETE       database=tas10box_dummy_test collection=tas10_users selector={} flags=[] (0.0520ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>nil, "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3009ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4563ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00006c", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3147ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd00006c", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test@test.com", "salt"=>"8639", "confirmation_key"=>"6486c011d913d5f7789c", "settings"=>{}}] flags=[] (0.0939ms)
WARNING: Can't mass-assign protected attributes: password
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"email"=>"test2@test.com", "deleted_at"=>nil} flags=[] limit=1 skip=0 fields={:_id=>1} (0.3688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=tas10box_dummy_test collection=tas10_users selector={"$query"=>{"_id"=>"503f8ecf497bfee2dd00006d", "$or"=>[{"version"=>1}, {"version"=>nil}]}, "$orderby"=>{:_id=>1}} flags=[] limit=-1 skip=0 fields=nil (0.3929ms)
  MOPED: 127.0.0.1:27017 INSERT       database=tas10box_dummy_test collection=tas10_users documents=[{"_id"=>"503f8ecf497bfee2dd00006d", "version"=>1, "known_user_ids"=>[], "group_ids"=>[], "email"=>"test2@test.com", "salt"=>"a9e1", "confirmation_key"=>"da6c1bc57e0ed479bd35", "settings"=>{}}] flags=[] (0.0999ms)
